<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>进击的程序媛，Laker&#39;s blog</title>
  <subtitle>进击的程序媛，江小湖Laker</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="http://laker.me/blog/"/>
  <updated>2017-07-18T02:39:50.000Z</updated>
  <id>http://laker.me/blog/</id>
  
  <author>
    <name>Laker Huang</name>
    <email>younglaker8#gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>比特币BTC瑞波币XRP用户领取恒星币XLM Lumen</title>
    <link href="http://laker.me/blog/2017/06/28/17_0628_ripple_lumen/"/>
    <id>http://laker.me/blog/2017/06/28/17_0628_ripple_lumen/</id>
    <published>2017-06-28T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170628.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="领取恒星币XLM Lumen"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<h2 id="领取步骤"><a href="#领取步骤" class="headerlink" title="领取步骤"></a>领取步骤</h2><p>XLM是恒星币Lumen的简称。</p>
<p>比特币用户领取地址<br><a href="https://www.stellar.org/cn/lumens/bitcoin-lumen-program/" target="_blank" rel="external">https://www.stellar.org/cn/lumens/bitcoin-lumen-program/</a></p>
<p>瑞波币用户领取地址<br><a href="https://www.stellar.org/lumens/ripple-lumen-program/" target="_blank" rel="external">https://www.stellar.org/lumens/ripple-lumen-program/</a></p>
<p>我的比特币钱包地址找不到了，所以只有瑞波币可领，各位大佬自行摸索比特币用户的领取吧。。</p>
<p><strong>瑞波比领取资格：瑞波钱包在2014年5月22前存在，并有余额</strong></p>
<p>感觉这个是程序员的一大福利。几年前Github的用户可以免费领取好像2K个吧，现在Ripple市值2-3元之间，算是一笔横财。不过当时我年轻不懂事，以为是诈骗邮件，没有领，后来自己了解了Ripple，后悔莫及，自己花钱买了一点，幻想着能像BTC一样。虽然现在也涨不上去，不过比我之前买的价位也是翻了几番，也心满意足了。本次赠送活动2014年5月22前存在，也就是说在Github发放时领取的钱包是有效范围！！</p>
<p>本次赠送的数目是按照2017年6月26日的快照显示的数目按比例赠送，所以现在充值没有用了，具体比例见后文的新闻摘抄。</p>
<p>前段时间随着比特币勒索病毒，大多虚拟币大涨，乘机清空了Ripple。但是由于Gatehub要求账户最低保留25个币，当时还很痛恨这个规定，现在看来，反而符合了赠币的要求。想起一个故事，一切都是最好的安排。</p>
<p>废话有点多，开始正文：</p>
<p>点击链接后，用FB账号登录，验证你的地区，因为美国地区法律受限制 ，此次活动不送给美国部分地区的人（手动开心）</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170628155223.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="验证地区"></p>
<p>通过验证后，如果已经有恒星的钱包，就在下面表单输入自己的恒星和瑞波的钱包。<br>如果没有恒星的钱包，点击上面的<code>Create Sellar Account</code> 创建一个，下个页面里会帮你创建一个恒星钱包，你自己填写你的瑞波钱包。<br>进入下一步。</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170628155259.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="输入自己的 Ripple 钱包"></p>
<p>（我这里是新建钱包的页面，不知道已有钱包是不是也这样）<br>出现一个交易要求，意思是你要从你的Ripple钱包发送一些钱和编号给恒星币机构的钱包，他们再打恒星币给你的恒星钱包。</p>
<ul>
<li>Destination Address：恒星币机构的钱包，打ripple币给他们</li>
<li>Destination Tag：你的编号</li>
<li>Amount：要打给他们的Ripple个数</li>
</ul>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170628155359.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="交易要求"></p>
<p>到你的钱包里打钱。我用的Gatehub。</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170628161859.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="打钱"></p>
<p><a href="https://www.stellar.org/cn/?noredirect=zh" target="_blank" rel="external">登录你的恒星钱包</a>，输入密钥登录，进入后会显示你的恒星币数目。<br>（现在活动刚开始一两天，兑换的人比较多，获取币会有延时，等十几分钟）</p>
<p>目前恒星币大约2毛一个，以后能不能财富自由就看它了，想想就开心（手动滑稽）</p>
<h2 id="区块链铅笔Blockchain相关新闻"><a href="#区块链铅笔Blockchain相关新闻" class="headerlink" title="区块链铅笔Blockchain相关新闻"></a><a href="https://mp.weixin.qq.com/s?__biz=MzA3NTg1MjE0Ng==&amp;mid=2649776959&amp;idx=2&amp;sn=ed84f281d3540c2ed995349acbe1e069&amp;chksm=876ef322b0197a34667e328037b47d5251634c831653bde2c4c7a10f3b6b5871358a9cebf11b&amp;mpshare=1&amp;scene=23&amp;srcid=03291VbSU78Tbfnem3YSYXTP#rd" target="_blank" rel="external">区块链铅笔Blockchain相关新闻</a></h2><p>Brian, March 28, 2017</p>
<p>去年10月，我们完成了向比特币持有人分发lumen币计划的第一步，而这一步只是Stellar.org承诺的一部分。Stellar.org承诺为比特币持有人预留lumen币初始供应量的19%，共计190亿lumen币。</p>
<p>今日，我们宣布在下一步计划中，将为比特币持有人分发共计160亿lumen币，即占lumen初始供应总量的16%。2017年6月27日，只要比特币持有人想要领取lumen币，我们便会向其分发，包括在第一轮赠送过程中获得lumen币的持有人。</p>
<p>如果你刚刚才听说这个消息，你可能会问我们为什么要这样做？在我们最初设计Stellar时，就深受比特币的启发。比特币网络是第一个证实一组相互不信任的各方可以迅速达成通用数据库的案例，直到现在比特币社区仍然在影响着我们对比特币区块链技术的理解。</p>
<h3 id="如何运作？"><a href="#如何运作？" class="headerlink" title="如何运作？"></a>如何运作？</h3><p>2017年6月26日：我们将对6月26日（UTC / GMT）挖矿的第一个区块并带有时间戳的所在区块链生成快照。该快照将记录当时所有比特币帐户的货币余额。</p>
<p>2017年6月27日：我们将发布领取页面，请比特币持有人验证他们是否管理着给定的比特币地址。接着，我们将把该地址的lumen币份额发送到持有人提供的Stellar账户。</p>
<p>为了解赠送lumen币的计算方式，我们以Rachel为例：</p>
<p>截至快照生成时<br>共计仍存有16,215,950个比特币<br>Rachel拥有10个比特币<br>Rachel能够申请<br>16,000,000,000 * (10/16,215,950) = 9,866.83个lumen币</p>
<p>计算结果</p>
<p>快照生成时，Rachel拥有的比特币占现存比特币总量的0.00006167％。</p>
<p>因此，她的9,866.83 个lumen币等同于赠送lumen币总量的0.00006167％。</p>
<p>2017年8月27日：bitcoin-lumen计划即宣告结束。若仍有lumen币无人认领，这些lumen币将转入Stellar.org的运营基金以及Build Challenge中。</p>
<p>由于受到监管限制，该计划不向美国纽约州、佐治亚州、新罕布什尔州、康涅狄格州以及伊朗、古巴、朝鲜以及受美国制裁的其他国家居民开放。但这些限制会随监管状况的变化而变化。</p>
<p>Stellar.org的成员及董事会成员均不会参与bitcoin-lumen计划，亦不会从中领取任何lumen币。</p>
<h3 id="领取lumen币：个人"><a href="#领取lumen币：个人" class="headerlink" title="领取lumen币：个人"></a>领取lumen币：个人</h3><p>6月27日：我们将提供领取页面的链接，通过该链接引导您完成简单的领取流程。</p>
<p>参与交易平台（若有其他交易平台与我们取得联系，我们会更新此列表）：</p>
<ul>
<li>Kraken</li>
<li>BTC38</li>
<li>Poloniex</li>
</ul>
<p>接下来的内容可能会有些令人感到麻烦。</p>
<p>如果您并未使用任何交易平台，按照法律要求，我们需要确保您不列于美国制裁名单中，或者位于上述任何受限制的司法管辖区。目前，我们正使用Facebook帐户验证对此进行查验。</p>
<p>我们知道这种感觉很糟糕。但隐私一直以来都是比特币生态系统最受关注的问题。 Stellar.org不会将您的Facebook数据用于任何其他目的，亦绝不会发布您的帐户。如果您不想分享您的Facebook信息，您仍然可以通过参与交易平台参与此次活动。</p>
<h3 id="领取lumen币：交易平台及企业"><a href="#领取lumen币：交易平台及企业" class="headerlink" title="领取lumen币：交易平台及企业"></a>领取lumen币：交易平台及企业</h3><p>6月27日之前：如果您是交易平台或其他为客户提供比特币池的企业，请通过您的企业电子邮件向bitcoin@stellar.org发送邮件。邮件内容请包含您的热钱包比特币地址，我们会确保将赠送给该地址的lumen币仅发送给您。</p>
<p>收到lumen币后，我们鼓励您按比例向每位客户分发。如有任何疑问或欲商讨任何其他方式，请发送邮件至bitcoin@stellar.org。</p>
<h3 id="领取lumen币：瑞波币（XRP）持有人"><a href="#领取lumen币：瑞波币（XRP）持有人" class="headerlink" title="领取lumen币：瑞波币（XRP）持有人"></a>领取lumen币：瑞波币（XRP）持有人</h3><p>6月27日：我们将提供领取页面的链接，通过该链接引导您完成简单的领取流程。</p>
<p>除了向比特币持有人分发lumen币外，我们还为XRP持有人预留了初始lumen币供应量的1％（10亿）。对于XRP，我们简要记录了ripple分类帐本6,762,000（2014年5月22日发生的分类帐）。任何ripple账户持有人在其账户中拥有少于750万XRP（当时为$ 50,000美元）均有资格获得赠币。每个具备资格的XRP持有人可以通过如下方式参与活动：</p>
<p>按比例：与比特币持有人类似，具备资格的XRP持有人会按比例收到此次赠送的币额（1％），并被记入高达150万XRP。</p>
<p>捐赠：符合条件的XRP持有人也可以将高达150万XRP捐赠给一系列精选慈善机构，并获得等量lumen币作为回报。</p>
<h3 id="Stellar与比特币和其他网络相比如何？"><a href="#Stellar与比特币和其他网络相比如何？" class="headerlink" title="Stellar与比特币和其他网络相比如何？"></a>Stellar与比特币和其他网络相比如何？</h3><p>Stellar网络深受比特币启发——我们从中吸取教训，并增加了在计算能力较低的环境中容忍非理性行为者的能力。</p>
<p>Stellar与比特币之间的其他一些主要的区别在于：</p>
<p>在比特币中，用来确认交易的节点负责挖掘比特币，并且随着时间的推移向矿工分发货币。Stellar网络中不存在挖矿：在网络启动时会自动创建1000亿lumen币。其中95％的lumen币可向全世界提供。</p>
<p>Stellar采用全新的共识算法，即使用联合拜占庭协议的恒星共识协议（SCP）。Stellar网络中的交易在几秒钟内便可得到确认，而且确认节点使用的计算资源也相对较少。</p>
<p>比特币在最初几年暴涨，最终达到近乎固定的供应量，而lumen币的供应量每年以1％的固定比率增长。</p>
<h3 id="了解更多"><a href="#了解更多" class="headerlink" title="了解更多"></a>了解更多</h3><p>我们相信Stellar网络的以社区为基础的所有权，并希望早期的数字货币爱好者（例如比特币持有人）在Stellar社区感到轻松自在。关于bitcoin-lumen如有任何问题，请随时与我们取得联系：</p>
<p>在slack.stellar.org中加入对话</p>
<p>进入官方Bitcointalk线程</p>
<p>如果您是开发人员，并有兴趣在Stellar网络中搭建应用程序，请浏览我们的文档。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170628.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;领取恒星币XLM Lumen&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="其他" scheme="http://laker.me/blog/categories/%E5%85%B6%E4%BB%96/"/>
    
    
  </entry>
  
  <entry>
    <title>Vue.js 2 高仿饿了么开发及解注一：基础准备</title>
    <link href="http://laker.me/blog/2017/06/20/17_0620_vuejs_eleme_1/"/>
    <id>http://laker.me/blog/2017/06/20/17_0620_vuejs_eleme_1/</id>
    <published>2017-06-20T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170620.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="Vue.js 2 高仿饿了么开发及解注一"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<p>慕课网早期出了《Vue.js 1 高仿饿了么APP》的课程，本系列文章根据课程，使用 Vue.js 2 版本进行开发，并进行了一步步开发流程记录和详细的代码注解。</p>
<p><a href="https://github.com/ustbhuangyi/vue-sell" target="_blank" rel="external">原作者的代码</a></p>
<p><a href="https://github.com/younglaker/CometLab/tree/vue-eleme" target="_blank" rel="external">我做的含有详细代码注解的版本</a></p>
<h2 id="安装-Vue-模板"><a href="#安装-Vue-模板" class="headerlink" title="安装 Vue 模板"></a>安装 Vue 模板</h2><p>安装好vue-cli后执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> vue init webpack AppName  <span class="comment">#建立一个webpack打包的应用，默认使用最新版vue</span></span></div></pre></td></tr></table></figure>
<p>然后按照提示填写信息：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="string">?</span> <span class="string">Project</span> <span class="string">name</span> <span class="string">sell</span></div><div class="line"><span class="string">?</span> <span class="string">Project</span> <span class="string">description</span> <span class="string">sell</span></div><div class="line"><span class="string">?</span> <span class="string">Author</span> <span class="string">younglaker</span> <span class="string">&lt;younglaker8@gmail.com&gt;</span></div><div class="line"><span class="string">?</span> <span class="string">Vue</span> <span class="string">build</span> <span class="string">standalone</span></div><div class="line"><span class="string">?</span> <span class="string">Install</span> <span class="string">vue-router?</span> <span class="literal">Yes</span></div><div class="line"><span class="string">?</span> <span class="string">Use</span> <span class="string">ESLint</span> <span class="string">to</span> <span class="string">lint</span> <span class="string">your</span> <span class="string">code?</span> <span class="literal">Yes</span></div><div class="line"><span class="string">?</span> <span class="string">Pick</span> <span class="string">an</span> <span class="string">ESLint</span> <span class="string">preset</span> <span class="string">Standard</span>  <span class="comment">#</span></div><div class="line"><span class="string">?</span> <span class="string">Setup</span> <span class="string">unit</span> <span class="string">tests</span> <span class="string">with</span> <span class="string">Karma</span> <span class="string">+</span> <span class="string">Mocha?</span> <span class="literal">No</span>  <span class="comment">#单元测试</span></div><div class="line"><span class="string">?</span> <span class="string">Setup</span> <span class="string">e2e</span> <span class="string">tests</span> <span class="string">with</span> <span class="string">Nightwatch?</span> <span class="literal">No</span></div><div class="line"></div><div class="line">   <span class="string">vue-cli</span> <span class="string">·</span> <span class="string">Generated</span> <span class="string">"sell"</span><span class="string">.</span></div><div class="line"></div><div class="line">   <span class="string">To</span> <span class="string">get</span> <span class="attr">started:</span></div><div class="line"></div><div class="line">     <span class="string">cd</span> <span class="string">sell</span></div><div class="line">     <span class="string">npm</span> <span class="string">install</span></div><div class="line">     <span class="string">npm</span> <span class="string">run</span> <span class="string">dev</span></div></pre></td></tr></table></figure>
<h2 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h2><p>– build ： webpack配置相关<br>– config ： webpack配置相关<br>– node_modules ： 依赖<br>– src ： 开发目录<br>– static ： 第三方静态资源<br>| – .gitkeep ： 使得如果文件为空也提交到git仓库<br>– babelrc ： babel 配置<br>– .editorconfig ： 编辑器配置。sublime要安装插件EditorConfig<br>– .eslintignore ： 设置忽略语法检查的文件<br>– .eslintrc.js ： eslint 配置。<br>– index.html ： 项目入口<br>– pakage.json ： 配置。<code>script</code>设置执行的命令，<code>npm run dev/start/build</code>即执行相应的脚本。<code>dependencies</code>生产需要的依赖， <code>devDependencies</code>编译过程的依赖，版本号前面有个 <code>^</code> 表示最低版本</p>
<h2 id="EsLint-配置"><a href="#EsLint-配置" class="headerlink" title="EsLint 配置"></a>EsLint 配置</h2><p><code>extends: &#39;standard&#39;</code> 是初始化文件时候选的，可以在<code>&#39;rules&#39;</code>里添加自己的规则（条件名：0 即为不检测此条件）。</p>
<ul>
<li>默认js不能输入分号，想要分号则添加<code>&#39;semi&#39;: [&#39;error&#39;, &#39;always&#39;]</code></li>
<li>忽略缩进报错<code>&#39;indent&#39;： 0</code></li>
<li>不检测 new 实例，在 vue 代码前添加注释 <code>/* eslint-disable no-new */</code></li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* eslint-disable no-new */</span></div><div class="line"><span class="selector-tag">new</span> <span class="selector-tag">Vue</span>(&#123;</div><div class="line">  <span class="attribute">el</span>: <span class="string">'#app'</span>,</div><div class="line">  router,</div><div class="line">  render: h =&gt; <span class="built_in">h</span>(App)</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><p>查看示例组件<code>App.vue</code>，每个组件包括：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span>...<span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined">...</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined">...</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="新增目录"><a href="#新增目录" class="headerlink" title="新增目录"></a>新增目录</h2><p><a href="https://github.com/ustbhuangyi/vue-sell/tree/1.0/src/common" target="_blank" rel="external">https://github.com/ustbhuangyi/vue-sell/tree/1.0/src/common</a></p>
<p>把图标SVG上传到 <a href="https://icomoon.io/app/#/select" target="_blank" rel="external">https://icomoon.io/app/#/select</a> 制作 ico fonts 并下载</p>
<ul>
<li>在 src 文件夹下新建文件夹 common， js</li>
<li>common 下新建 fonts, js, stylus</li>
<li>fonts 下把 ico fonts 字体文件放到这</li>
<li>stylus 下把  ico fonts 的 style.css 改成 ico.styl 放到这，把文字路径的 <code>fonts/</code> 改为 <code>../fonts/</code></li>
<li>在 static 文件加入 css/reset.css，并在 index.html 里引用<code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;static/css/reset.css&quot; /&gt;</code></li>
</ul>
<p>安装 stylys：</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install stylus stylus-loader –-<span class="built_in">save</span>-<span class="built_in">dev</span></div></pre></td></tr></table></figure>
<h2 id="模拟数据"><a href="#模拟数据" class="headerlink" title="模拟数据"></a>模拟数据</h2><p>添加 <code>data.json</code> 到根目录：</p>
<p><a href="https://github.com/ustbhuangyi/vue-sell/blob/1.0/data.json" target="_blank" rel="external">https://github.com/ustbhuangyi/vue-sell/blob/1.0/data.json</a></p>
<p>在<code>var app = express()</code> 后面添加（因为用到 express，所以要在起定义后）：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// import data.json</span></div><div class="line"><span class="keyword">var</span> appData = <span class="keyword">require</span>(<span class="string">'../data.json'</span>)</div><div class="line"><span class="keyword">var</span> seller = appData.seller</div><div class="line"><span class="keyword">var</span> goods = appData.goods</div><div class="line"><span class="keyword">var</span> ratings = appData.ratings</div><div class="line"></div><div class="line"><span class="keyword">var</span> apiRoutes = express.Router()</div><div class="line"></div><div class="line">apiRoutes.get(<span class="string">'/seller'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(req, res)</span> </span>&#123;</div><div class="line">  res.json(&#123;</div><div class="line">    status: <span class="number">1</span>, <span class="comment">// 定义状态码</span></div><div class="line">    data: seller</div><div class="line">  &#125;);</div><div class="line">&#125;)</div><div class="line"></div><div class="line">apiRoutes.get(<span class="string">'/goods'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(req, res)</span> </span>&#123;</div><div class="line">  res.json(&#123;</div><div class="line">    status: <span class="number">1</span>,</div><div class="line">    data: goods</div><div class="line">  &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">apiRoutes.get(<span class="string">'/ratings'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(req, res)</span> </span>&#123;</div><div class="line">  res.json(&#123;</div><div class="line">    status: <span class="number">1</span>,</div><div class="line">    data: ratings</div><div class="line">  &#125;);</div><div class="line">&#125;)</div><div class="line"></div><div class="line">app.<span class="keyword">use</span>(<span class="string">'/api'</span>, apiRoutes)</div></pre></td></tr></table></figure>
<h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><p><strong>index.html</strong></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;meta <span class="built_in">name</span>=<span class="string">"viewport"</span></div><div class="line">    content=<span class="string">"width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"</span>&gt;</div></pre></td></tr></table></figure>
<p><strong>router/index.js</strong></p>
<p>把 Hello 的引入删掉，删除 components: Hello。 header 已经在 App.vue 里引入，这里不用再引入。</p>
<p><strong>App.vue:</strong></p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;v-header&gt;&lt;/v-header&gt;</div><div class="line"></div><div class="line"><span class="keyword">import</span> header <span class="keyword">from</span> <span class="string">'./components/header/header.vue'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  name: <span class="string">'app'</span>,</div><div class="line">  components: &#123;</div><div class="line">    <span class="string">'v-header'</span>: header</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;style lang=<span class="string">"stylus"</span>&gt;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure>
<p><strong>components/header/header.vue</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span>header</div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"stylus"</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="tebs-路由"><a href="#tebs-路由" class="headerlink" title="tebs 路由"></a>tebs 路由</h2><p><strong>App.vue:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">v-header</span>&gt;</span><span class="tag">&lt;/<span class="name">v-header</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tab border-1px"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tab-item"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/goods"</span>&gt;</span>商品<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tab-item"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/ratings"</span>&gt;</span>评论<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tab-item"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/seller"</span>&gt;</span>商家<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>build/webpack.base.conf.js</strong> 新增路径别称</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">resolve</span>: &#123;</div><div class="line">  ......</div><div class="line">  alia<span class="variable">s:</span> &#123;</div><div class="line">    <span class="string">'@'</span>: <span class="built_in">resolve</span>(<span class="string">'src'</span>)</div><div class="line">    // 就能用 @/ 表示 src/</div><div class="line">    // 或改为 <span class="string">'src'</span>: path.<span class="built_in">resolve</span>(__dirname, <span class="string">'../src'</span>),</div><div class="line">    <span class="string">'common'</span>: path.<span class="built_in">resolve</span>(__dirname, <span class="string">'../src/common'</span>),</div><div class="line">    <span class="string">'components'</span>: path.<span class="built_in">resolve</span>(__dirname, <span class="string">'../src/components'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>router/index.js</strong> 修改路由配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 如果没有上一步配置路径别称，就要用 @/components</span></div><div class="line"><span class="keyword">import</span> goods <span class="keyword">from</span> <span class="string">'components/goods/goods'</span></div><div class="line"><span class="keyword">import</span> ratings <span class="keyword">from</span> <span class="string">'components/ratings/ratings'</span></div><div class="line"><span class="keyword">import</span> seller <span class="keyword">from</span> <span class="string">'components/seller/seller'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</div><div class="line">  <span class="attr">routes</span>: [&#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'/'</span>,</div><div class="line">    <span class="attr">redirect</span>: <span class="string">'/goods'</span>  <span class="comment">// 重定向,进入就显示goods信息</span></div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'/goods'</span>,</div><div class="line">    <span class="attr">component</span>: goods</div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'/ratings'</span>,</div><div class="line">    <span class="attr">component</span>: ratings</div><div class="line">  &#125;, &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'/seller'</span>,</div><div class="line">    <span class="attr">component</span>: seller</div><div class="line">  &#125;]</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="tabs-选中后高亮"><a href="#tabs-选中后高亮" class="headerlink" title="tabs 选中后高亮"></a>tabs 选中后高亮</h2><p><strong>router/index.js</strong><br>全局配置 <router-link> 的默认『激活 class 类名』<br><a href="http://router.vuejs.org/zh-cn/api/options.html" target="_blank" rel="external">http://router.vuejs.org/zh-cn/api/options.html</a></router-link></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">export</span> <span class="selector-tag">default</span> <span class="selector-tag">new</span> <span class="selector-tag">Router</span>(&#123;</div><div class="line">  <span class="attribute">linkActiveClass</span>: <span class="string">'active'</span>,</div><div class="line"></div><div class="line">  <span class="attribute">routes</span>: [&#123;</div><div class="line">    <span class="attribute">path</span>: <span class="string">'/'</span>,</div><div class="line">    <span class="attribute">redirect</span>: <span class="string">'/goods'</span></div><div class="line">  &#125;, &#123;....</div></pre></td></tr></table></figure>
<p>新建 <strong>common/stylus/mixin.styl</strong><br>添加 1px border 的样式，通过传颜色使用。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">border-1px</span><span class="params">(<span class="variable">$color</span>)</span></span></div><div class="line">  <span class="attribute">position</span>: relative</div><div class="line">  &amp;:after</div><div class="line">    <span class="attribute">display</span>: block</div><div class="line">    <span class="attribute">position</span>: absolute</div><div class="line">    <span class="attribute">left</span>: <span class="number">0</span></div><div class="line">    <span class="attribute">bottom</span>: <span class="number">0</span></div><div class="line">    <span class="attribute">width</span>: <span class="number">100%</span></div><div class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="variable">$color</span></div><div class="line">    <span class="attribute">content</span>: <span class="string">' '</span></div><div class="line"></div><div class="line"><span class="function"><span class="title">border-none</span><span class="params">()</span></span></div><div class="line">  &amp;:after</div><div class="line">    <span class="attribute">display</span>: none</div></pre></td></tr></table></figure>
<p>新建 <strong>common/stylus/base.styl</strong><br>对 1px border 的样式在不同dpi相应缩放，避免 iphone6 下 1px BUG。</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@media</span> (<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">1.5</span>),(<span class="attribute">min-device-pixel-ratio</span>: <span class="number">1.5</span>)</div><div class="line">  .border-<span class="number">1px</span></div><div class="line">    &amp;::after</div><div class="line">      <span class="attribute">-webkit-transform</span>: scaleY(<span class="number">0.7</span>)</div><div class="line">      <span class="attribute">transform</span>: scaleY(<span class="number">0.7</span>)</div><div class="line"></div><div class="line"><span class="variable">@media</span> (<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">2</span>),(<span class="attribute">min-device-pixel-ratio</span>: <span class="number">2</span>)</div><div class="line">  .border-<span class="number">1px</span></div><div class="line">    &amp;::after</div><div class="line">      <span class="attribute">-webkit-transform</span>: scaleY(<span class="number">0.5</span>)</div><div class="line">      <span class="attribute">transform</span>: scaleY(<span class="number">0.5</span>)</div></pre></td></tr></table></figure>
<p>新建 <strong>common/stylus/index.styl</strong><br>引用所有样式</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@import</span> <span class="string">"./mixin"</span></div><div class="line"><span class="variable">@import</span> <span class="string">"./icon"</span></div><div class="line"><span class="variable">@import</span> <span class="string">"./base"</span></div></pre></td></tr></table></figure>
<p><strong>main.js</strong> 里引用</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'common/stylus/index.styl'</span></div></pre></td></tr></table></figure>
<p><strong>App.vue:</strong><br>tab基础样式</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">@import <span class="string">"./common/stylus/mixin.styl"</span></div><div class="line"></div><div class="line"><span class="selector-class">.tab</span></div><div class="line">  <span class="attribute">display</span>: flex</div><div class="line">  <span class="attribute">width</span>: <span class="number">100%</span></div><div class="line">  <span class="attribute">height</span>: <span class="number">40px</span></div><div class="line">  <span class="attribute">line-height</span>: <span class="number">40px</span></div><div class="line">  <span class="attribute">border</span>-<span class="number">1px</span>(rgba(<span class="number">7</span>, <span class="number">17</span>, <span class="number">27</span>, <span class="number">0.1</span>))</div><div class="line">  <span class="selector-class">.tab-item</span></div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span></div><div class="line">    <span class="attribute">text-align</span>: center</div><div class="line">    &amp; &gt; <span class="selector-tag">a</span></div><div class="line">      <span class="attribute">display</span>: block</div><div class="line">      <span class="attribute">font-size</span>: <span class="number">14px</span></div><div class="line">      <span class="attribute">color</span>: rgb(<span class="number">77</span>, <span class="number">85</span>, <span class="number">93</span>)</div><div class="line">      &amp;<span class="selector-class">.active</span></div><div class="line">        <span class="attribute">color</span>: rgb(<span class="number">240</span>, <span class="number">20</span>, <span class="number">20</span>)</div></pre></td></tr></table></figure>
<h2 id="在手机上预览"><a href="#在手机上预览" class="headerlink" title="在手机上预览"></a>在手机上预览</h2><p>获取本机ip，例如 192.168.1.2 ， 把 localhost:8080/ 改成 192.168.1.2:8080 ，PC上也可以用这个地址访问。</p>
<p>可以用工具生成二维码，微信扫描访问。确保PC与手机同一局域网下。</p>
<h2 id="一些常见报错"><a href="#一些常见报错" class="headerlink" title="一些常见报错"></a>一些常见报错</h2><table>
<thead>
<tr>
<th style="text-align:left">报错</th>
<th style="text-align:left">原因</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">spaced-commnet</td>
<td style="text-align:left">注释<code>//</code>、<code>/*</code>后面没有空格，<code>*/</code>前面没有空格</td>
</tr>
<tr>
<td style="text-align:left">unkown custom element</td>
<td style="text-align:left">自定义标签没有正确注册</td>
</tr>
<tr>
<td style="text-align:left">indent</td>
<td style="text-align:left">缩进问题</td>
</tr>
<tr>
<td style="text-align:left">space-before-function-paren</td>
<td style="text-align:left">函数名和括号之间没有加空格</td>
</tr>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170620.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;Vue.js 2 高仿饿了么开发及解注一&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Vue.js" scheme="http://laker.me/blog/categories/Vue-js/"/>
    
    
      <category term="HTML5" scheme="http://laker.me/blog/tags/HTML5/"/>
    
      <category term="JavaScript" scheme="http://laker.me/blog/tags/JavaScript/"/>
    
      <category term="Vue.js" scheme="http://laker.me/blog/tags/Vue-js/"/>
    
  </entry>
  
  <entry>
    <title>EasyCanvas：连续画图的一些总结</title>
    <link href="http://laker.me/blog/2017/06/15/17_0615_easy_canvas/"/>
    <id>http://laker.me/blog/2017/06/15/17_0615_easy_canvas/</id>
    <published>2017-06-15T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170615.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="Easy Canvas"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<hr>
<p>自己造轮子，写一个 Canvas 绘图库 <a href="https://github.com/younglaker/EasyCanvas" target="_blank" rel="external">EasyCanvas</a> ，master 分支上已完成基本图形的绘制。我开始思考如何让这个框架更高效地绘制，接口的设计比实现头痛多了。</p>
<blockquote>
<p>欢迎有兴趣的朋友加入本框架的编写中，或者提供修改建议。V信：lakerHQ</p>
</blockquote>
<h2 id="最初的设计"><a href="#最初的设计" class="headerlink" title="最初的设计"></a>最初的设计</h2><p>目前 master 分支上的版本的配置里的 points 传入坐标，不同的画图功能，points 是不同含义。</p>
<p>例如画线，第一组数组是起始点，后面依次是下一个绘制点，就可以连续画线：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">b</span><span class="selector-class">.line</span>(&#123;</div><div class="line">    <span class="attribute">points</span>: [[<span class="number">10</span>, <span class="number">100</span>], [<span class="number">200</span>, <span class="number">100</span>], [<span class="number">10</span>, <span class="number">200</span>]]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>例如画二次贝塞尔曲线，三组坐标分别是开始点、控制点、结束点：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">b</span><span class="selector-class">.bezier</span>(&#123;</div><div class="line">    <span class="attribute">points</span>: [[<span class="number">20</span>, <span class="number">20</span>],  [<span class="number">200</span>, <span class="number">100</span>], [<span class="number">200</span>, <span class="number">20</span>]]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>例如画矩形，points是矩形左上角坐标，矩形长宽另写：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">b</span><span class="selector-class">.rect</span>(&#123;</div><div class="line">    <span class="attribute">points</span>: [<span class="number">10</span>, <span class="number">50</span>],</div><div class="line">    rectWidth: <span class="number">300</span>,</div><div class="line">    rectHeight: <span class="number">200</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ul>
<li>按目前的设计，除了画直线，连续画图要多次调用同一个方法，如：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">b</span><span class="selector-class">.bezier</span>(&#123;</div><div class="line">    <span class="attribute">points</span>: [[<span class="number">20</span>, <span class="number">20</span>],  [<span class="number">200</span>, <span class="number">100</span>], [<span class="number">200</span>, <span class="number">20</span>]]，</div><div class="line">    color: <span class="string">"#00f"</span>,</div><div class="line">    shadowColor: <span class="string">"#000"</span></div><div class="line">&#125;)<span class="selector-class">.bezier</span>(&#123;</div><div class="line">    <span class="attribute">points</span>: [[<span class="number">10</span>, <span class="number">10</span>],  [<span class="number">100</span>, <span class="number">100</span>], [<span class="number">100</span>, <span class="number">10</span>]]，</div><div class="line">    color: <span class="string">"#00f"</span>,</div><div class="line">    shadowColor: <span class="string">"#000"</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>上述代码想画两条同样样式的曲线，但是写法过于累赘，并且两条曲线是不相连接。</p>
<ul>
<li>必要的属性分开写，增加代码量。例如画矩形必须提供起始坐标和长宽，把基本值分开书写徒增代码量：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">b</span><span class="selector-class">.rect</span>(&#123;</div><div class="line">    <span class="attribute">points</span>: [<span class="number">10</span>, <span class="number">50</span>],</div><div class="line">    rectWidth: <span class="number">300</span>,</div><div class="line">    rectHeight: <span class="number">200</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="改进方案："><a href="#改进方案：" class="headerlink" title="改进方案："></a>改进方案：</h2><p>目标：</p>
<ul>
<li>只写一次方法就能连续画图</li>
<li>缩减不必要的代码</li>
</ul>
<p>所以把配置的 points 去掉，所有基本配置由 basic 传入。</p>
<p>例如画一条连续的二次贝塞尔曲线，坐标两两成一组，曲线第一笔画的最后一组坐标（200, 10）是二笔画的起始点，这样既节省代码，又避免修改的时候出错：</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">b.bezier(&#123;</div><div class="line"><span class="symbol">    shadow:</span> [<span class="number">1</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="string">"#0f0"</span>],</div><div class="line"><span class="symbol">    color:</span> <span class="string">"#0000ff"</span>,</div><div class="line"><span class="symbol">    shadowColor:</span> <span class="string">"#000"</span>,</div><div class="line"><span class="symbol">    basic:</span> [</div><div class="line">            [<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">10</span>], <span class="comment">//曲线第一笔画</span></div><div class="line">            [<span class="number">30</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">10</span>] <span class="comment">//曲线第二笔画</span></div><div class="line">           ]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>例如画多条的二次贝塞尔曲线：</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">b.bezier(&#123;</div><div class="line">    shadow: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="string">"#0f0"</span>],</div><div class="line">    color: <span class="string">"#0000ff"</span>,</div><div class="line">    shadowColor: <span class="string">"#000"</span>,</div><div class="line">    basic: [    //第一条曲线</div><div class="line">            [<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">10</span>],</div><div class="line">            [<span class="number">30</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">10</span>]</div><div class="line">           ],</div><div class="line">    basic1: [    //第二条曲线</div><div class="line">            [<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">10</span>],</div><div class="line">            [<span class="number">40</span>, <span class="number">100</span>, <span class="number">400</span>, <span class="number">10</span>],</div><div class="line">            [<span class="number">50</span>, <span class="number">120</span>, <span class="number">200</span>, <span class="number">60</span>]</div><div class="line">           ],</div><div class="line">    .....</div><div class="line">    basicN: []</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>例如画矩形， basic 的参数依此代码起始点横纵坐标、长宽：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">b</span><span class="selector-class">.rect</span>(&#123;</div><div class="line">    <span class="attribute">color</span>: <span class="string">"#0000ff"</span>,</div><div class="line">    basic: [<span class="number">10</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">100</span>]</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="selector-tag">b</span><span class="selector-class">.rect</span>(&#123;</div><div class="line">    <span class="attribute">color</span>: <span class="string">"#0000ff"</span>,</div><div class="line"></div><div class="line">    basic: [<span class="number">10</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">100</span>],</div><div class="line">    basic1: [<span class="number">20</span>, <span class="number">30</span>, <span class="number">550</span>, <span class="number">120</span>]</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>最开始设计的时候，为了表意明确，把坐标、长宽都独立成一个设置值，但是这几个值都是画图最基本的参数，并且参考 CSS 样式、Canva s画图的参数设置方式，也就决定把基本值合并在一个 basic 设置里。</p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>画曲线部分下一笔画的开始时上一笔画的结束，代码实现方案有两种：</p>
<ul>
<li>把上一笔画的结束点 unshift 到下一笔画的数值最开始</li>
<li>绘制时判断是否第一笔画，进行相应操作</li>
</ul>
<p>我选择了第二种方案，代码如下：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> *  Draw quadratic curve</div><div class="line"> */</div><div class="line">bezier: function(settings) &#123;</div><div class="line">	<span class="keyword">var</span> opt = _extendDefaults(<span class="keyword">this</span>.defaults, settings);</div><div class="line">	<span class="keyword">var</span> bs = &#123;&#125;;</div><div class="line"></div><div class="line">	_setOpt(<span class="keyword">this</span>.ctx, opt);</div><div class="line"></div><div class="line">	<span class="comment">// 遍历所有设置</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> opt) &#123;</div><div class="line">		<span class="comment">// 把 basic 设置放入 bs</span></div><div class="line">		<span class="keyword">if</span> (!!i.match(/basic/))</div><div class="line">			<span class="comment">// 给 “baisc” 填充成 “baisc0”，方便后续遍历</span></div><div class="line">			bs[!!i.match(/basic\d+/) ? i : i + <span class="string">"0"</span>] = opt[i];</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; Object.keys(bs).length; i++) &#123;</div><div class="line">		<span class="keyword">var</span> basic = bs[<span class="string">"basic"</span> + i];</div><div class="line"></div><div class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; basic.length; j++) &#123;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> (j === <span class="number">0</span>) &#123;	<span class="comment">// basic0</span></div><div class="line">				<span class="keyword">this</span>.ctx.moveTo(basic[j][<span class="number">0</span>], basic[j][<span class="number">3</span>]);</div><div class="line">				<span class="keyword">this</span>.ctx.quadraticCurveTo(basic[j][<span class="number">2</span>], basic[j][<span class="number">3</span>], basic[j][<span class="number">4</span>], basic[j][<span class="number">5</span>]);</div><div class="line"></div><div class="line">			&#125; <span class="keyword">else</span> &#123;	<span class="comment">// 其他basic使用上一笔画的结束点作为此笔画的起始点</span></div><div class="line">				<span class="keyword">this</span>.ctx.moveTo(basic[j - <span class="number">1</span>][<span class="number">4</span>], basic[j - <span class="number">1</span>][<span class="number">5</span>]);</div><div class="line">				<span class="keyword">this</span>.ctx.quadraticCurveTo(basic[j][<span class="number">0</span>], basic[j][<span class="number">4</span>], basic[j][<span class="number">2</span>], basic[j][<span class="number">3</span>]);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">this</span>.ctx.fill();</div><div class="line">	<span class="keyword">this</span>.ctx.stroke();</div><div class="line">	<span class="keyword">this</span>.ctx.closePath();</div><div class="line"></div><div class="line">	<span class="keyword">this</span>._renewDefaults();</div><div class="line"></div><div class="line">	<span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170615.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;Easy Canvas&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="HTML5" scheme="http://laker.me/blog/categories/HTML5/"/>
    
    
      <category term="HTML5" scheme="http://laker.me/blog/tags/HTML5/"/>
    
      <category term="JavaScript" scheme="http://laker.me/blog/tags/JavaScript/"/>
    
      <category term="Canvas" scheme="http://laker.me/blog/tags/Canvas/"/>
    
  </entry>
  
  <entry>
    <title>记一次数据库导入的过程</title>
    <link href="http://laker.me/blog/2017/06/06/17_0606_sql/"/>
    <id>http://laker.me/blog/2017/06/06/17_0606_sql/</id>
    <published>2017-06-06T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170605.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="Title"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>系统运行两年，员工信息变动大，但是系统未与HR系统对接，导致本系统人员信息滞后。现需要导入新的员工信息，并为其创建账号。</p>
<h2 id="创建临时表导入最新员工信息"><a href="#创建临时表导入最新员工信息" class="headerlink" title="创建临时表导入最新员工信息"></a>创建临时表导入最新员工信息</h2><p>从HR得到一个最新全司员工信息的 Excel 表格，包含工号、姓名、部门。</p>
<h3 id="导入临时表"><a href="#导入临时表" class="headerlink" title="导入临时表"></a>导入临时表</h3><p>新建临时表 tmp，新建字段（取 employee 表的必填字段即可），按正式的员工数据表的字段设置类型。导入 Excel，选择 Excel 列对应相应字段。</p>
<p>tmp 字段：</p>
<ul>
<li>serial_id：工号</li>
<li>user_name：姓名</li>
<li>dep_name：部门名</li>
<li>dep_id：部门id</li>
<li>employee_id：对应 employee 表的自增序列 sequence</li>
</ul>
<h3 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h3><p>把 tmp 里已存在于 employee 表里的员工删除</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tmp</div><div class="line"><span class="keyword">where</span> serial_id <span class="keyword">in</span> (</div><div class="line">    <span class="keyword">select</span> serial_id <span class="keyword">from</span> employee</div><div class="line">)</div></pre></td></tr></table></figure>
<p>剩下的就是新增的员工</p>
<h3 id="更新部门id"><a href="#更新部门id" class="headerlink" title="更新部门id"></a>更新部门id</h3><p>Excel 表里只有部门名称，要把 tmp 表里的部门名找到对应的部门id</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">update tmp <span class="selector-tag">a</span></div><div class="line">set <span class="selector-tag">a</span><span class="selector-class">.dep_id</span> = (</div><div class="line">    select <span class="selector-tag">b</span><span class="selector-class">.section_id</span> from sectioninfo <span class="selector-tag">b</span></div><div class="line">    where <span class="selector-tag">a</span><span class="selector-class">.dep_name</span> = <span class="selector-tag">b</span><span class="selector-class">.section_name</span></div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="处理部门数据"><a href="#处理部门数据" class="headerlink" title="处理部门数据"></a>处理部门数据</h3><p>会出现 HR 给的 Excel 表里部门名称与系统对应的名称不一致，导致无法匹配部门id，只能手动修改。</p>
<p>在 SQL developer 里操作不方便，可以把 tmp 数据导出 Excel 表进行操作，手动补充部门id。</p>
<p>清空 tmp 数据，导入新 Excel。</p>
<h3 id="把-tmp-插入-employee"><a href="#把-tmp-插入-employee" class="headerlink" title="把 tmp 插入 employee"></a>把 tmp 插入 employee</h3><p>把 tmp 插入 employee，对应好字段，注意必填字段必须导入或设置自非空定义值（可以参考 employee 里已有的数据格式）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee(</div><div class="line">	employee_id,</div><div class="line">	serial_id,</div><div class="line">	user_name,</div><div class="line">	domain_name,</div><div class="line">	created_by</div><div class="line">)</div><div class="line"><span class="keyword">select</span> saaf_employee_s.nextval,</div><div class="line">    # employee 表的 <span class="keyword">sequence</span>，取系一个值。<span class="keyword">sequence</span> 在数据库 &gt; 序列 里查找</div><div class="line">	serial_id,</div><div class="line">	user_name,</div><div class="line">	user_name,</div><div class="line">	<span class="number">-1</span></div><div class="line"><span class="keyword">from</span> tmp</div><div class="line"><span class="keyword">where</span> serial_id <span class="keyword">not</span> <span class="keyword">in</span> (</div><div class="line">	<span class="keyword">select</span> serial_id <span class="keyword">from</span> employee</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="建立部门和员工的关系"><a href="#建立部门和员工的关系" class="headerlink" title="建立部门和员工的关系"></a>建立部门和员工的关系</h3><p>本系统中，部门和员工关系在 sectioninfo_employee 表里。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sectioninfo_employee(</div><div class="line">		se_id,</div><div class="line">		employee_id,</div><div class="line">		isval,</div><div class="line">		section_id,</div><div class="line">		creation_date)</div><div class="line"><span class="keyword">select</span> sectioninfo_employee_s.nextval,</div><div class="line">	employee_id,</div><div class="line">	<span class="number">1</span>,</div><div class="line">	dep_id,</div><div class="line">	<span class="keyword">to_date</span>(<span class="string">'14-4月-17'</span>,<span class="string">'dd-mon-rr'</span>)</div><div class="line"><span class="keyword">from</span> tmp</div><div class="line"><span class="keyword">where</span> serial_id <span class="keyword">in</span> (</div><div class="line">	<span class="keyword">select</span> serial_id <span class="keyword">from</span> tmp</div><div class="line">)</div></pre></td></tr></table></figure>
<h3 id="新建账号"><a href="#新建账号" class="headerlink" title="新建账号"></a>新建账号</h3><p>查找 epmloyee 表里工号不在账户表 users 的人员，新建账号</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> saaf_users(</div><div class="line">	user_id,</div><div class="line">	user_name,</div><div class="line">	user_full_name,</div><div class="line">	encrypted_password</div><div class="line">)</div><div class="line"><span class="keyword">select</span> users_s.nextval, # <span class="keyword">users</span> 表的 <span class="keyword">sequence</span></div><div class="line">	serial_id,</div><div class="line">	user_name,</div><div class="line">	<span class="string">'*********'</span>, # 加密密码。从已有的数据里选一个做默认密码</div><div class="line"><span class="keyword">from</span> saaf_employee</div><div class="line"><span class="keyword">where</span> serial_id <span class="keyword">not</span> <span class="keyword">in</span> (</div><div class="line">	<span class="keyword">select</span> user_name <span class="keyword">from</span> saaf_users</div><div class="line">)</div></pre></td></tr></table></figure>
<p>按理说就能用新账号登录了，但是一直并无法登录。往回查错。</p>
<p>所有的必填字段都已经有相应的值，按道理说应该能运行了。</p>
<p>我就导出 users 表 ，用原有数据和新插入的数据进行对比，发现新插入的数据比旧数据唯一哦的差别在于一个值 <code>start_date_active</code>，生效时间的字段。此字段非必填，但是程序里做了控制，登录时系统要判断账号是否生效，没有生效日期就不能使用。在系统界面里新建是账号的时候默认是 新建当日，而刚刚SQL操作的时候被忽略了。</p>
<p>查找出今日操作的数据，更新生效日期：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">update</span> saaf_users</div><div class="line"><span class="keyword">set</span> start_date_active = <span class="keyword">to_date</span>(<span class="string">'14-6月-6'</span>,<span class="string">'dd-mon-rr'</span>)</div><div class="line"><span class="keyword">where</span> creation_date = <span class="keyword">to_date</span>(<span class="string">'14-6月-6'</span>,<span class="string">'dd-mon-rr'</span>)</div></pre></td></tr></table></figure>
<p>完成</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170605.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;Title&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="SQL" scheme="http://laker.me/blog/categories/SQL/"/>
    
    
      <category term="SQL" scheme="http://laker.me/blog/tags/SQL/"/>
    
      <category term="Oracle" scheme="http://laker.me/blog/tags/Oracle/"/>
    
  </entry>
  
  <entry>
    <title>Ionic+Angular 开发移动应用七：打包APK文件</title>
    <link href="http://laker.me/blog/2017/06/04/17_0604_ionic_7/"/>
    <id>http://laker.me/blog/2017/06/04/17_0604_ionic_7/</id>
    <published>2017-06-04T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170604.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="打包APK文件"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170604.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="打包正式版安卓apk"></p>
<h2 id="打包正式apk："><a href="#打包正式apk：" class="headerlink" title="打包正式apk："></a>打包正式apk：</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ionic build android -—<span class="built_in">release</span></div><div class="line"><span class="comment">// 不带 —-release 就是测试包</span></div></pre></td></tr></table></figure>
<p>然后会根据<code>config.xml</code>配置生成apk，在<code>root/platforms/android/build/ouputs/apk</code> 里生成<code>android-release-unsigned.apk</code>，这个是未生成签名的apk</p>
<h2 id="生成证书"><a href="#生成证书" class="headerlink" title="生成证书"></a>生成证书</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">keytool -genkey -<span class="built_in">alias</span> <span class="built_in">demo</span>.keystore -keyalg RSA -validity <span class="number">40000</span> -keystore <span class="built_in">demo</span>.keystore</div></pre></td></tr></table></figure>
<p>把demo换成你想要的名字</p>
<p>然后设置密码、回答一系列问题</p>
<blockquote>
<p>注意：此demo.keystore证书要保留好，是app打包的唯一凭证，再生成就相当于另一个app</p>
</blockquote>
<h2 id="签名"><a href="#签名" class="headerlink" title="签名"></a>签名</h2><p>官网上的命令我运行了报错，经过查找资料用了这个命令：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jarsigner -verbose -keystore demo<span class="selector-class">.keystore</span> -signedjar demo_signed<span class="selector-class">.apk</span> android-release-unsigned<span class="selector-class">.apk</span> demo.keystore</div></pre></td></tr></table></figure></p>
<p>替换以下内容</p>
<ul>
<li>demo.keystore：之前生成的keystore</li>
<li>demo_signed.apk：自定义签名后的apk的名字</li>
<li>android-release-unsigned.apk：之前build生成的文件</li>
</ul>
<p>运行结果：<br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">  ....</div><div class="line">  signing: res/xml/config.xml</div><div class="line">  signing: res/xml/provider_paths.xml</div><div class="line">  signing: resources.arsc</div><div class="line">jar <span class="built_in">signed</span>.</div><div class="line"></div><div class="line"><span class="literal">Warning</span>: </div><div class="line">No -tsa <span class="keyword">or</span> -tsacert <span class="keyword">is</span> provided <span class="keyword">and</span> this jar <span class="keyword">is</span> <span class="keyword">not</span> timestamped. Without a timestamp, users may <span class="keyword">not</span> be able <span class="keyword">to</span> validate this jar <span class="keyword">after</span> the signer certificate<span class="symbol">'s</span> expiration date (<span class="number">2126</span>-<span class="number">09</span>-<span class="number">10</span>) <span class="keyword">or</span> <span class="keyword">after</span> any future revocation date.</div></pre></td></tr></table></figure></p>
<p>最后的报错是说没有提供时间戳，不影响。此时已经生成一个签名的apk，可以在手机上安装运行。</p>
<h3 id="常见报错："><a href="#常见报错：" class="headerlink" title="常见报错："></a>常见报错：</h3><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Jar signer, Unable <span class="keyword">to</span> <span class="keyword">open</span> xxx.apk</div></pre></td></tr></table></figure>
<p>keystore和未签名的apk不在一个路径，可以把他们剪切到一个目录下，或者在命令里指明路径，如:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jarsigner -verbose -keystore path/demo<span class="selector-class">.keystore</span> -signedjar path/demo_signed<span class="selector-class">.apk</span> android-release-unsigned<span class="selector-class">.apk</span> demo.keystore</div></pre></td></tr></table></figure>
<h2 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h2><p>安装zipalign<br><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></div></pre></td></tr></table></figure></p>
<p>运行<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">zipalign</span> <span class="selector-tag">-v</span> 4 <span class="selector-tag">demo_signed</span><span class="selector-class">.apk</span> <span class="selector-tag">final</span><span class="selector-class">.apk</span></div></pre></td></tr></table></figure></p>
<p>final.apk即最终编译出来的带签名的app，可用于正式发布<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-<span class="ruby">c     Check alignment only (does <span class="keyword">not</span> modify file)</span></div><div class="line">-<span class="ruby">f     Overwrite existing outfile.zip</span></div><div class="line">-<span class="ruby">p     Page align stored shared object files</span></div><div class="line">-<span class="ruby">v     Verbose output</span></div><div class="line">-<span class="ruby">z     Recompress using Zopfli</span></div></pre></td></tr></table></figure></p>
<p>卸载<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># 普通卸载</span></div><div class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">remove</span>  zipalign</div><div class="line"><span class="meta"># 把相关依赖也卸载</span></div><div class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">remove</span> --auto-<span class="keyword">remove</span> zipalign</div><div class="line"><span class="meta"># 把配置和数据也删除</span></div><div class="line">sudo apt-<span class="keyword">get</span> purge zipalign</div><div class="line"><span class="meta"># 把相关依赖、配置、数据卸载</span></div><div class="line">sudo apt-<span class="keyword">get</span> purge --auto-<span class="keyword">remove</span> zipalign</div></pre></td></tr></table></figure></p>
<h2 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h2><p>直接将final.apk(可以修改文件名)发布于服务器或第三方平台即可</p>
<p><a href="http://ionicframework.com/docs/guide/publishing.html" target="_blank" rel="external">参考1</a>， <a href="http://rasyid.net/2015/10/02/step-by-step-guide-create-apk-for-your-ionic-framework-project/" target="_blank" rel="external">参考2</a>， <a href="https://gist.github.com/leommoore/b441473ce4fb1a8cee97" target="_blank" rel="external">参考3</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170604.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;打包APK文件&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://laker.me/blog/categories/Angular/"/>
    
    
      <category term="Angular" scheme="http://laker.me/blog/tags/Angular/"/>
    
      <category term="Ionic" scheme="http://laker.me/blog/tags/Ionic/"/>
    
  </entry>
  
  <entry>
    <title>Ionic+Angular 开发移动应用六：第三方、数据交互、修改图标</title>
    <link href="http://laker.me/blog/2017/05/24/17_0524_ionic_6/"/>
    <id>http://laker.me/blog/2017/05/24/17_0524_ionic_6/</id>
    <published>2017-05-24T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170524.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="第三方登陆/分享/支付、数据交互、修改图标"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<h1 id="第三方登陆、分享、支付"><a href="#第三方登陆、分享、支付" class="headerlink" title="第三方登陆、分享、支付"></a>第三方登陆、分享、支付</h1><h2 id="QQ登陆与分享"><a href="#QQ登陆与分享" class="headerlink" title="QQ登陆与分享"></a>QQ登陆与分享</h2><p>插件地址: <code>https://github.com/iVanPan/Cordova_QQ</code><br>安装: </p>
<pre><code>cordova plugin add https://github.com/iVanPan/Cordova_QQ.git --variable QQ_APP_ID=YOUR_QQ_APPID
</code></pre><h2 id="微信登陆、分享、支付"><a href="#微信登陆、分享、支付" class="headerlink" title="微信登陆、分享、支付"></a>微信登陆、分享、支付</h2><p>插件地址: <code>https://github.com/xu-li/cordova-plugin-wechat</code><br>安装: </p>
<pre><code>cordova plugin add cordova-plugin-wechat --variable wechatappid=YOUR_WECHAT_APPID
</code></pre><h2 id="新浪微博登陆与分享"><a href="#新浪微博登陆与分享" class="headerlink" title="新浪微博登陆与分享"></a>新浪微博登陆与分享</h2><p>插件地址: <code>https://github.com/iVanPan/cordova_weibo</code><br>安装: </p>
<pre><code>cordova plugin add https://github.com/iVanPan/cordova_weibo.git --variable WEIBO_APP_ID=YOUR_WEIBO_APPID
</code></pre><h2 id="支付宝支付"><a href="#支付宝支付" class="headerlink" title="支付宝支付"></a>支付宝支付</h2><p>插件地址: <code>https://github.com/charleyw/cordova-plugin-alipay</code><br>安装: </p>
<pre><code>cordova plugin add https://github.com/charleyw/cordova-plugin-alipay.git --variable PARTNER_ID=[你的商户PID可以在账户中查询] --variable SELLER_ACCOUNT=[你的商户支付宝帐号] --variable PRIVATE_KEY=[你生成的private key]
</code></pre><h1 id="Ionic前后台数据交互"><a href="#Ionic前后台数据交互" class="headerlink" title="Ionic前后台数据交互"></a>Ionic前后台数据交互</h1><p>前台发起请求：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">$http(&#123;</div><div class="line">  url:’’,</div><div class="line">  method：’post’,<span class="comment">//get</span></div><div class="line">  data: &#123;&#125;,<span class="comment">//传给服务器的参数</span></div><div class="line">  success:<span class="function"><span class="keyword">function</span><span class="params">(res)</span></span>&#123;</div><div class="line">       <span class="comment">//服务器返回的数据 json格式</span></div><div class="line">       <span class="comment">//res即是返回的json对象</span></div><div class="line">       <span class="comment">//成功返回的数据处理逻辑写这里</span></div><div class="line">  &#125;,</div><div class="line">  error:<span class="function"><span class="keyword">function</span><span class="params">(err)</span></span>&#123;</div><div class="line">      <span class="comment">//异常</span></div><div class="line">  &#125;，</div><div class="line">  timeout: <span class="number">20000</span><span class="comment">//请求超时设置</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h1 id="App图标修改"><a href="#App图标修改" class="headerlink" title="App图标修改"></a>App图标修改</h1><ol>
<li>进入resources目录，替换icon.png,splash.png</li>
<li>命令行输入： ionic resources （执行后会上传图片到服务器并自动裁切生成不同尺寸的图片）</li>
</ol>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ionic resource —<span class="attribute">icon</span>   <span class="comment">// 自动生成icon</span></div><div class="line">ionic resource —splash    <span class="comment">// 自动生成splash</span></div></pre></td></tr></table></figure>
<p>3.app名字修改：修改根目录下config.xml里的name的值即可</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170524.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;第三方登陆/分享/支付、数据交互、修改图标&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://laker.me/blog/categories/Angular/"/>
    
    
      <category term="Angular" scheme="http://laker.me/blog/tags/Angular/"/>
    
      <category term="Ionic" scheme="http://laker.me/blog/tags/Ionic/"/>
    
  </entry>
  
  <entry>
    <title>Ionic+Angular 开发移动应用五：利用Cordova调用设备功能</title>
    <link href="http://laker.me/blog/2017/05/18/17_0518_ionic_5/"/>
    <id>http://laker.me/blog/2017/05/18/17_0518_ionic_5/</id>
    <published>2017-05-18T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170518.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="利用Cordova调用设备功能"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<p>Cordova提供了一组设备相关的API，通过这组API，移动应用能够以JavaScript访问原生的设备功能，如摄像头、麦克风等。</p>
<p>Cordova还提供了一组统一的JavaScript类库，以及为这些类库所用的设备相关的原生后台代码。</p>
<p>ngCordova 是基于Cordova的angular插件。</p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>文档： <a href="http://ngcordova.com/docs/plugins" target="_blank" rel="external">http://ngcordova.com/docs/plugins</a></p>
<p>安装ngCordova：</p>
<pre><code>bower install ngCordova --save
cordova plugin add cordova-plugin-camera
</code></pre><blockquote>
<p>gulp及其插件使用–save-dev，源代码里依赖的如jquery使用–save</p>
</blockquote>
<p>就在 www/lib 下安装完成。</p>
<p>在<code>index.html</code>里引入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/ngCordova/dist/ng-cordova-min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="ngCordova-插件常用功能"><a href="#ngCordova-插件常用功能" class="headerlink" title="ngCordova 插件常用功能"></a>ngCordova 插件常用功能</h2><h3 id="二维码扫描"><a href="#二维码扫描" class="headerlink" title="二维码扫描"></a>二维码扫描</h3><p><strong>安装：</strong></p>
<p>cordova plugin add <a href="https://github.com/phonegap/phonegap-plugin-barcodescanner.git" target="_blank" rel="external">https://github.com/phonegap/phonegap-plugin-barcodescanner.git</a></p>
<p><strong>对象：</strong></p>
<p>$cordovaBarcodeScanner</p>
<p><strong>方法：</strong></p>
<ul>
<li>can( )</li>
<li>encode( type, text )</li>
</ul>
<h3 id="调用摄像头"><a href="#调用摄像头" class="headerlink" title="调用摄像头"></a>调用摄像头</h3><p><strong>安装：</strong></p>
<p>cordova plugin add cordova-plugin-camera</p>
<p><strong>对象：</strong></p>
<p>$cordovaCamera</p>
<p><strong>方法:</strong></p>
<ul>
<li>getPicture( options )</li>
</ul>
<h3 id="获取设备信息"><a href="#获取设备信息" class="headerlink" title="获取设备信息"></a>获取设备信息</h3><p><strong>安装：</strong></p>
<p>cordova plugin add cordova-plugin-device</p>
<p><strong>对象：</strong></p>
<p>$cordovaDevice</p>
<p><strong>方法:</strong></p>
<ul>
<li>getDevice(  )</li>
<li>getCordova(  )</li>
<li>getModel(  )</li>
<li>getPlatform(  )</li>
<li>getUUID(  )</li>
<li>getVersion(  )</li>
</ul>
<h3 id="获取地理位置"><a href="#获取地理位置" class="headerlink" title="获取地理位置"></a>获取地理位置</h3><p>安装: cordova plugin add cordova-plugin-geolocation</p>
<p><strong>对象：</strong></p>
<p>$cordovaGeolocation</p>
<p><strong>方法:</strong></p>
<ul>
<li>getCurrentPosition( options )</li>
<li>watchPosition( options )</li>
<li>clearWatch( watchID )</li>
</ul>
<h3 id="检查网络连接"><a href="#检查网络连接" class="headerlink" title="检查网络连接"></a>检查网络连接</h3><p><strong>安装：</strong></p>
<p>cordova plugin add cordova-plugin-network-information</p>
<p><strong>对象：</strong></p>
<p>$cordovaNetwork</p>
<p><strong>方法:</strong></p>
<ul>
<li>getNetwork(  )</li>
<li>isOnline(  )</li>
<li>isOffline(  )</li>
<li>$rootScope.$on( ‘$cordovaNetwork:online’, function( event, networkState ){} )</li>
<li>$rootScope.$on( ‘$cordovaNetwork:offline’, function( event, networkState ){} )</li>
<li>clearOnlineWatch(  )</li>
<li>clearOfflineWatch(  )</li>
</ul>
<h3 id="系统提示信息"><a href="#系统提示信息" class="headerlink" title="系统提示信息"></a>系统提示信息</h3><p><strong>安装：</strong></p>
<p>cordova plugin add <a href="https://github.com/EddyVerbruggen/Toast-PhoneGap-Plugin.git" target="_blank" rel="external">https://github.com/EddyVerbruggen/Toast-PhoneGap-Plugin.git</a></p>
<p><strong>对象：</strong></p>
<p>$cordovaToast</p>
<p><strong>方法:</strong></p>
<ul>
<li>show( message, duration, position )</li>
<li>showShortTop( message )</li>
<li>showShortCenter( message )</li>
<li>showShortBottom( message )</li>
<li>showLongTop( message )</li>
<li>showLongCenter( message )</li>
<li>showLongBottom( message )</li>
<li>showWithOptions( options )</li>
</ul>
<h3 id="进度显示"><a href="#进度显示" class="headerlink" title="进度显示"></a>进度显示</h3><p><strong>安装：</strong></p>
<p>cordova plugin add <a href="https://github.com/pbernasconi/cordova-progressIndicator.git" target="_blank" rel="external">https://github.com/pbernasconi/cordova-progressIndicator.git</a></p>
<p><strong>对象：</strong></p>
<p>$cordovaProgress</p>
<p><strong>方法:</strong></p>
<ul>
<li>$cordovaProgress.showSimple( true ) // requires .hide(  )</li>
<li>$cordovaProgress.hide(  )</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170518.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;利用Cordova调用设备功能&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://laker.me/blog/categories/Angular/"/>
    
    
      <category term="Angular" scheme="http://laker.me/blog/tags/Angular/"/>
    
      <category term="Ionic" scheme="http://laker.me/blog/tags/Ionic/"/>
    
  </entry>
  
  <entry>
    <title>Ionic+Angular 开发移动应用四：图片轮播</title>
    <link href="http://laker.me/blog/2017/05/15/17_0515_ionic_4/"/>
    <id>http://laker.me/blog/2017/05/15/17_0515_ionic_4/</id>
    <published>2017-05-15T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170515.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="图片轮播"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<p>template文件夹新建<code>slider.html</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ion-view</span> <span class="attr">view-title</span>=<span class="string">"图片轮播"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ion-content</span> <span class="attr">class</span>=<span class="string">"padding"</span> <span class="attr">scroll</span>=<span class="string">"false"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ion-slides</span> <span class="attr">class</span>=<span class="string">"slider-box"</span>  <span class="attr">options</span>=<span class="string">"options"</span> <span class="attr">slider</span>=<span class="string">"data.slider"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ion-slide-page</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box blue"</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>BLUE<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">ion-slide-page</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ion-slide-page</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box yellow"</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>YELLOW<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">ion-slide-page</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ion-slide-page</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box pink"</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>PINK<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">ion-slide-page</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ion-slides</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">ion-content</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ion-view</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>style.css</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.slider-box</span> &#123;</div><div class="line">	<span class="attribute">height</span>: <span class="number">300px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.slider-box</span> <span class="selector-class">.box</span> &#123;</div><div class="line">	<span class="attribute">width</span>: <span class="number">100%</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.yellow</span> &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#FFF68F</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.blue</span> &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#1E90FF</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.pink</span> &#123;</div><div class="line">	<span class="attribute">background</span>: <span class="number">#FF6A6A</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>app.js</code>:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.state</span>(<span class="string">'slider'</span>, &#123;</div><div class="line">  <span class="attribute">url</span>: <span class="string">'/slider'</span>,</div><div class="line">  <span class="attribute">views</span>: &#123;</div><div class="line">    <span class="string">''</span>: &#123;</div><div class="line">      <span class="attribute">templateUrl</span>: <span class="string">'templates/slider.html'</span>,</div><div class="line">      <span class="attribute">controller</span>: <span class="string">'SliderCtrl'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><code>controller.js</code>:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.controller(<span class="string">'SliderCtrl'</span>, <span class="function"><span class="keyword">function</span><span class="params">($scope)</span> </span>&#123;</div><div class="line">  $scope.settings = &#123;</div><div class="line">    enableFriends: <span class="keyword">true</span></div><div class="line">  &#125;;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170304174730.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="demo"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170515.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;图片轮播&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://laker.me/blog/categories/Angular/"/>
    
    
      <category term="Angular" scheme="http://laker.me/blog/tags/Angular/"/>
    
      <category term="Ionic" scheme="http://laker.me/blog/tags/Ionic/"/>
    
  </entry>
  
  <entry>
    <title>Ionic+Angular 开发移动应用三：路由</title>
    <link href="http://laker.me/blog/2017/04/30/17_0510_ionic_3/"/>
    <id>http://laker.me/blog/2017/04/30/17_0510_ionic_3/</id>
    <published>2017-04-30T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<hr>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170510.jpg?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="Ionic+Angular 开发移动应用三"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<hr>
<p>接下来我会在ubuntu里开发，windows大同小异。</p>
<p>ionic模板已经建好一系列依赖，比如scss的编译，自动检测文件变化并刷新浏览器等。</p>
<h2 id="做一个页面"><a href="#做一个页面" class="headerlink" title="做一个页面"></a>做一个页面</h2><p>在文件夹www/template下新建文件<code>page.html</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ion-view</span> <span class="attr">view-title</span>=<span class="string">"First Page"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ion-content</span> <span class="attr">class</span>=<span class="string">"padding"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">ion-content</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ion-view</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>ion-content标签在又头部导航是，记得加 class=”padding”，不然就被导航遮住一部分</p>
</blockquote>
<p><code>app.js</code> 添加路由：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.state</span>(<span class="string">'page'</span>, &#123;</div><div class="line"><span class="attribute">url</span>: <span class="string">'/page'</span>, <span class="comment">// 定义的跳转页面</span></div><div class="line"><span class="attribute">views</span>: &#123;</div><div class="line">  <span class="string">''</span>: &#123; <span class="comment">// 留空</span></div><div class="line">    <span class="attribute">templateUrl</span>: <span class="string">'templates/page.html'</span>, <span class="comment">//页面地址</span></div><div class="line">    <span class="attribute">controller</span>: <span class="string">'PageCtrl'</span> <span class="comment">//控制器名，在下面的配置要用</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><code>controller.js</code> 添加控制器：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.controller(<span class="string">'PageCtrl'</span>, <span class="function"><span class="keyword">function</span><span class="params">($scope)</span> </span>&#123;</div><div class="line">  <span class="comment">// PageCtrl 是在app.js里面定义的控制器名</span></div><div class="line">  $scope.settings = &#123;</div><div class="line">    enableFriends: <span class="keyword">true</span></div><div class="line">  &#125;;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>terminal运行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> ionic serve</span></div></pre></td></tr></table></figure>
<p>浏览器自动打开首页<code>http://10.0.2.15:8100/#/tab/dash</code>，把<code>tab/dash</code>改成<code>page</code>，就可以访问我们刚刚写的页面<code>http://10.0.2.15:8100/#/page</code></p>
<blockquote>
<p>注意，不要漏掉 <code>/#</code></p>
</blockquote>
<p>在chrome里进入开发者模式，点击进入移动开发模式，可以看到效果。</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170304154039.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="开发者模式"></p>
<h2 id="看一下范例中tabs的运用"><a href="#看一下范例中tabs的运用" class="headerlink" title="看一下范例中tabs的运用"></a>看一下范例中tabs的运用</h2><p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170304155314.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="tabs"></p>
<p><code>tab.html</code> 里定义了底部tabs，比如其中一个tab：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;ion-<span class="literal">tab</span> title=<span class="string">"Status"</span> icon-off=<span class="string">"ion-ios-pulse"</span> icon-<span class="keyword">on</span>=<span class="string">"ion-ios-pulse-strong"</span> href=<span class="string">"#/tab/dash"</span>&gt;</div><div class="line">    &lt;ion-nav-view <span class="built_in">name</span>=<span class="string">"tab-dash"</span>&gt;&lt;/ion-nav-view&gt;</div><div class="line">&lt;/ion-<span class="literal">tab</span>&gt;</div></pre></td></tr></table></figure>
<ul>
<li>title： 标签的文字</li>
<li>icon-off：标签不激活状态的icon</li>
<li>icon-on： 标签激活状态的icon</li>
<li>href=”#/tab/dash”： tab页地址</li>
</ul>
<p><code>app.js</code>看下dash页面的路由配置，注意与我们单页面page不同之处</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//tab</span></div><div class="line"><span class="selector-class">.state</span>(<span class="string">'tab'</span>, &#123;</div><div class="line">	<span class="attribute">url</span>: <span class="string">'/tab'</span>,</div><div class="line">	<span class="attribute">abstract</span>: true,</div><div class="line">	<span class="attribute">templateUrl</span>: <span class="string">'templates/tabs.html'</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// tab.dash</span></div><div class="line"><span class="selector-class">.state</span>(<span class="string">'tab.dash'</span>, &#123; <span class="comment">//注意，这里是tab.dash</span></div><div class="line">	<span class="attribute">url</span>: <span class="string">'/dash'</span>,</div><div class="line">	<span class="attribute">views</span>: &#123;</div><div class="line">	   <span class="comment">// html里面的name &lt;ion-nav-view name="tab-dash"&gt;</span></div><div class="line">	   <span class="comment">// 刚刚我们做page页的时候留空</span></div><div class="line">	  <span class="string">'tab-dash'</span>: &#123;</div><div class="line">	    <span class="attribute">templateUrl</span>: <span class="string">'templates/tab-dash.html'</span>,</div><div class="line">	    <span class="attribute">controller</span>: <span class="string">'DashCtrl'</span></div><div class="line">	  &#125;</div><div class="line">	&#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="新建一个tab"><a href="#新建一个tab" class="headerlink" title="新建一个tab"></a>新建一个tab</h2><p>在 <a href="http://ionicons.com" target="_blank" rel="external">http://ionicons.com</a> 可以找到更多icons。</p>
<p><code>tab.html</code> 添加：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;ion-<span class="literal">tab</span> title=<span class="string">"More"</span> icon-off=<span class="string">"ion-social-angular-outline"</span> icon-<span class="keyword">on</span>=<span class="string">"ion-social-angular"</span> href=<span class="string">"#/tab/more"</span>&gt;</div><div class="line">    &lt;ion-nav-view <span class="built_in">name</span>=<span class="string">"tab-more"</span>&gt;&lt;/ion-nav-view&gt;</div><div class="line">&lt;/ion-<span class="literal">tab</span>&gt;</div></pre></td></tr></table></figure>
<p><code>app.js</code>：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.state</span>(<span class="string">'tab.more'</span>, &#123;</div><div class="line">  <span class="attribute">url</span>: <span class="string">'/more'</span>,</div><div class="line">  <span class="attribute">views</span>: &#123;</div><div class="line">    <span class="string">'tab-more'</span>: &#123;</div><div class="line">      <span class="attribute">templateUrl</span>: <span class="string">'templates/tab-more.html'</span>,</div><div class="line">      <span class="attribute">controller</span>: <span class="string">'MoreCtrl'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p><code>controller.js</code>：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.controller(<span class="string">'MoreCtrl'</span>, <span class="function"><span class="keyword">function</span><span class="params">($scope)</span> </span>&#123;</div><div class="line">  $scope.settings = &#123;</div><div class="line">    enableFriends: <span class="keyword">true</span></div><div class="line">  &#125;;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170510.jpg?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;Ionic+Angular 开发移动应用三&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://laker.me/blog/categories/Angular/"/>
    
    
      <category term="Angular" scheme="http://laker.me/blog/tags/Angular/"/>
    
      <category term="Ionic" scheme="http://laker.me/blog/tags/Ionic/"/>
    
  </entry>
  
  <entry>
    <title>Ionic+Angular 开发移动应用二：运行、打包</title>
    <link href="http://laker.me/blog/2017/04/30/17_0430_ionic_2/"/>
    <id>http://laker.me/blog/2017/04/30/17_0430_ionic_2/</id>
    <published>2017-04-30T00:24:00.000Z</published>
    <updated>2017-04-30T09:49:06.000Z</updated>
    
    <content type="html"><![CDATA[<hr>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170421.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="Ionic+Angular 开发移动应用二"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<hr>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> ionic start 项目名 tabs [or blank, or sidemenu 三种模板]</span></div><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> 项目名</span></div></pre></td></tr></table></figure>
<blockquote>
<p>tabs是Ionic的默认模板名，即使不输入tabs，创建的App仍然是基于tabs的项目。</p>
</blockquote>
<table>
<thead>
<tr>
<th>文件</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bower.json</td>
<td>Bower的配置文件</td>
</tr>
<tr>
<td>config.xml</td>
<td>配置文件，设置一些如项目名，项目图标，在不同系统中（ios、android……）不同的配置等等</td>
</tr>
<tr>
<td>gulpfile.js</td>
<td>gulp的配置</td>
</tr>
<tr>
<td>hooks</td>
<td></td>
</tr>
<tr>
<td>ionic.project</td>
<td></td>
</tr>
<tr>
<td>package.json</td>
<td>项目信息、依赖的工具等等</td>
</tr>
<tr>
<td>platforms</td>
<td>不同平台的不同编译，在mac系统中会自动生成ios平台目录</td>
</tr>
<tr>
<td>plugins</td>
<td>添加的插件</td>
</tr>
<tr>
<td>scss</td>
<td>scss文件</td>
</tr>
<tr>
<td>www</td>
<td>主开发目录，html/css/js/img等</td>
</tr>
</tbody>
</table>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ionic serve // <span class="keyword">Run</span><span class="bash"> your app <span class="keyword">in</span> the browser (great <span class="keyword">for</span> initial development):</span></div></pre></td></tr></table></figure>
<p>或者<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ionic <span class="built_in">run</span> android [ <span class="keyword">or</span> ios,<span class="keyword">or</span> browser] <span class="comment">// 运行ios需要依赖 npm install ios-deploy ios-sim -g</span></div></pre></td></tr></table></figure></p>
<h2 id="创建Android应用环境"><a href="#创建Android应用环境" class="headerlink" title="创建Android应用环境"></a>创建Android应用环境</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> myApp</span></div><div class="line"><span class="meta">$</span><span class="bash"> ionic platform add android</span></div><div class="line"><span class="meta">$</span><span class="bash"> ionic build android</span></div><div class="line"><span class="meta">$</span><span class="bash"> ionic <span class="built_in">emulate</span> android</span></div></pre></td></tr></table></figure>
<p>ubuntu build apk:</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170303171421.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="ubuntu build apk"></p>
<p>win7 build apk:</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170303190247.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="win7 build apk"></p>
<h2 id="创建iOS应用"><a href="#创建iOS应用" class="headerlink" title="创建iOS应用"></a>创建iOS应用</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> myApp</span></div><div class="line"><span class="meta">$</span><span class="bash"> ionic platform add ios</span></div><div class="line"><span class="meta">$</span><span class="bash"> ionic build ios</span></div><div class="line"><span class="meta">$</span><span class="bash"> ionic <span class="built_in">emulate</span> ios</span></div></pre></td></tr></table></figure>
<blockquote>
<p>如果出现”ios-sim was not found.”错误，可以执行以下命令：<br>npm install -g ios-sim</p>
</blockquote>
<h2 id="www-目录"><a href="#www-目录" class="headerlink" title="www 目录"></a>www 目录</h2><h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><p>ionic.bundle.js 文件已经包含了 Ionic核心JS、AngularJS、Ionic的AngularJS扩展，如果你需要引入其他 Angular 模块，可以从 lib/js/angular 目录中调用。</p>
<p>cordova.js 是在使用 Cordova/PhoneGap 创建应用时生成的，不需要手动引入，你可以在 Cordova/PhoneGap 项目中找到该文件，所以在开发过程中显示 404 是正常的。</p>
]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170421.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;Ionic+Angular 开发移动应用二&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://laker.me/blog/categories/Angular/"/>
    
    
      <category term="Angular" scheme="http://laker.me/blog/tags/Angular/"/>
    
      <category term="Ionic" scheme="http://laker.me/blog/tags/Ionic/"/>
    
  </entry>
  
  <entry>
    <title>Ionic+Angular 开发移动应用一：环境搭建</title>
    <link href="http://laker.me/blog/2017/04/12/17_0412_ionic_1/"/>
    <id>http://laker.me/blog/2017/04/12/17_0412_ionic_1/</id>
    <published>2017-04-12T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170412.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="环境搭建"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><a href="http://ionicframework.com" target="_blank" rel="external">ionic</a> 是一个强大的 HTML5 应用程序开发框架(HTML5 Hybrid Mobile App Framework )。 可以帮助您使用 Web 技术，比如 HTML、CSS 和 Javascript 构建接近原生体验的移动应用程序。<br>ionic 主要关注外观和体验，以及和你的应用程序的 UI 交互，特别适合用于基于 Hybird 模式的 HTML5 移动应用程序开发。</p>
<h2 id="ionic-特点"><a href="#ionic-特点" class="headerlink" title="ionic 特点"></a>ionic 特点</h2><ul>
<li>ionic 基于Angular语法，简单易学。</li>
<li>ionic 是一个轻量级框架。</li>
<li>ionic 提供了适合移动APP的UI设计</li>
<li>ionic 性能优越，运行速度快。</li>
</ul>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>在有点windows、linux安装环境的经验和已配好一部分环境的情况下，这次环境安装还是耗费了一天，现在前端开发真是越来越多准备工作，安装一次就再也不想动了。</p>
<p>本文讲叙述在win7和ubuntu下的配置过程。</p>
<h3 id="安装ionic"><a href="#安装ionic" class="headerlink" title="安装ionic"></a>安装ionic</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> npm install -g</span></div><div class="line"><span class="meta">$</span><span class="bash"> ionic info</span></div></pre></td></tr></table></figure>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">***</span>*</div><div class="line"> Dependency warning - for the CLI to run correctly,</div><div class="line"> it is highly recommended to install/upgrade the following:</div><div class="line"></div><div class="line"> Please install your Cordova CLI to version  &gt;=4.2.0 <span class="code">`npm install -g cordova`</span></div><div class="line"></div><div class="line"><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">***</span>*</div><div class="line"></div><div class="line">Your system information:</div><div class="line"></div><div class="line"> You have been opted out of telemetry. To change this, run: cordova telemetry on.</div><div class="line">6.5.0</div><div class="line"></div><div class="line">Ionic CLI Version: 2.2.1</div><div class="line">Ionic App Lib Version: 2.2.0</div><div class="line">ios-deploy version: Not installed //mac下再装 npm install ios-deploy -g</div><div class="line">ios-sim version: Not installed  //mac下再装 npm install ios-sim -g</div><div class="line">OS: Windows 7</div><div class="line">Node Version: v7.6.0</div><div class="line">Xcode version: Not installed</div><div class="line"></div><div class="line"></div><div class="line"><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">***</span>*</div><div class="line"> Dependency warning - for the CLI to run correctly,</div><div class="line"> it is highly recommended to install/upgrade the following:</div><div class="line"></div><div class="line"> Please install your Cordova CLI to version  &gt;=4.2.0 <span class="code">`npm install -g cordova`</span></div><div class="line"></div><div class="line"><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">***</span>*</div></pre></td></tr></table></figure>
<h2 id="cordova"><a href="#cordova" class="headerlink" title="cordova"></a>cordova</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="keyword">install</span> -g  cordova</div><div class="line">$ cordova -v  // 必须运行一下，待会会问是否匿名跟踪日志，必须回答才能生效</div><div class="line">? May Cordova anonymously report <span class="keyword">usage</span> <span class="keyword">statistics</span> <span class="keyword">to</span> improve the tool <span class="keyword">over</span> <span class="keyword">time</span>? (t/n)</div></pre></td></tr></table></figure>
<h2 id="安卓SDK"><a href="#安卓SDK" class="headerlink" title="安卓SDK"></a>安卓SDK</h2><p>为了打包成安卓APP</p>
<p>下载地址: <a href="http://tools.android-studio.org/index.php/sdk" target="_blank" rel="external">http://tools.android-studio.org/index.php/sdk</a><br>备用下载: <a href="http://pan.baidu.com/s/1bYhyai" target="_blank" rel="external">http://pan.baidu.com/s/1bYhyai</a> 密码: m3rg</p>
<h3 id="windows："><a href="#windows：" class="headerlink" title="windows："></a>windows：</h3><p>先下载java jdk安装 java 环境，<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="external">1.8以上版本</a>，添加java环境变量：</p>
<ul>
<li>系统变量添加（不是“Administrator的用户变量”）：</li>
</ul>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">JAVA_HOME=<span class="symbol">C:</span>\Program Files\Java\jdk1.<span class="number">8.0_121</span></div><div class="line"><span class="comment"># 安装地址，之前有配过其他版本java，直接改这里JAVA_HOME的地址，path就不用管了</span></div><div class="line"></div><div class="line">CLASSPATH=.;%JAVA_HOME%\<span class="class"><span class="keyword">lib</span>\<span class="title">dt</span>.<span class="title">jar</span>;</span>%JAVA_HOME%\<span class="class"><span class="keyword">lib</span>\<span class="title">tools</span>.<span class="title">jar</span>;</span></div><div class="line"><span class="comment"># %JAVA_HOME% 前面有个 .;</span></div></pre></td></tr></table></figure>
<ul>
<li>PATH添加：</li>
</ul>
<figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">%JAVA_HOME%</span><span class="symbol">\b</span>in;<span class="variable">%JAVA_HOME%</span><span class="symbol">\j</span>re<span class="symbol">\b</span>in;</div></pre></td></tr></table></figure>
<p>解压android-sdk压缩包，放到一个空间较大的磁盘，找到SDK Manager更新SDK Manager，安装默认选择的13个包，再点击每个包变成打钩状态，再install。安装很久，有十几G。</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170303114620.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="windows"></p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170303144939.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="windows"></p>
<p>添加环境变量：</p>
<ul>
<li>系统变量添加（不是“Administrator的用户变量”）：</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ANDROID_HOME=<span class="string">C:</span>\android-sdk-windows <span class="comment">// 压缩包解压地址</span></div></pre></td></tr></table></figure>
<ul>
<li>PATH添加：</li>
</ul>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools;</div></pre></td></tr></table></figure>
<p>tools目录运行android命令,platform-tools目录运行adb命令</p>
<h3 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h3><p>参考 <a href="https://gist.github.com/wenzhixin/43cf3ce909c24948c6e7" target="_blank" rel="external">https://gist.github.com/wenzhixin/43cf3ce909c24948c6e7</a></p>
<p>安装java环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install openjdk-8-jre-headless</span></div><div class="line"><span class="meta">#</span><span class="bash"> $ java -version</span></div><div class="line"><span class="meta">#</span><span class="bash"> 安装andoid-sdk用</span></div><div class="line"><span class="meta"></span></div><div class="line">$<span class="bash"> sudo apt-get install openjdk-8-jdk</span></div><div class="line"><span class="meta">#</span><span class="bash"> javac -version</span></div><div class="line"><span class="meta">#</span><span class="bash"> 打包android应用用</span></div></pre></td></tr></table></figure>
<p>解压安卓SDK压缩包，进入tools文件，运行（要安装很久）：</p>
<pre><code>android update sdk --no-ui
</code></pre><p>添加环境变量，命令行输入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> vi ~/.bashrc</span></div></pre></td></tr></table></figure>
<blockquote>
<p>vim命令: crtl+end-到底部，i-输入，ESC-退出输入，:x -保存退出，:q! -不保存退出vim， :w. -保存文档，但不退出vim</p>
</blockquote>
<p>添加：<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># andoid</span></div><div class="line">export ANDROID_HOME=<span class="regexp">/home/</span>laker<span class="regexp">/Downloads/</span>android-sdk-linux <span class="comment">#前面压缩包解压地址</span></div><div class="line">export PATH=<span class="variable">$PATH</span>:<span class="variable">$ANDROID_HOME</span><span class="regexp">/tools:$ANDROID_HOME/</span>platform-tools</div></pre></td></tr></table></figure></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> ~/.bashrc</span></div></pre></td></tr></table></figure>
<h2 id="Ionic-Lab"><a href="#Ionic-Lab" class="headerlink" title="Ionic Lab"></a>Ionic Lab</h2><p><a href="http://lab.ionic.io/old.html" target="_blank" rel="external">Ionic Lab</a> 是桌面版的开发环境，如果你不喜欢使用命令行操作，可以用 Ionic Lab 编译，运行，和模拟运行Ionic的应用程序。<br>支持Window、Mac OS X、Linux。已于16年12月停止维护。<br>备用下载： <a href="http://pan.baidu.com/s/1i4GYflV" target="_blank" rel="external">http://pan.baidu.com/s/1i4GYflV</a> 密码: ac14</p>
<h2 id="webstorm激活"><a href="#webstorm激活" class="headerlink" title="webstorm激活"></a>webstorm激活</h2><p>license server 里写<a href="http://idea.iteblog.com/key.php" target="_blank" rel="external">http://idea.iteblog.com/key.php</a></p>
<h2 id="Datagrip-激活"><a href="#Datagrip-激活" class="headerlink" title="Datagrip 激活"></a>Datagrip 激活</h2><p>license server ：<br><a href="http://idea.goxz.gq" target="_blank" rel="external">http://idea.goxz.gq</a><br><a href="http://v2mc.net:1017" target="_blank" rel="external">http://v2mc.net:1017</a><br><a href="http://idea.imsxm.com" target="_blank" rel="external">http://idea.imsxm.com</a><br><a href="http://idea.ibdyr.com" target="_blank" rel="external">http://idea.ibdyr.com</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170412.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;环境搭建&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Angular" scheme="http://laker.me/blog/categories/Angular/"/>
    
    
      <category term="Angular" scheme="http://laker.me/blog/tags/Angular/"/>
    
      <category term="Ionic" scheme="http://laker.me/blog/tags/Ionic/"/>
    
  </entry>
  
  <entry>
    <title>Hexo server not working；Hexo 无法访问页面</title>
    <link href="http://laker.me/blog/2017/03/16/17_0316_hexo_sever/"/>
    <id>http://laker.me/blog/2017/03/16/17_0316_hexo_sever/</id>
    <published>2017-03-16T00:24:00.000Z</published>
    <updated>2017-04-26T15:15:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170316.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="Hexo server not working"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<hr>
<p>If you can run <code>hexo s</code> perfectly, but can’t vist the local page at <code>http://localhost:4000/blog/</code>. May you can try another port like 5000:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ hexo server -p 5000</div><div class="line">INFO  <span class="keyword">Start</span> processing</div><div class="line">INFO  Hexo <span class="keyword">is</span> running <span class="keyword">at</span> <span class="keyword">http</span>://<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">5000</span>/blog/. Press Ctrl+C <span class="keyword">to</span> stop.</div></pre></td></tr></table></figure>
<p>Then visit <code>http://localhost:5000/blog/</code> or <code>http://127.0.0.1:4000/blog/</code>. If it works, congratulations.</p>
<p>You can add this configuration to the file <code>_config.yml</code> at root:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="attr">server:</span></div><div class="line"><span class="attr">  port:</span> <span class="number">5000</span> <span class="comment"># or anohter number</span></div><div class="line"><span class="attr">  log:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  ip:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></div><div class="line"><span class="attr">  compress:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  header:</span> <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>Run, then ok：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ hexo s</div><div class="line">INFO  <span class="keyword">Start</span> processing</div><div class="line">INFO  Hexo <span class="keyword">is</span> running <span class="keyword">at</span> <span class="keyword">http</span>://<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">5000</span>/blog/. Press Ctrl+C <span class="keyword">to</span> stop.</div></pre></td></tr></table></figure></p>
<hr>
<p>早在15年建了这个Hexo的blog，不知从什么时候起，Hexo server 就不能运行了，当时因为样式已经稳定，直接写好文章、编译、就发布了，就没有处理这个问题。最近升级了 Nodejs，有些依赖报错，只能从新安装。又由于代码库出现问题，发布的 blog 布局出错，要调整样式必须在本地调。</p>
<p>我重新 init 了一个 blog，<code>hexo s</code> 能正常运行没有报错，但是无法访问 <code>http://localhost:4000/blog/</code> 。</p>
<p>经过查找资料发现，是因为 4000 端口被福昕阅读器占用，换个端口就好了。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ hexo server -p 5000</div><div class="line">INFO  <span class="keyword">Start</span> processing</div><div class="line">INFO  Hexo <span class="keyword">is</span> running <span class="keyword">at</span> <span class="keyword">http</span>://<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">5000</span>/blog/. Press Ctrl+C <span class="keyword">to</span> stop.</div></pre></td></tr></table></figure>
<p>此时就可以通过 <code>http://localhost:5000/blog/</code> 或 <code>http://127.0.0.1:4000/blog/</code> 访问。</p>
<blockquote>
<p>如果直接复制官网的命令，会报错<br><figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">$</span> hexo s -p <span class="number">5000</span></div><div class="line">bash: <span class="symbol">$</span><span class="string">'\302\226hexo'</span>: command <span class="keyword">not</span> found</div></pre></td></tr></table></figure></p>
<p>因为空格符编码问题，手动输入一遍是没有问题的<br><a href="http://superuser.com/questions/670867/why-do-i-sometimes-get-sh-302-211-command-not-found-in-xterm-sh/1123368#1123368" target="_blank" rel="external">参考</a></p>
</blockquote>
<p>但是以上命令只能一次性使用，下次还会恢复成4000，要在根目录下<code>_config.yml</code>里配置一下：<br><a href="https://github.com/hexojs/hexo-server" target="_blank" rel="external">hexo-server</a><br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="attr">server:</span></div><div class="line"><span class="attr">  port:</span> <span class="number">5000</span></div><div class="line"><span class="attr">  log:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  ip:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></div><div class="line"><span class="attr">  compress:</span> <span class="literal">false</span></div><div class="line"><span class="attr">  header:</span> <span class="literal">true</span></div></pre></td></tr></table></figure></p>
<p>运行即可：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ hexo s</div><div class="line">INFO  <span class="keyword">Start</span> processing</div><div class="line">INFO  Hexo <span class="keyword">is</span> running <span class="keyword">at</span> <span class="keyword">http</span>://<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">5000</span>/blog/. Press Ctrl+C <span class="keyword">to</span> stop.</div></pre></td></tr></table></figure>
<h2 id="127-0-0-1-0-0-0-0-localhost-的区别"><a href="#127-0-0-1-0-0-0-0-localhost-的区别" class="headerlink" title="127.0.0.1, 0.0.0.0, localhost 的区别"></a>127.0.0.1, 0.0.0.0, localhost 的区别</h2><ul>
<li>127.0.0.1是一个回送地址，指本地机，一般用来测试使用。</li>
<li>localhost 是 127.0.0.1 的别名，可以改成别的。win7下可以到<br><code>C:\Windows\System32\drivers\etc\hosts</code>里修改。</li>
<li>0.0.0.0 表示无路由目标，主机可能有多个ip地址， 0.0.0.0 指向本机所有ip地址</li>
</ul>
<p><a href="https://www.howtogeek.com/225487/what-is-the-difference-between-127.0.0.1-and-0.0.0.0/" target="_blank" rel="external">参考</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170316.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;Hexo server not working&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="http://laker.me/blog/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="http://laker.me/blog/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>sublime text 3 注释的快捷键失效</title>
    <link href="http://laker.me/blog/2017/03/09/17_0309_sublime_shortcuts/"/>
    <id>http://laker.me/blog/2017/03/09/17_0309_sublime_shortcuts/</id>
    <published>2017-03-09T00:24:00.000Z</published>
    <updated>2017-04-26T15:15:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170309.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="title"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">Laker’s Blog–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<hr>
<p>最近新装了一个ubuntu虚拟机，装了最新的sublime 3，发现注释的快捷键用不了，大大降低了效率，之前在双系统下没有这样的情况，上网搜了一下，根据StackOverflow里的讨论，说这是一个BUG。开发比较急，也没时间用旧版本覆盖在配置，所以找了下解决方案。</p>
<h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><p>检查是否和系统、编辑器内部有快捷键冲突。</p>
<p>安装插件<code>keymap</code>，通过菜单<code>tool-&gt;keymap-find a key</code>，输入<code>comment</code>查看当前注释的快捷键是什么。</p>
<h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>把如下代码添加到 <code>Preferences / Key Bindings - User</code></p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&#123; <span class="string">"keys"</span>: [<span class="string">"control+keypad_divide"</span>],<span class="string">"command"</span>: <span class="string">"toggle_comment"</span>, <span class="string">"args"</span>: &#123;<span class="string">"block"</span>: false&#125; &#125;,</div><div class="line">&#123; <span class="string">"keys"</span>: [<span class="string">"shift+control+keypad_divide"</span>],<span class="string">"command"</span>: <span class="string">"toggle_comment"</span>, <span class="string">"args"</span>: &#123;<span class="string">"block"</span>: true&#125;&#125;</div></pre></td></tr></table></figure>
<h2 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h2><p>德式键盘的<code>/</code>在数字7下面，所以把如下代码添加到 <code>Preferences / Key Bindings - User</code></p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&#123; <span class="string">"keys"</span>: [<span class="string">"ctrl+7"</span>], <span class="string">"command"</span>: <span class="string">"toggle_comment"</span>, <span class="string">"args"</span>: &#123; <span class="string">"block"</span>: false &#125; &#125;,</div><div class="line">&#123; <span class="string">"keys"</span>: [<span class="string">"ctrl+shift+7"</span>], <span class="string">"command"</span>: <span class="string">"toggle_comment"</span>, <span class="string">"args"</span>: &#123; <span class="string">"block"</span>: true &#125; &#125;</div></pre></td></tr></table></figure>
<h2 id="方法四"><a href="#方法四" class="headerlink" title="方法四"></a>方法四</h2><p>更换其他快捷键设置后还不起作用，可能是不识别ctrl键。<br>我平时习惯右边的 ctrl + / ，上面方法都不起作用，偶然一次发现左边 ctrl + / 才起作用。</p>
<h2 id="方法五"><a href="#方法五" class="headerlink" title="方法五"></a>方法五</h2><p>用旧一点的版本覆盖，不过可能会丧失某些功能。</p>
<p><a href="http://stackoverflow.com/questions/17742781/keyboard-shortcut-to-comment-lines-in-sublime-text-3" target="_blank" rel="external">StackOverflow 参考</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170309.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;title&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Sublime" scheme="http://laker.me/blog/categories/Sublime/"/>
    
    
      <category term="Sublime" scheme="http://laker.me/blog/tags/Sublime/"/>
    
  </entry>
  
  <entry>
    <title>Vue.js 2.0 学习</title>
    <link href="http://laker.me/blog/2017/02/13/17_0213_vuejs2_leaning/"/>
    <id>http://laker.me/blog/2017/02/13/17_0213_vuejs2_leaning/</id>
    <published>2017-02-13T00:24:00.000Z</published>
    <updated>2017-04-26T15:15:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170213.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="title"></p>
<a id="more"></a>
<h2 id="前期"><a href="#前期" class="headerlink" title="前期"></a>前期</h2><ul>
<li>Ubutu</li>
<li>npm</li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><pre><code>npm install vue -g
</code></pre><p>或用Bower：</p>
<pre><code>bower install vue
</code></pre><p>或安装命令行工具：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> 全局安装 vue-cli</span></div><div class="line"><span class="meta">$</span><span class="bash"> npm install --global vue-cli</span></div><div class="line"><span class="meta">#</span><span class="bash"> 创建一个基于 webpack 模板的新项目</span></div><div class="line"><span class="meta">$</span><span class="bash"> vue init webpack my-project</span></div><div class="line"><span class="meta">#</span><span class="bash"> 安装依赖，走你</span></div><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> my-project</span></div><div class="line"><span class="meta">$</span><span class="bash"> npm install</span></div><div class="line"><span class="meta">$</span><span class="bash"> npm run dev</span></div></pre></td></tr></table></figure></p>
<h2 id="调试工具"><a href="#调试工具" class="headerlink" title="调试工具"></a>调试工具</h2><p>Chrome 应用商场搜 <code>Vue.js devtools</code>， 并在浏览器拓展程序管理里开启“允许访问文件网址”</p>
<h2 id="Sublime-插件"><a href="#Sublime-插件" class="headerlink" title="Sublime 插件"></a>Sublime 插件</h2><ul>
<li>Vue Syntax highlight</li>
<li>Vuejs Snippets</li>
<li>HTML/CSS/JS Prettify（格式化）， 安装后 tools-&gt;HTML/CSS/JS Prettify-&gt;set prettify preference 在”allowed_file_extensions”: [“htm”, “html”, “xhtml”, “shtml”, “xml”, “svg”,”vue”] 加上vue</li>
</ul>
<h2 id="安装-Vue-模板"><a href="#安装-Vue-模板" class="headerlink" title="安装 Vue 模板"></a>安装 Vue 模板</h2><p>安装好vue-cli后执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> vue init webpack AppName  <span class="comment">#建立一个webpack打包的应用，默认使用最新版vue</span></span></div></pre></td></tr></table></figure>
<p>用 Vue 1.x ：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">vue</span> <span class="selector-tag">init</span> <span class="selector-tag">webpack</span><span class="selector-id">#1</span><span class="selector-class">.0</span> <span class="selector-tag">AppName</span></div></pre></td></tr></table></figure>
<p>进入应用后安装依赖，包含node/webpack等<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> AppName</span></div><div class="line"><span class="meta">$</span><span class="bash"> npm install <span class="comment"># 或用cnpm</span></span></div></pre></td></tr></table></figure></p>
<p>运行服务，才能访问index， <a href="http://localhost:8080/" target="_blank" rel="external">http://localhost:8080/</a><br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm <span class="keyword">run</span><span class="bash"> dev</span></div></pre></td></tr></table></figure></p>
<p>发布：<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">run</span><span class="bash"> build</span></div></pre></td></tr></table></figure></p>
<p>或<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">webpack build</span></div></pre></td></tr></table></figure></p>
<p>生成文件在<code>dist/stastic/</code></p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170122172023.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="发布"></p>
<p>webpack+vue能很好的完成单页面应用的开发，官方也提供了很多例子和教程。但使用webpack能不能用到多页面项目中，同时又能使用vue进行模块组件化开发呢？参考：<a href="https://github.com/laoxubuer/Webpack-Vue-MultiplePage" target="_blank" rel="external">https://github.com/laoxubuer/Webpack-Vue-MultiplePage</a></p>
<p>插件、依赖</p>
<p>安装：</p>
<pre><code>npm i vue-resource vue-router vuex --save
</code></pre><p>main.js 加入:</p>
<pre><code>import VueRouter from &apos;vue-router&apos;
import VueResource from &apos;vue-resource&apos;
</code></pre><h2 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h2><p>安装：</p>
<p>在 <code>build/webpack.dev.conf.js</code> 和 <code>build/webpack.prod.conf.js</code> 里添加一个新的 <code>new webpack.ProvidePlugin</code></p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">plugins</span>: [</div><div class="line"></div><div class="line"><span class="actionscript">  <span class="comment">// ...</span></span></div><div class="line"></div><div class="line">  <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</div><div class="line">    $: <span class="string">'jquery'</span>,</div><div class="line">    jquery: <span class="string">'jquery'</span>,</div><div class="line">    <span class="string">'window.jQuery'</span>: <span class="string">'jquery'</span>,</div><div class="line">    jQuery: <span class="string">'jquery'</span></div><div class="line">  &#125;)</div><div class="line">]</div></pre></td></tr></table></figure>
<p><a href="http://stackoverflow.com/questions/37928998/how-to-use-a-jquery-plugin-inside-vue" target="_blank" rel="external">参考1</a>, <a href="https://segmentfault.com/a/1190000007020623#articleHeader2" target="_blank" rel="external">参考2</a></p>
<h2 id="BootStrap"><a href="#BootStrap" class="headerlink" title="BootStrap"></a>BootStrap</h2><p>安装：</p>
<pre><code>npm i bootstrap --save
</code></pre><p>main.js 加入:</p>
<pre><code>import &apos;bootstrap/dist/css/bootstrap.css&apos;
import &apos;bootstrap/dist/js/bootstrap.js&apos;
</code></pre><h2 id="Sass"><a href="#Sass" class="headerlink" title="Sass"></a>Sass</h2><ul>
<li>node-sass</li>
<li><p>sass-loader： webpack自动打包</p>
<p>  npm i node-sass sass-loader –save</p>
</li>
</ul>
<p>把文件引用放入 App.vue 顶部</p>
<pre><code>&lt;style src=&quot;./assets/sass/main.sass&quot; lang=&quot;sass&quot;&gt;&lt;/style&gt;
</code></pre><p>用 webpack 的时候，尽量把资源看做模块依赖，不需要额外编译这些 sass 了，而且生产构建时自动会合并到一个 css 文件里。<br><a href="https://segmentfault.com/q/1010000004479605" target="_blank" rel="external">https://segmentfault.com/q/1010000004479605</a></p>
<h2 id="JS插件"><a href="#JS插件" class="headerlink" title="JS插件"></a>JS插件</h2><p><a href="https://segmentfault.com/q/1010000005169531?_ea=806312" target="_blank" rel="external">https://segmentfault.com/q/1010000005169531?_ea=806312</a><br><a href="http://blog.csdn.net/ansu2009/article/details/53305134" target="_blank" rel="external">http://blog.csdn.net/ansu2009/article/details/53305134</a></p>
<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><p>除了用jQuery的Ajax，还有这个插件<a href="https://github.com/pagekit/vue-resource" target="_blank" rel="external">vue-resource</a>，跟jquery不同的是它没有async选项，也就是说所有请求都是异步的。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170213.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;title&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Vue.js" scheme="http://laker.me/blog/categories/Vue-js/"/>
    
    
      <category term="JavaScript" scheme="http://laker.me/blog/tags/JavaScript/"/>
    
      <category term="Vue.js" scheme="http://laker.me/blog/tags/Vue-js/"/>
    
  </entry>
  
  <entry>
    <title>除旧迎新，清洗机械键盘</title>
    <link href="http://laker.me/blog/2017/01/24/17_0124_clean_keyboard/"/>
    <id>http://laker.me/blog/2017/01/24/17_0124_clean_keyboard/</id>
    <published>2017-01-24T00:24:00.000Z</published>
    <updated>2017-04-26T15:15:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170124.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="title"></p>
<a id="more"></a>
<p>Race 2 已经绝版了，这是我最中意的布局，键齐全且布局紧凑，找了很多也没有更喜欢的，所以对他很爱护。</p>
<p>键盘用了一年多，积了很多灰。之前不定期清理过用水粉笔扫过键帽的灰，但是里面灰越积越多。早就想清理，但是一直懒得动。趁着过年除旧迎新，清理一下。</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170124165251.jpg?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="pics"></p>
<p>第一次拔键帽，还特地搜了一下教程。怀着忐忑的心试着拔了一颗没什么用的 toggle 键做实验。用拔键器硬塞到键帽下，轻轻易拔就出来了，试着安回去，也很轻松，就放心了。拔键器比较粗，键帽之间缝隙较小，塞进去怕刮花键帽，比较ABS涂料很脆弱，D 键就遭殃了。研究了一下轴和键帽，感觉不需要拔键器也能拔，就徒手拔了一下，轻松拔出，就全部徒手拔了。</p>
<p>直接看见电路板，所以平时也是严格防水保护。看这个灰落真是受不了。</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170124165252.jpg?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="pics"></p>
<p>由于大键帽有钢线固定，不好拆。据说拆不好会影响手感，就不拆了。</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170124165257.jpg?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="pics"></p>
<p>拔下来的键帽用清水洗过晾干，键盘用水粉笔扫扫走灰烬，最后用电吹风冷风档吹一下。</p>
<p>看着一尘不染，舒心 o(〃’▽’〃)o</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170124165254.jpg?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="pics"></p>
<p>萌 Logo (*￣3￣)╭</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170124165256.jpg?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="pics"></p>
<p>黑建绿光，这很黑客帝国~</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170124165255.jpg?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="pics"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170124.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10&quot; alt=&quot;title&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="外设" scheme="http://laker.me/blog/categories/%E5%A4%96%E8%AE%BE/"/>
    
    
      <category term="外设" scheme="http://laker.me/blog/tags/%E5%A4%96%E8%AE%BE/"/>
    
  </entry>
  
  <entry>
    <title>我的 Ubuntu 配置记录</title>
    <link href="http://laker.me/blog/2017/01/10/17_0110_ubunru_settings/"/>
    <id>http://laker.me/blog/2017/01/10/17_0110_ubunru_settings/</id>
    <published>2017-01-10T00:24:00.000Z</published>
    <updated>2017-07-18T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-20170110.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjIucG5n/dissolve/100/gravity/South/dy/5" alt="The cover"><br>重新装了系统，又得花老大劲配置环境，好多东西不记得了，只能看笔记和Google，但是比较琐碎，效率还是比较低。索性记录一下我的配置过程，以便今后再配环境时能快速一些。</p>
<a id="more"></a>
<h2 id="Ubuntu更换源"><a href="#Ubuntu更换源" class="headerlink" title="Ubuntu更换源"></a>Ubuntu更换源</h2><p>更换网易或阿里源<br><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20170105162824.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjIucG5n/dissolve/100/gravity/South/dy/5" alt="更换网易或阿里源"></p>
<h2 id="Ubuntu安装Python"><a href="#Ubuntu安装Python" class="headerlink" title="Ubuntu安装Python"></a>Ubuntu安装Python</h2><p>自带</p>
<h2 id="Chrome"><a href="#Chrome" class="headerlink" title="Chrome"></a>Chrome</h2><p>由于需要翻墙，先在windows下载好linux版本，上传到百度云或U盘，再到Ubuntu系统里安装。</p>
<p><strong>下载安装包方式</strong></p>
<p>到这个地址下载 <a href="https://www.google.com/intl/zh-CN/chrome/browser/?standalone=1" target="_blank" rel="external">https://www.google.com/intl/zh-CN/chrome/browser/?standalone=1</a> 下载deb文件</p>
<h2 id="Ubuntu科学上网"><a href="#Ubuntu科学上网" class="headerlink" title="Ubuntu科学上网"></a>Ubuntu科学上网</h2><h3 id="浏览器插件"><a href="#浏览器插件" class="headerlink" title="浏览器插件"></a>浏览器插件</h3><p>上传omega及其配置到百度云或U盘，再到Ubuntu系统里安装。</p>
<h3 id="Ubuntu安装ss"><a href="#Ubuntu安装ss" class="headerlink" title="Ubuntu安装ss"></a>Ubuntu安装ss</h3><p>安装的命令：</p>
<p>然后安装 PIP</p>
<pre><code>apt-get install python-gevent python-pip
</code></pre><p>安装 ss</p>
<pre><code>pip install shadowsocks
</code></pre><p>为了支持加密方式，需要安装</p>
<pre><code>apt-get install python-m2crypto
</code></pre><p>运行：</p>
<pre><code>sslocal -s 地址 -p 端口 -k 密码 -m 加密方式
</code></pre><h2 id="Sublime"><a href="#Sublime" class="headerlink" title="Sublime"></a>Sublime</h2><p>安装插件前按Ctrl+` 调出console输入</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import urllib.request,<span class="built_in">os</span>; pf = <span class="string">'Package Control.sublime-package'</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); <span class="built_in">open</span>(<span class="built_in">os</span>.<span class="built_in">path</span>.join(ipp, pf), <span class="string">'wb'</span>).<span class="built_in">write</span>(urllib.request.urlopen( <span class="string">'http://sublime.wbond.net/'</span> + pf.replace(<span class="string">' '</span>,<span class="string">'%20'</span>)).<span class="built_in">read</span>())</div></pre></td></tr></table></figure>
<h2 id="Ubuntu安装Git"><a href="#Ubuntu安装Git" class="headerlink" title="Ubuntu安装Git"></a>Ubuntu安装Git</h2><p>安装</p>
<pre><code>apt-get install git
</code></pre><p>配置Github：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> git config --global user.name <span class="string">"用户名"</span></span></div><div class="line"><span class="meta">$</span><span class="bash"> git config --global user.email 邮箱</span></div><div class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -b 4096 -C <span class="string">"邮箱"</span></span></div><div class="line"><span class="meta">$</span><span class="bash"> ssh-add ~/.ssh/id_rsa</span></div></pre></td></tr></table></figure></p>
<p>把在~/.ssh（根目录下按 ctrl + H 显示隐藏文件）ssh-key 添加到 Github 设置里</p>
<h2 id="Ubuntu安装Nodejs"><a href="#Ubuntu安装Nodejs" class="headerlink" title="Ubuntu安装Nodejs"></a>Ubuntu安装Nodejs</h2><p>安装NVM，重启terminal:</p>
<pre><code>wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.0/install.sh | bash
</code></pre><p>安装Nodejs 6.10.3，含npm，可换其他版本</p>
<pre><code>nvm install 6.10.3
node -v
</code></pre><p>切换Nodejs版本</p>
<pre><code>nvm use 6.10.3（版本号）
</code></pre><h2 id="Ubuntu安装cnpm"><a href="#Ubuntu安装cnpm" class="headerlink" title="Ubuntu安装cnpm"></a>Ubuntu安装cnpm</h2><p><a href="https://npm.taobao.org" target="_blank" rel="external">https://npm.taobao.org</a></p>
<pre><code>npm install -g cnpm --registry=https://registry.npm.taobao.org
cnpm install [name]
</code></pre><h2 id="Ubuntu安装Bower"><a href="#Ubuntu安装Bower" class="headerlink" title="Ubuntu安装Bower"></a>Ubuntu安装Bower</h2><pre><code>npm install bower -g
bower -v
</code></pre><h2 id="Ubuntu安装Ruby"><a href="#Ubuntu安装Ruby" class="headerlink" title="Ubuntu安装Ruby"></a>Ubuntu安装Ruby</h2><p>含gem</p>
<pre><code>sudo apt-get install ruby 2.4 （最新版本号可在官网查）
</code></pre><p>移除默认的<a href="https://rubygems.org源：" target="_blank" rel="external">https://rubygems.org源：</a></p>
<pre><code>gem source --remove https://rubygems.org/
</code></pre><p>然后添加淘宝的源<a href="https://ruby.taobao.org/" target="_blank" rel="external">https://ruby.taobao.org/</a>:</p>
<pre><code>gem source -a https://ruby.taobao.org/
</code></pre><p>确保只有 ruby.taobao.org</p>
<pre><code>gem sources -l
*** CURRENT SOURCES ***
https://ruby.taobao.org
</code></pre><h2 id="Ubuntu安装Sass"><a href="#Ubuntu安装Sass" class="headerlink" title="Ubuntu安装Sass"></a>Ubuntu安装Sass</h2><pre><code>gem install sass
</code></pre><h2 id="Ubuntu安装CoffeeScript"><a href="#Ubuntu安装CoffeeScript" class="headerlink" title="Ubuntu安装CoffeeScript"></a>Ubuntu安装CoffeeScript</h2><h2 id="Ubuntu安装Gulp"><a href="#Ubuntu安装Gulp" class="headerlink" title="Ubuntu安装Gulp"></a>Ubuntu安装Gulp</h2><pre><code>npm install --global gulp
</code></pre><h2 id="Ubuntu安装Vim"><a href="#Ubuntu安装Vim" class="headerlink" title="Ubuntu安装Vim"></a>Ubuntu安装Vim</h2><pre><code>sudo apt-get install vim
</code></pre><h2 id="Ubuntu安装Vue-js"><a href="#Ubuntu安装Vue-js" class="headerlink" title="Ubuntu安装Vue.js"></a>Ubuntu安装Vue.js</h2><pre><code>npm install vue -g
</code></pre><p>或用Bower：</p>
<pre><code>bower install vue
</code></pre><p>或安装命令行工具：</p>
<pre><code># 全局安装 vue-cli
$ npm install --global vue-cli
# 创建一个基于 webpack 模板的新项目
$ vue init webpack my-project
# 安装依赖，走你
$ cd my-project
$ npm install
$ npm run dev
</code></pre><h2 id="bootstrap"><a href="#bootstrap" class="headerlink" title="bootstrap"></a>bootstrap</h2><pre><code>bower init
bower install bootstrap#3.3.7 --save
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-20170110.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjIucG5n/dissolve/100/gravity/South/dy/5&quot; alt=&quot;The cover&quot;&gt;&lt;br&gt;重新装了系统，又得花老大劲配置环境，好多东西不记得了，只能看笔记和Google，但是比较琐碎，效率还是比较低。索性记录一下我的配置过程，以便今后再配环境时能快速一些。&lt;/p&gt;
    
    </summary>
    
      <category term="Ubuntu" scheme="http://laker.me/blog/categories/Ubuntu/"/>
    
    
      <category term="Ubuntu" scheme="http://laker.me/blog/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>那时候的梦想，你还在坚持吗？</title>
    <link href="http://laker.me/blog/2016/05/05/16_0505_the_dreams/"/>
    <id>http://laker.me/blog/2016/05/05/16_0505_the_dreams/</id>
    <published>2016-05-05T00:24:00.000Z</published>
    <updated>2017-07-18T02:24:12.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/essay508286.jpg" alt="那时候的梦想，你还在坚持吗？"></p>
<a id="more"></a>
<blockquote>
<p>那时候，你说想考和TA一样的大学<br>可是你全科红灯高高挂</p>
</blockquote>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/essayimg_2762.jpg" alt="那时候，你说想考和TA一样的大学"></p>
<blockquote>
<p>那时候，你说想当一名画家<br>可是你仍然是个渣触</p>
</blockquote>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/blogimg_2761.jpg" alt="那时候，你说想当一名画家"></p>
<blockquote>
<p>那时候，你说你想当主持人<br>可是你满嘴“飘biaoz吮zhun”的方言</p>
</blockquote>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/blogimg_2763.jpg" alt="那时候，你说你想当主持人"></p>
<blockquote>
<p>但你还是坚持了<br>以艺术特长生的身份和TA成为校友</p>
</blockquote>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/blogimg_2765.jpg" alt="坚持会有好运"></p>
<blockquote>
<p>但你还是坚持了<br>每天站在和艺术最近的地方<br>哪怕是在画廊里当一个小员工</p>
</blockquote>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/blogimg_2766.jpg" alt="坚持会有好运"></p>
<blockquote>
<p>但你还是坚持了<br>在演播厅里激情解说<br>哪怕只是一个地方电台</p>
</blockquote>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/essayimg_2429.png" alt="坚持会有好运"></p>
<blockquote>
<p>那时候，我说我想当一名顶尖的工程师<br>用代码改变世界<br>然而，能力达不到野心的我放弃了<br>拖着疲惫不堪的回到家乡<br>在小角落里找不到出路<br>时光真是个可以治愈人的庸医<br>我拾起键盘，在开源社区里自由的奔驰<br>没有思想的约束，没有功能的限制，没有KPI的压力<br>我就这样写着随性的代码<br>我开始明白<br>那时候，我想做的是——写喜欢的代码<br>我希望我的代码让世界有趣一点<br>保持对技术圈的关注<br>自己写点小程序 <a href="https://github.com/younglaker" target="_blank" rel="external">Github</a><br>坚持写博客记录学习历程和分享心得<br>和技术圈的朋友交流学习<br>我还在坚持</p>
<p>那你呢？<br>那时候的梦想，你还在坚持吗？</p>
</blockquote>
<p>##❤  观影指南</p>
<p><strong>《请回答1997》</strong></p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/essaytrim.jpg" alt="请回答1997"></p>
<blockquote>
<p>   讲述6个好友，从1997年到2012年共同经历着友情、亲情和爱情的成长与蜕变。鲜有的不靠颜值取胜的韩剧，看弹幕的时候会看到一边吐槽颜值、一边说剧情好看、最后爱上所有演员的言论。<br>   该剧有着复古小清新调调，轻松诙谐，能让人笑出言论，又不禁让人回忆思考。<br>   本剧大部分讲述1997年的故事，虽然大背景是韩国，但是绝对能和你所经历的青春产生共鸣。那时候我们年轻，我们追星，我们看球，我们看漫画，我们谈论着隔壁的班花、球场的校草，我们……<br>   该剧采用倒叙、插叙的手法，看第一集的时候会比较晕，但请相信满屏的弹幕，看下去，你一定会感叹编剧的铺垫手法，还有大量的暗示线索可以供亲推测剧情~</p>
</blockquote>
<!-- **【图饭】是我倾心维护的 微信公众号，选取有深度的影片片段，结合生活，串接成有味道的文章。**
**图饭 —— 用长图说故事**
**我有故事，你有酒吗？** -->
<!-- ![图饭](http://77g54f.com1.z0.glb.clouddn.com/tufan1056418.png) -->]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/essay508286.jpg&quot; alt=&quot;那时候的梦想，你还在坚持吗？&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="图饭" scheme="http://laker.me/blog/categories/%E5%9B%BE%E9%A5%AD/"/>
    
    
      <category term="图饭" scheme="http://laker.me/blog/tags/%E5%9B%BE%E9%A5%AD/"/>
    
  </entry>
  
  <entry>
    <title>HTML5上传图片文件（含拖拽、预览、上传、美化）</title>
    <link href="http://laker.me/blog/2016/03/04/16_0406_html5_upload_img/"/>
    <id>http://laker.me/blog/2016/03/04/16_0406_html5_upload_img/</id>
    <published>2016-03-04T00:24:00.000Z</published>
    <updated>2017-04-26T15:15:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-718552.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjIucG5n/dissolve/100/gravity/South/dy/5" alt="HTML5上传图片文件"></p>
<a id="more"></a>
<p><a href="http://laker.me/blog/2016/03/04/16_0304_ajax_file_upload/">上篇文章讲到如何上传文件</a>。本文讲细分讲述图片上传、预览。</p>
<h2 id="关于接口"><a href="#关于接口" class="headerlink" title="关于接口"></a>关于接口</h2><p><a href="http://www.w3.org/TR/file-upload/" target="_blank" rel="external">File API</a></p>
<ul>
<li>File - 独立文件；提供只读信息，例如名称、文件大小、mimetype 和对文件句柄的引用。</li>
<li>FileList - File 对象的类数组序列（考虑多文件上传或者从桌面拖动目录或文件）。</li>
<li>Blob - 可将文件分割为字节范围。</li>
<li>FileReader - 读取File或Blob</li>
<li>URL scheme</li>
</ul>
<h2 id="检测浏览器是否支持"><a href="#检测浏览器是否支持" class="headerlink" title="检测浏览器是否支持"></a>检测浏览器是否支持</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 检测是否支持File API</span></div><div class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.File &amp;&amp; <span class="built_in">window</span>.FileReader &amp;&amp; <span class="built_in">window</span>.FileList &amp;&amp; <span class="built_in">window</span>.Blob) &#123;</div><div class="line">  <span class="comment">//  支持</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  alert(<span class="string">'不支持'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="基本代码"><a href="#基本代码" class="headerlink" title="基本代码"></a>基本代码</h2><p>选取一张图片，并预览：<br><a href="https://codepen.io/younglaker/pen/vGmaYr" target="_blank" rel="external">Demo1</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;input id=<span class="string">"img_input"</span> type=<span class="string">"file"</span> accept=<span class="string">"image/*"</span>/&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"img_input"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></div><div class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"preview_box"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line"></div><div class="line">.preview_box img &#123;</div><div class="line">  <span class="attr">width</span>: <span class="number">200</span>px;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$(<span class="string">"#img_input"</span>).on(<span class="string">"change"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> file = e.target.files[<span class="number">0</span>]; <span class="comment">//获取图片资源</span></div><div class="line"></div><div class="line">  <span class="comment">// 只选择图片文件</span></div><div class="line">  <span class="keyword">if</span> (!file.type.match(<span class="string">'image.*'</span>)) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</div><div class="line"></div><div class="line">  reader.readAsDataURL(file); <span class="comment">// 读取文件</span></div><div class="line"></div><div class="line">  <span class="comment">// 渲染文件</span></div><div class="line">  reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> img = <span class="string">'&lt;img class="preview" src="'</span> + arg.target.result + <span class="string">'" alt="preview"/&gt;'</span>;</div><div class="line">    $(<span class="string">".preview_box"</span>).empty().append(img);</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>上传到服务器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> form_data = <span class="keyword">new</span> FormData();</div><div class="line"><span class="keyword">var</span> file_data = $(<span class="string">"#img_input"</span>).prop(<span class="string">"files"</span>)[<span class="number">0</span>];</div><div class="line"></div><div class="line"><span class="comment">// 把上传的数据放入form_data</span></div><div class="line">form_data.append(<span class="string">"user"</span>, <span class="string">"Mike"</span>);</div><div class="line">form_data.append(<span class="string">"img"</span>, file_data);</div><div class="line"></div><div class="line">$.ajax(&#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">"POST"</span>, <span class="comment">// 上传文件要用POST</span></div><div class="line">    url: <span class="string">""</span>,</div><div class="line">    <span class="attr">dataType</span> : <span class="string">"json"</span>,</div><div class="line">    <span class="attr">crossDomain</span>: <span class="literal">true</span>, <span class="comment">// 如果用到跨域，需要后台开启CORS</span></div><div class="line">  processData: <span class="literal">false</span>,  <span class="comment">// 注意：不要 process data</span></div><div class="line">  contentType: <span class="literal">false</span>,  <span class="comment">// 注意：不设置 contentType</span></div><div class="line">    data: form_data</div><div class="line">&#125;).success(<span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(msg);</div><div class="line">&#125;).fail(<span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(msg);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="拖拽上传"><a href="#拖拽上传" class="headerlink" title="拖拽上传"></a>拖拽上传</h2><p>三个相关事件：</p>
<ul>
<li>dragenter</li>
<li>dragover</li>
<li>drop</li>
</ul>
<p>原生JavaScript：</p>
<p><a href="https://codepen.io/younglaker/pen/vGmaYr" target="_blank" rel="external">Demo2</a></p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;div id=<span class="string">"drop_zone"</span>&gt;Drop files here&lt;/div&gt;</div><div class="line">&lt;ul id=<span class="string">"list"</span>&gt;&lt;/ul&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 必须阻止dragenter和dragover事件的默认行为，这样才能触发 drop 事件</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fileSelect</span><span class="params">(evt)</span> </span>&#123;</div><div class="line"></div><div class="line">  evt.stopPropagation();</div><div class="line">  evt.preventDefault();</div><div class="line"></div><div class="line">  <span class="keyword">var</span> files = evt.dataTransfer.files; <span class="comment">// 文件对象</span></div><div class="line">  <span class="keyword">var</span> output = [];</div><div class="line"></div><div class="line">  <span class="comment">// 处理多文件</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, f; f = files[i]; i++) &#123;</div><div class="line">    output.push(<span class="string">'&lt;li&gt;&lt;strong&gt;'</span>, escape(f.name), <span class="string">'&lt;/strong&gt; ('</span>, f.type || <span class="string">'n/a'</span>, <span class="string">') - '</span>,</div><div class="line">                f.size, <span class="string">' bytes, last modified: '</span>,</div><div class="line">                f.lastModifiedDate.toLocaleDateString(), <span class="string">'&lt;/li&gt;'</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// 显示文件信息</span></div><div class="line">  document.getElementById(<span class="string">'list'</span>).innerHTML = output.join(<span class="string">''</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragOver</span><span class="params">(evt)</span> </span>&#123;</div><div class="line">  evt.stopPropagation();</div><div class="line">  evt.preventDefault();</div><div class="line">  evt.dataTransfer.dropEffect = <span class="string">'copy'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 监听器</span></div><div class="line"><span class="keyword">var</span> dropZone = document.getElementById(<span class="string">'drop_zone'</span>);</div><div class="line">dropZone.addEventListener(<span class="string">'dragover'</span>, dragOver, <span class="literal">false</span>);</div><div class="line">dropZone.addEventListener(<span class="string">'drop'</span>, fileSelect, <span class="literal">false</span>);</div></pre></td></tr></table></figure>
<p>jQuery：</p>
<p>其他代码可以不变，注意监听事件的时候的，由于jQuery的封装，数据存放的字段有变，传参是<code>e.originalEvent</code>而不是<code>e</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">"#drop_zone"</span>).on(<span class="string">'dragover'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">  e.stopPropagation();</div><div class="line">  e.preventDefault();</div><div class="line">  handleDragOver(e.originalEvent);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">$(<span class="string">"#drop_zone"</span>).on(<span class="string">'drop'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">  e.stopPropagation();</div><div class="line">  e.preventDefault();</div><div class="line">  handleFileSelect(e.originalEvent);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="美化上传框"><a href="#美化上传框" class="headerlink" title="美化上传框"></a>美化上传框</h2><p>###方法一： 在隐藏的文件输入框上调用click()方法</p>
<p>隐藏掉默认的的文件输入框<code>&lt;input&gt;</code>元素，使用自定义的界面来充当打开文件选择对话框的按钮。要使用样式<code>display:none</code>把原本的文件输入框隐藏掉，然后在需要的时候调用它的click()方法就行了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;input type=<span class="string">"file"</span> id=<span class="string">"fileElem"</span> multiple accept=<span class="string">"image/*"</span> style=<span class="string">"display：none"</span> onchange=<span class="string">"handleFiles(this.files)"</span>&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">id</span>=<span class="string">"fileSelect"</span>&gt;</span>选择文件<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">var</span> fileSelect = <span class="built_in">document</span>.getElementById(<span class="string">"fileSelect"</span>),</div><div class="line">  fileElem = <span class="built_in">document</span>.getElementById(<span class="string">"fileElem"</span>);</div><div class="line"></div><div class="line">fileSelect.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (fileElem) &#123;</div><div class="line">    fileElem.click();  <span class="comment">// jQuery可以使用 trigger()</span></div><div class="line">  &#125;</div><div class="line">  e.preventDefault(); <span class="comment">// prevent navigation to "#"</span></div><div class="line">&#125;, <span class="literal">false</span>);</div></pre></td></tr></table></figure>
<p>###方法二：用label</p>
<p>隐藏input，把样式写到label上，点击label就是对input进行操作。</p>
<p><a href="https://codepen.io/younglaker/pen/vGmaYr" target="_blank" rel="external">Demo3</a></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">input</span> id=<span class="string">"img_input2"</span> type=<span class="string">"file"</span> accept=<span class="string">"image/*"</span>/&gt;</div><div class="line">&lt;<span class="selector-tag">label</span> <span class="keyword">for</span>=<span class="string">"img_input2"</span> id=<span class="string">"img_label2"</span>&gt;选择文件</div><div class="line">    &lt;<span class="selector-tag">i</span> class=<span class="string">"fa fa-plus fa-lg"</span>&gt;&lt;/i&gt;</div><div class="line">&lt;/label&gt;</div><div class="line">&lt;<span class="selector-tag">div</span> id=<span class="string">"preview_box2"</span>&gt;&lt;/div&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="selector-id">#img_input2</span> &#123;</div><div class="line">  <span class="attribute">display</span>: none;</div><div class="line">&#125;</div><div class="line"><span class="selector-id">#img_label2</span> &#123;</div><div class="line">  <span class="attribute">background-color</span>: <span class="number">#f2d547</span>;</div><div class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</div><div class="line">  <span class="attribute">display</span>: inline-block;</div><div class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-id">#preview_box2</span> <span class="selector-tag">img</span> &#123;</div><div class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-718552.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjIucG5n/dissolve/100/gravity/South/dy/5&quot; alt=&quot;HTML5上传图片文件&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Ajax" scheme="http://laker.me/blog/categories/Ajax/"/>
    
    
      <category term="HTML5" scheme="http://laker.me/blog/tags/HTML5/"/>
    
      <category term="Ajax" scheme="http://laker.me/blog/tags/Ajax/"/>
    
  </entry>
  
  <entry>
    <title>HTML5+Ajax上传文件</title>
    <link href="http://laker.me/blog/2016/03/04/16_0304_ajax_file_upload/"/>
    <id>http://laker.me/blog/2016/03/04/16_0304_ajax_file_upload/</id>
    <published>2016-03-04T00:24:00.000Z</published>
    <updated>2017-04-26T15:15:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-523586.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjIucG5n/dissolve/100/gravity/South/dy/5" alt="HTML5+Ajax上传文件"></p>
<a id="more"></a>
<h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><p><code>input</code>类型设为<code>file</code>：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">label</span> <span class="keyword">for</span>=<span class="string">"img_input"</span>&gt;&lt;/<span class="keyword">label</span>&gt;</div><div class="line">&lt;<span class="keyword">input</span> id=<span class="string">"img_input"</span> <span class="keyword">type</span>=<span class="string">"file"</span>/&gt;</div></pre></td></tr></table></figure>
<p>如果想上传多文件，可添加<code>multiple</code></p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;input <span class="class"><span class="keyword">type</span></span>=<span class="string">"file"</span> name=<span class="string">"img"</span> multiple=<span class="string">"multiple"</span> /&gt;</div></pre></td></tr></table></figure>
<p>用<code>accept=&quot;MIME_type&quot;</code>限制提交的文件类型，用逗号隔开的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/Input" target="_blank" rel="external">MIME 类型</a>列表（服务器端也要最好类型检测双保险），如：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;input <span class="keyword">type</span>=<span class="string">"file"</span> <span class="keyword">accept</span>=<span class="string">"image/gif, image/jpeg"</span> /&gt;</div><div class="line">&lt;input <span class="keyword">type</span>=<span class="string">"file"</span> <span class="keyword">accept</span>=<span class="string">"image/*"</span>/&gt;</div></pre></td></tr></table></figure>
<h2 id="获取文件内容"><a href="#获取文件内容" class="headerlink" title="获取文件内容"></a>获取文件内容</h2><p>JavaScript：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> file = <span class="built_in">document</span>.getElementById(<span class="string">'fileToUpload'</span>).files[<span class="number">0</span>];</div></pre></td></tr></table></figure>
<p>jQuery：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="keyword">file</span> = $(<span class="string">"#img_input"</span>).<span class="keyword">prop</span>(<span class="string">"files"</span>)[0];</div></pre></td></tr></table></figure>
<h2 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h2><p>XMLHttpRequest Level 2添加了一个新的接口<code>FormData</code>。利用FormData对象，我们可以通过JavaScript用一些键值对来模拟一系列表单控件。比起普通的Ajax，使用FormData的最大优点就是我们可以异步上传一个二进制文件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 创建</span></div><div class="line"><span class="keyword">var</span> form_data = <span class="keyword">new</span> FormData();</div><div class="line"></div><div class="line"><span class="comment">// 获取文件</span></div><div class="line"><span class="keyword">var</span> file_data = $(<span class="string">"#img_input"</span>).prop(<span class="string">"files"</span>)[<span class="number">0</span>];</div><div class="line"></div><div class="line"><span class="comment">// 把所以表单信息</span></div><div class="line">form_data.append(<span class="string">"id"</span>, <span class="string">"001"</span>);</div><div class="line">form_data.append(<span class="string">"name"</span>, <span class="string">"test"</span>);</div><div class="line">form_data.append(<span class="string">"img"</span>, file_data);</div><div class="line"></div><div class="line">$.ajax(&#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">"POST"</span>,</div><div class="line">    <span class="attr">url</span>: <span class="string">"...."</span>,</div><div class="line">    <span class="attr">dataType</span> : <span class="string">"json"</span>,</div><div class="line">    <span class="attr">processData</span>: <span class="literal">false</span>,  <span class="comment">// 注意：让jQuery不要处理数据</span></div><div class="line">    contentType: <span class="literal">false</span>,  <span class="comment">// 注意：让jQuery不要设置contentType</span></div><div class="line">    data: form_data</div><div class="line">&#125;).success(<span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(msg);</div><div class="line">&#125;).fail(<span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(msg);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="多文件上传"><a href="#多文件上传" class="headerlink" title="多文件上传"></a>多文件上传</h2><p><strong>方法一 ：一次性上传多个文件</strong></p>
<p>如果后台接口允许多文件上传，就把文件存到一个变量后上传。</p>
<p><strong>方法二 ：一次性上传多个文件</strong></p>
<p>如果后台接口要求单个文件，就循环获取文件信息提交，Ajax使用同步上传<code>async: false</code>。</p>
<h2 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h2><p>JSONP是使用GET方法，无法发送文件。可以让后台开启CORS，Ajax也使用跨域<code>crossDomain: true</code>即可。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$.ajax(&#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">"POST"</span>,</div><div class="line">    <span class="attr">url</span>: <span class="string">"...."</span>,</div><div class="line">    <span class="attr">dataType</span> : <span class="string">"json"</span>,</div><div class="line">    <span class="attr">crossDomain</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">processData</span>: <span class="literal">false</span>,  <span class="comment">// 注意：让jQuery不要处理数据</span></div><div class="line">    contentType: <span class="literal">false</span>,  <span class="comment">// 注意：让jQuery不要设置contentType</span></div><div class="line">    data: form_data</div><div class="line">&#125;).success(<span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(msg);</div><div class="line">&#125;).fail(<span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(msg);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-523586.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjIucG5n/dissolve/100/gravity/South/dy/5&quot; alt=&quot;HTML5+Ajax上传文件&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Ajax" scheme="http://laker.me/blog/categories/Ajax/"/>
    
    
      <category term="HTML5" scheme="http://laker.me/blog/tags/HTML5/"/>
    
      <category term="Ajax" scheme="http://laker.me/blog/tags/Ajax/"/>
    
  </entry>
  
  <entry>
    <title>如何看源码之Ruby China搜索框动画实现</title>
    <link href="http://laker.me/blog/2016/01/05/16_0105_searchbox_ruby_china/"/>
    <id>http://laker.me/blog/2016/01/05/16_0105_searchbox_ruby_china/</id>
    <published>2016-01-05T00:24:00.000Z</published>
    <updated>2017-04-26T15:15:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://77g54f.com1.z0.glb.clouddn.com/bgt-306435.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjIucG5n/dissolve/100/gravity/South/dy/5" alt="如何看源码之Ruby China搜索框动画实现"></p>
<p>不要脸的自恋一下——我觉得我看源码的能力越来越强了，2333~</p>
<p>想看到 <a href="https://ruby-china.org" target="_blank" rel="external">Ruby China</a> 搜索框动画效果很不错，想试着实现一下。最初我的想法是用jQuery的animate：</p>
<a id="more"></a>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash">(<span class="string">'input'</span>).animate(&#123;width: <span class="string">'toggle'</span>&#125;);</span></div></pre></td></tr></table></figure>
<blockquote>
<p>题外话，toggle值意味着宽度在0和原本宽度之间切换.</p>
</blockquote>
<p>如果这样用的话，input就要设为<code>display: none;</code> 并且给input一个初始的长度。</p>
<p>例如 <strong><a href="http://codepen.io/younglaker/pen/jWygzm" target="_blank" rel="external">Demo</a></strong> (只做了输入框的显示隐藏)。</p>
<p>但是看 <a href="https://ruby-china.org/" target="_blank" rel="external">Ruby China</a> 源码没有设置<code>display: none;</code>，有两个属性引起我的注意：<code>width: 0px;</code> 和 <code>transition: all .3s;</code>， 可以猜测这个动画的实现由 transition 实现 width 的渐变。</p>
<p>在不断点击搜索和取消搜索中可以看到，form 上在增加、删除 .active，所以搜索是否被触发的标记绑定在 form 上。</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20151214144634.png" alt="form"></p>
<p>再看CSS，发现搜索框、查询按钮、关闭按钮都在动画触发后有个新的样式出现，名字如<code>.header .form-search.active .XXX</code>，看到这个<code>.form-search.active</code>就确定他们的动画是通过 form 上的 .active 来标记的。</p>
<p>然后我抠出以下主要代码：</p>
<blockquote>
<p>本例中将会用到JavaScript触发 CSS transition ，详细介绍请看我的另一篇文章<a href="http://laker.me/blog/2015/12/18/15_1218_css3_transition/">《花式使用CSS3 transition》</a>。</p>
</blockquote>
<p>HTML:<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"header"</span>&gt;</div><div class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"search-block"</span>&gt;</div><div class="line">    &lt;form <span class="class"><span class="keyword">class</span></span>=<span class="string">"navbar-form form-search"</span> action=<span class="string">"/search/all"</span> method=<span class="string">"get"</span>&gt;</div><div class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-group"</span>&gt;</div><div class="line">        &lt;input <span class="class"><span class="keyword">class</span></span>=<span class="string">"form-control search-box"</span> name=<span class="string">"searchKey"</span> <span class="class"><span class="keyword">type</span></span>=<span class="string">"text"</span> value=<span class="string">""</span> placeholder=<span class="string">"搜索本站内容"</span>&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">      &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa btn-search fa-search"</span>&gt;&lt;/i&gt;</div><div class="line">      &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa btn-close fa-times-circle"</span>&gt;&lt;/i&gt;</div><div class="line">    &lt;/form&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>CSS:<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.header</span> &#123;</div><div class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</div><div class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</div><div class="line">  <span class="attribute">position</span>: relative;</div><div class="line">  <span class="attribute">display</span>: block;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.search-block</span> &#123;</div><div class="line">  <span class="attribute">float</span>: right;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.header</span> <span class="selector-class">.form-search</span> <span class="selector-class">.fa</span> &#123;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.header</span> <span class="selector-class">.form-search</span> &#123;</div><div class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</div><div class="line">    <span class="attribute">position</span>: relative;</div><div class="line">    <span class="attribute">margin-top</span>: <span class="number">13px</span>;</div><div class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">15px</span>;</div><div class="line">    <span class="attribute">width</span>: auto;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.header</span> <span class="selector-class">.form-search</span> <span class="selector-class">.form-control</span> &#123;</div><div class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</div><div class="line">  <span class="attribute">border</span>: none;</div><div class="line">  <span class="attribute">width</span>: <span class="number">0px</span>;</div><div class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</div><div class="line">  <span class="attribute">padding</span>: <span class="number">6px</span> <span class="number">1px</span> <span class="number">4px</span> <span class="number">1px</span>;</div><div class="line">  <span class="attribute">margin-left</span>: <span class="number">4px</span>;</div><div class="line">  <span class="attribute">background</span>: transparent;</div><div class="line">  -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</div><div class="line">  -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</div><div class="line">  <span class="attribute">transition</span>: all .<span class="number">3s</span>;</div><div class="line">  <span class="attribute">box-sizing</span>: border-box;</div><div class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//输入框的动画部分</span></div><div class="line"><span class="selector-class">.header</span> <span class="selector-class">.form-search</span><span class="selector-class">.active</span> <span class="selector-class">.form-control</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">150px</span> <span class="meta">!important</span>;</div><div class="line">    <span class="attribute">cursor</span>: text;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.fa-search</span>:before &#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">"\f002"</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.header</span> <span class="selector-class">.form-search</span> <span class="selector-class">.fa-search</span> &#123;</div><div class="line">  <span class="attribute">cursor</span>: pointer;</div><div class="line">  <span class="attribute">position</span>: absolute;</div><div class="line">  <span class="attribute">top</span>: <span class="number">6px</span>;</div><div class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</div><div class="line">  -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</div><div class="line">  -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</div><div class="line">  <span class="attribute">transition</span>: all .<span class="number">3s</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 搜索按钮的动画部分</span></div><div class="line"><span class="selector-class">.header</span> <span class="selector-class">.form-search</span><span class="selector-class">.active</span> <span class="selector-class">.fa-search</span> &#123;</div><div class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</div><div class="line">  <span class="attribute">right</span>: auto;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.header</span> <span class="selector-class">.form-search</span> <span class="selector-class">.btn-close</span> &#123;</div><div class="line">  <span class="attribute">position</span>: absolute;</div><div class="line">  <span class="attribute">top</span>: <span class="number">6px</span>;</div><div class="line">  <span class="attribute">right</span>: <span class="number">0px</span>;</div><div class="line">  <span class="attribute">cursor</span>: pointer;</div><div class="line">  -webkit-<span class="attribute">transform</span>: scale(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">  -moz-<span class="attribute">transform</span>: scale(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">  <span class="attribute">transform</span>: scale(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">  -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</div><div class="line">  -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</div><div class="line">  <span class="attribute">transition</span>: all .<span class="number">3s</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 取消搜索的动画部分</span></div><div class="line"><span class="selector-class">.header</span> <span class="selector-class">.form-search</span><span class="selector-class">.active</span> <span class="selector-class">.btn-close</span> &#123;</div><div class="line">  -webkit-<span class="attribute">transform</span>: scale(<span class="number">1</span>, <span class="number">1</span>);</div><div class="line">  -moz-<span class="attribute">transform</span>: scale(<span class="number">1</span>, <span class="number">1</span>);</div><div class="line">  <span class="attribute">transform</span>: scale(<span class="number">1</span>, <span class="number">1</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>JavaScript：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$(<span class="string">'.btn-search'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  $(<span class="string">'.form-search'</span>).addClass(<span class="string">'active'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">$(<span class="string">'.btn-close'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  $(<span class="string">'.form-search'</span>).removeClass(<span class="string">'active'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p><strong><a href="http://codepen.io/younglaker/pen/MKKwyp/" target="_blank" rel="external">View Demo</a></strong></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>我也不是一眼就看出来的，抠这个效果花了大半天，也是蛮菜的。</p>
<p>分享自己一点点小经验：</p>
<ul>
<li>长期写代码的经验积累</li>
<li>多猜测多尝试，不断重复原网站的效果，看看代码有什么变化</li>
<li>把想到的关键词就google一下，也许能得到启发</li>
<li>多看源码，刚开始很累，后来就习惯的。我经常会看各种网站源码，框架也大致看过jQuery、Framework 7。前端这块的源码还是比较容易看的。</li>
<li>多模仿多练习。光看别人的代码不够，试着用自己的方式写写，然后对照别人的代码比对不足。我仿jQuery写了<a href="https://github.com/younglaker/octjs" target="_blank" rel="external">Octjs</a>，仿jCanvas写了<a href="https://github.com/younglaker/EasyCanvas" target="_blank" rel="external">EasyCanvas</a>（我从初学开始就有个毛病，如果不能理解一个框架、插件的原理，我用着心里就不踏实 &gt;_&lt;）。</li>
</ul>
<p>想起老博客里写过读豆瓣源码的文章，是我大三时候写的，算是第一次看复杂源码，毕竟文件多、代码已压缩混淆，以供参考：<a href="http://www.cnblogs.com/younglaker/archive/2013/05/16/3081065.html" target="_blank" rel="external">《豆瓣绑定事件的方法初探》</a> （大学时候的博客真是蛮逗比的，哈哈）</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://77g54f.com1.z0.glb.clouddn.com/bgt-306435.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjIucG5n/dissolve/100/gravity/South/dy/5&quot; alt=&quot;如何看源码之Ruby China搜索框动画实现&quot;&gt;&lt;/p&gt;
&lt;p&gt;不要脸的自恋一下——我觉得我看源码的能力越来越强了，2333~&lt;/p&gt;
&lt;p&gt;想看到 &lt;a href=&quot;https://ruby-china.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ruby China&lt;/a&gt; 搜索框动画效果很不错，想试着实现一下。最初我的想法是用jQuery的animate：&lt;/p&gt;
    
    </summary>
    
      <category term="CSS3" scheme="http://laker.me/blog/categories/CSS3/"/>
    
    
      <category term="JavaScript" scheme="http://laker.me/blog/tags/JavaScript/"/>
    
      <category term="CSS3" scheme="http://laker.me/blog/tags/CSS3/"/>
    
  </entry>
  
</feed>
