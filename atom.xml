<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>进击的程序媛，Laker&#39;s blog</title>
  <subtitle>进击的程序媛，江小湖Laker</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="http://laker.me/blog/"/>
  <updated>2019-03-07T02:23:42.000Z</updated>
  <id>http://laker.me/blog/</id>
  
  <author>
    <name>Laker Huang</name>
    <email>younglaker8#gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Wechat mini program - start up and homepage</title>
    <link href="http://laker.me/blog/2019/03/06/19_0306_wechat_mini_program/"/>
    <id>http://laker.me/blog/2019/03/06/19_0306_wechat_mini_program/</id>
    <published>2019-03-06T00:24:00.000Z</published>
    <updated>2019-03-07T02:23:42.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://wx2.sinaimg.cn/large/6d184cefly1g0u0mf6a9pj20p00463yw.jpg" alt="Wechat mini program"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">http://laker.me/blog</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="1-Register-an-account"><a href="#1-Register-an-account" class="headerlink" title="1. Register an account"></a>1. Register an account</h2><p>Register:<br><a href="https://mp.weixin.qq.com/cgi-bin/wx" target="_blank" rel="external">https://mp.weixin.qq.com/cgi-bin/wx</a></p>
<p>After register, login in and get AppID to login develop tool.</p>
<p><img src="https://wx4.sinaimg.cn/mw690/6d184cefly1fymkjsampgj211g0rwq5v.jpg" alt="AppID"></p>
<p>Develop tool:<br><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html" target="_blank" rel="external">https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html</a></p>
<p><img src="https://wx4.sinaimg.cn/mw690/6d184cefly1fymkjx0izpj20ik0qcjsx.jpg" alt="Develop tool"></p>
<h2 id="2-app-json"><a href="#2-app-json" class="headerlink" title="2. app.json"></a>2. app.json</h2><p>Documents: <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE" target="_blank" rel="external">https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE</a></p>
<h3 id="pages"><a href="#pages" class="headerlink" title="pages"></a>pages</h3><p>The whole config for mini program.</p>
<p>Add pages url in <code>pages</code>, it will add a pakages folders automatically, with <code>.wxml</code>, <code>.wxss</code>, <code>.js</code>,<code>.json</code> files:</p>
<p><img src="https://wx4.sinaimg.cn/mw690/6d184cefly1fymkki4182j20zg0l2afo.jpg" alt="pages"></p>
<p>After saving files, it will refresh and redirect to the first file which means the homepage. We can add a compilation mode to refresh specific page.</p>
<p><img src="https://ws3.sinaimg.cn/mw690/6d184cefly1fymkn79brlj20ek0myq4v.jpg" alt="homepage"></p>
<p>Generate a QR code to commit remote debug:</p>
<p><img src="https://ws1.sinaimg.cn/mw690/6d184cefly1fymknwkn9yj20h80o6go4.jpg" alt="remote debug"></p>
<h3 id="tabBar"><a href="#tabBar" class="headerlink" title="tabBar"></a>tabBar</h3><p><img src="https://wx4.sinaimg.cn/mw690/6d184cefly1fymkktawk3j21qa0yqb05.jpg" alt="tabBar"></p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="string">"tabBar"</span>: &#123;</div><div class="line">  <span class="string">"list"</span>: [</div><div class="line">    &#123;</div><div class="line">      <span class="string">"pagePath"</span>: <span class="string">"pages/square/square"</span>,</div><div class="line">      <span class="string">"text"</span>: <span class="string">"活动广场"</span>,</div><div class="line">      <span class="string">"iconPath"</span>: <span class="string">"images/icon_square.png"</span>,</div><div class="line">      <span class="string">"selectedIconPath"</span>: <span class="string">"images/icon_square_acted.png"</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      <span class="string">"pagePath"</span>: <span class="string">"pages/newact/newact"</span>,</div><div class="line">      <span class="string">"text"</span>: <span class="string">"发布活动"</span>,</div><div class="line">      <span class="string">"iconPath"</span>: <span class="string">"images/new_act.png"</span>,</div><div class="line">      <span class="string">"selectedIconPath"</span>: <span class="string">"images/new_act_acted.png"</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      <span class="string">"pagePath"</span>: <span class="string">"pages/index/index"</span>,</div><div class="line">      <span class="string">"text"</span>: <span class="string">"个人中心"</span>,</div><div class="line">      <span class="string">"iconPath"</span>: <span class="string">"images/icon_my.png"</span>,</div><div class="line">      <span class="string">"selectedIconPath"</span>: <span class="string">"images/icon_my_acted.png"</span></div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><p><img src="https://ws1.sinaimg.cn/mw690/6d184cefly1fymkn33tr3j21a60egdua.jpg" alt="windows"></p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="string">"window"</span>: &#123;</div><div class="line">  <span class="string">"backgroundColor"</span>: <span class="string">"<span class="subst">#FFFFFF</span>"</span>,</div><div class="line">  <span class="string">"backgroundTextStyle"</span>: <span class="string">"light"</span>,</div><div class="line">  <span class="string">"navigationBarBackgroundColor"</span>: <span class="string">"<span class="subst">#F6F6F6</span>"</span>,</div><div class="line">  <span class="string">"navigationBarTitleText"</span>: <span class="string">"WeGo活动行"</span>,</div><div class="line">  <span class="string">"navigationBarTextStyle"</span>: <span class="string">"black"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="swiper"><a href="#swiper" class="headerlink" title="swiper"></a>swiper</h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html" target="_blank" rel="external">https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html</a></p>
<p><img src="https://ws3.sinaimg.cn/mw690/6d184cefly1fymko4ohulj20i20akah7.jpg" alt="swiper"></p>
<p><code>.wxml</code></p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="xml"></span></div><div class="line"><span class="comment">&lt;!-- Hot activities --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">indicator-dots</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;indicatorDots&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">  <span class="attr">autoplay</span>=<span class="string">"</span><span class="template-variable">&#123;&#123;autoplay&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">interval</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;interval&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">duration</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;duration&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;hot_list&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> &gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">bindtap</span>=<span class="string">'goto_details'</span> <span class="attr">data-actid</span>=<span class="string">"</span></span><span class="template-variable">&#123;&#123;item.id&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">      <span class="comment">&lt;!-- Posters --&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"http://140.143.145.179</span></span><span class="template-variable">&#123;&#123;item.post_link&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">class</span>=<span class="string">"slide-image"</span> /&gt;</span></span></div><div class="line"></div><div class="line">      <span class="comment">&lt;!-- Titile --&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"hot_title"</span>&gt;</span><span class="template-variable">&#123;&#123;item.title&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>.js</code></p>
<p>Define the data:</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">  data:</span> &#123;</div><div class="line">    <span class="comment">// show icator dots</span></div><div class="line"><span class="symbol">    indicatorDots:</span> true,</div><div class="line">    <span class="comment">// auto play</span></div><div class="line"><span class="symbol">    autoplay:</span> true,</div><div class="line">    <span class="comment">// scroll interval</span></div><div class="line"><span class="symbol">    interval:</span> <span class="number">3000</span>,</div><div class="line">    <span class="comment">// stop duration</span></div><div class="line"><span class="symbol">    duration:</span> <span class="number">500</span>,</div><div class="line">    <span class="comment">// hot activities list</span></div><div class="line"><span class="symbol">    hot_list:</span> []</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Get hot activitis lists by Ajax:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">onLoad: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> this_obj = <span class="keyword">this</span>;</div><div class="line"></div><div class="line">  wx.request(&#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">'xxxx'</span>,</div><div class="line">    <span class="attr">method</span>: <span class="string">"GET"</span>,</div><div class="line">    <span class="attr">header</span>: &#123;</div><div class="line">      <span class="string">'Content-Type'</span>: <span class="string">'json'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">data</span>: &#123;</div><div class="line">      <span class="attr">userID</span>: user_id</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">      this_obj.setData(&#123;</div><div class="line">        <span class="attr">hot_list</span>: res.data.data.list</div><div class="line">      &#125;);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">fail</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">"fail"</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Choose-tags"><a href="#Choose-tags" class="headerlink" title="Choose tags"></a>Choose tags</h2><p><img src="https://ws1.sinaimg.cn/mw690/6d184cefly1fymkoa1e4yj20hm0bywhp.jpg" alt="image"></p>
<p><code>.wxml</code></p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'tags_list'</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'tags_list_title'</span>&gt;</span>标签选择：<span class="tag">&lt;/<span class="name">view</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"tags </span></span><span class="template-variable">&#123;&#123;current_tag==index?'tags_active':''&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">wx:for</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;tags&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>  <span class="attr">data-actname</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;item.name&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">bindtap</span>=<span class="string">"selcetTags"</span> <span class="attr">data-index</span> =<span class="string">'</span></span></span><span class="template-variable">&#123;&#123;index&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">'</span>&gt;</span></span><span class="template-variable">&#123;&#123;item.value&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></div><div class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></div></pre></td></tr></table></figure>
<p><code>.wxss</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* acted tag */</span></div><div class="line"><span class="selector-class">.tags_list</span> <span class="selector-class">.tags_active</span> &#123;</div><div class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#00BF00</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>.js</code></p>
<p>Initial data:</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">data</span>: &#123;</div><div class="line">  <span class="comment">// 标签</span></div><div class="line">  <span class="attribute">tags</span>: [</div><div class="line">    &#123; <span class="attribute">name</span>: <span class="string">'all'</span>, <span class="attribute">value</span>: <span class="string">'全部'</span> &#125;,</div><div class="line">    &#123; <span class="attribute">name</span>: <span class="string">'party'</span>, <span class="attribute">value</span>: <span class="string">'派对'</span> &#125;,</div><div class="line">    &#123; <span class="attribute">name</span>: <span class="string">'movie'</span>, <span class="attribute">value</span>: <span class="string">'电影'</span> &#125;,</div><div class="line">    &#123; <span class="attribute">name</span>: <span class="string">'sport'</span>, <span class="attribute">value</span>: <span class="string">'健身'</span> &#125;,</div><div class="line">    &#123; <span class="attribute">name</span>: <span class="string">'show'</span>, <span class="attribute">value</span>: <span class="string">'展览'</span> &#125;,</div><div class="line">    &#123; <span class="attribute">name</span>: <span class="string">'exhibition'</span>, <span class="attribute">value</span>: <span class="string">'演出'</span> &#125;,</div><div class="line">    &#123; <span class="attribute">name</span>: <span class="string">'competition'</span>, <span class="attribute">value</span>: <span class="string">'赛事'</span> &#125;,</div><div class="line">    &#123; <span class="attribute">name</span>: <span class="string">'cate'</span>, <span class="attribute">value</span>: <span class="string">'美食'</span> &#125;,</div><div class="line">    &#123; <span class="attribute">name</span>: <span class="string">'others'</span>, <span class="attribute">value</span>: <span class="string">'其他'</span> &#125;</div><div class="line">  ],</div><div class="line">  <span class="comment">// 当前 tag</span></div><div class="line">  <span class="attribute">current_tag</span>: <span class="number">0</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Switch content:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">selcetTags: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> this_obj = <span class="keyword">this</span>;</div><div class="line"></div><div class="line"> <span class="comment">// Get current tag name</span></div><div class="line">  <span class="keyword">var</span> current_tagname = e.currentTarget.dataset.actname;</div><div class="line"></div><div class="line">  <span class="comment">// Set the tage</span></div><div class="line">  this_obj.setData(&#123;</div><div class="line">    <span class="attr">current_tag</span>: e.currentTarget.dataset.index</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  wx.request(&#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">''</span>,</div><div class="line">    <span class="attr">method</span>: <span class="string">"GET"</span>,</div><div class="line">    <span class="attr">header</span>: &#123;</div><div class="line">      <span class="string">'Content-Type'</span>: <span class="string">'json'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">data</span>: &#123;</div><div class="line">      <span class="attr">userID</span>: app.data.user_id,</div><div class="line">      <span class="attr">subFilter</span>: current_tagname</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line"></div><div class="line">      <span class="comment">// Rebind act_list</span></div><div class="line">      this_obj.setData(&#123;</div><div class="line">        <span class="attr">act_list</span>: res.data.data.list</div><div class="line">      &#125;);</div><div class="line"></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">fail</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">"fail"</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Use-wx-for-to-show-lists"><a href="#Use-wx-for-to-show-lists" class="headerlink" title="Use wx:for to show lists"></a>Use wx:for to show lists</h2><p><img src="https://wx4.sinaimg.cn/mw690/6d184cefly1fymkol36f9j20hc0ge46z.jpg" alt="image"></p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="comment">&lt;!-- act_list_box --&gt;</span></span></div><div class="line"><span class="comment">&lt;!-- bindtap='goto_details' to redirect to act detail page --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'act_list_box'</span> <span class="attr">wx:for</span>=<span class="string">'</span></span><span class="template-variable">&#123;&#123;act_list&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">'</span> <span class="attr">bindtap</span>=<span class="string">'goto_details'</span> <span class="attr">data-actid</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;item.id&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- Poster --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'act_img'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"http://140.143.145.179</span></span><span class="template-variable">&#123;&#123;item.post_link&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">class</span>=<span class="string">"act_list_img"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- Activities infomation --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'act_info'</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- title --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span><span class="template-variable">&#123;&#123;item.title&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- start_time --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span><span class="template-variable">&#123;&#123;item.start_time&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- join_number/member_limit --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'people_number'</span>&gt;</span><span class="template-variable">&#123;&#123;item.join_number&#125;&#125;</span><span class="xml"> / </span><span class="template-variable">&#123;&#123;item.member_limit&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Bind redirect function:</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Redirect to detail page</span></div><div class="line">goto_details: <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">var</span> user_id = app.data.user_id;</div><div class="line">  <span class="keyword">var</span> act_id = e.currentTarget.dataset.actid;</div><div class="line"></div><div class="line">  <span class="comment">// Convey parameter to detail page</span></div><div class="line">  wx.navigateTo(&#123;</div><div class="line">    url: <span class="string">'../detail/detail?userID='</span> + user_id + <span class="string">'&amp;actID='</span> + act_id</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://wx2.sinaimg.cn/large/6d184cefly1g0u0mf6a9pj20p00463yw.jpg&quot; alt=&quot;Wechat mini program&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="HTML5" scheme="http://laker.me/blog/categories/HTML5/"/>
    
    
      <category term="HTML5" scheme="http://laker.me/blog/tags/HTML5/"/>
    
      <category term="Wechat" scheme="http://laker.me/blog/tags/Wechat/"/>
    
      <category term="Front-end" scheme="http://laker.me/blog/tags/Front-end/"/>
    
  </entry>
  
  <entry>
    <title>LeetCode 39 Combination Sum</title>
    <link href="http://laker.me/blog/2019/02/23/19_0223_leetcode_39/"/>
    <id>http://laker.me/blog/2019/02/23/19_0223_leetcode_39/</id>
    <published>2019-02-23T00:24:00.000Z</published>
    <updated>2019-02-23T10:50:56.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://wx4.sinaimg.cn/large/6d184cefgy1g008qty954j20p0046aaf.jpg" alt="LeetCode 39 Combination Sum "></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">http://laker.me/blog</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p><a href="https://leetcode.com/problems/combination-sum/" target="_blank" rel="external">https://leetcode.com/problems/combination-sum/</a></p>
<p>Given a set of candidate numbers (candidates) (without duplicates) and a target number (target), find all unique combinations in candidates where the candidate numbers sums to target.</p>
<p>The same repeated number may be chosen from candidates unlimited number of times.</p>
<p>Note:</p>
<p>All numbers (including target) will be positive integers.<br>The solution set must not contain duplicate combinations.</p>
<p>Example 1:</p>
<pre><code>Input: candidates = [2,3,6,7], target = 7,
A solution set is:
[
  [7],
  [2,2,3]
]
</code></pre><p>Example 2:</p>
<pre><code>Input: candidates = [2,3,5], target = 8,
A solution set is:
[
  [2,2,2,2],
  [2,3,3],
  [3,5]
]
</code></pre><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><h3 id="Expalnation"><a href="#Expalnation" class="headerlink" title="Expalnation:"></a>Expalnation:</h3><ul>
<li>Sort the list at first, so once the remain less than 0, it doesn’t have to add next numbers of the list.</li>
<li>The process of addition likes deep first sort.</li>
</ul>
<p><img src="https://wx1.sinaimg.cn/mw690/6d184cefgy1g008tifcjdj212j0vsn41.jpg" alt="Expalnation"></p>
<h3 id="Full-Code-in-Github"><a href="#Full-Code-in-Github" class="headerlink" title="Full Code in Github :"></a>Full Code in Github :</h3><p><a href="https://github.com/younglaker/leetcode/blob/master/39_combination_sum.py" target="_blank" rel="external">https://github.com/younglaker/leetcode/blob/master/39_combination_sum.py</a></p>
<h3 id="Code-explanation"><a href="#Code-explanation" class="headerlink" title="Code explanation"></a>Code explanation</h3><p><img src="https://wx4.sinaimg.cn/mw690/6d184cefgy1g008smqf4rj21on2drhdt.jpg" alt="Code Expalnation"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://wx4.sinaimg.cn/large/6d184cefgy1g008qty954j20p0046aaf.jpg&quot; alt=&quot;LeetCode 39 Combination Sum &quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Algorithm" scheme="http://laker.me/blog/categories/Algorithm/"/>
    
    
      <category term="Algorithm" scheme="http://laker.me/blog/tags/Algorithm/"/>
    
      <category term="Python" scheme="http://laker.me/blog/tags/Python/"/>
    
      <category term="LeetCode" scheme="http://laker.me/blog/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>LeetCode 38 Count and Say</title>
    <link href="http://laker.me/blog/2019/02/18/19_0218_leetcode_39/"/>
    <id>http://laker.me/blog/2019/02/18/19_0218_leetcode_39/</id>
    <published>2019-02-18T00:24:00.000Z</published>
    <updated>2019-02-18T00:41:16.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://wx4.sinaimg.cn/large/6d184cefgy1g008qty954j20p0046aaf.jpg" alt="LeetCode 38 Count and Say"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">http://laker.me/blog</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p><a href="https://leetcode.com/problems/count-and-say/" target="_blank" rel="external">https://leetcode.com/problems/count-and-say/</a></p>
<p>The count-and-say sequence is the sequence of integers with the first five terms as following:</p>
<pre><code>1.     1
2.     11
3.     21
4.     1211
5.     111221
</code></pre><p>1 is read off as “one 1” or 11.<br>11 is read off as “two 1s” or 21.<br>21 is read off as “one 2, then one 1” or 1211.</p>
<p>Given an integer n where 1 ≤ n ≤ 30, generate the nth term of the count-and-say sequence.</p>
<p>Note: Each term of the sequence of integers will be represented as a string.</p>
<p>Example 1:</p>
<pre><code>Input: 1
Output: &quot;1&quot;
</code></pre><p>Example 2:</p>
<pre><code>Input: 4
Output: &quot;1211&quot;
</code></pre><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><h3 id="Expalnation"><a href="#Expalnation" class="headerlink" title="Expalnation:"></a>Expalnation:</h3><p><img src="https://ws2.sinaimg.cn/mw690/6d184cefgy1g00bn39kruj212l0z5n4p.jpg" alt="Expalnation"></p>
<h3 id="Full-Code-in-Github"><a href="#Full-Code-in-Github" class="headerlink" title="Full Code in Github :"></a>Full Code in Github :</h3><p><a href="https://github.com/younglaker/leetcode/blob/master/38_Count_and_Say.py" target="_blank" rel="external">https://github.com/younglaker/leetcode/blob/master/38_Count_and_Say.py</a></p>
<h3 id="Code-explanation"><a href="#Code-explanation" class="headerlink" title="Code explanation"></a>Code explanation</h3><p><img src="https://upload-images.jianshu.io/upload_images/6346-9e133ce7c5bfdfdf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Code explanation"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://wx4.sinaimg.cn/large/6d184cefgy1g008qty954j20p0046aaf.jpg&quot; alt=&quot;LeetCode 38 Count and Say&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Algorithm" scheme="http://laker.me/blog/categories/Algorithm/"/>
    
    
      <category term="Algorithm" scheme="http://laker.me/blog/tags/Algorithm/"/>
    
      <category term="Python" scheme="http://laker.me/blog/tags/Python/"/>
    
      <category term="LeetCode" scheme="http://laker.me/blog/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>Use labelme to annotate image for machine learning</title>
    <link href="http://laker.me/blog/2019/01/31/19_0131_labelme/"/>
    <id>http://laker.me/blog/2019/01/31/19_0131_labelme/</id>
    <published>2019-01-31T00:24:00.000Z</published>
    <updated>2019-01-21T13:57:33.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://wx4.sinaimg.cn/large/6d184cefgy1fzoyeywzqxj20p0046q3i.jpg" alt="labelme"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">http://laker.me/blog</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<p>Labelme is a graphical image annotation tool. It is written in Python and uses Qt for its graphical interface. It is open source in Github at <a href="https://github.com/wkentaro/labelme" target="_blank" rel="external">https://github.com/wkentaro/labelme</a></p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>It can be used in both Python 2 and Python 3. Now, let’s use Python 3.</p>
<p>I use Anaconda for machin learning. So in Anaconda :</p>
<ol>
<li>Install conda</li>
</ol>
<p><img src="https://ws1.sinaimg.cn/mw690/6d184cefgy1fzoxcwooe8j21gi118tf0.jpg" alt="Install conda"></p>
<p>If conda is not working in terminal, activate your terminal profile:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> ~/.zsh_profile</span></div></pre></td></tr></table></figure>
<p><img src="https://wx4.sinaimg.cn/mw690/6d184cefgy1fzoxl24g3xj20u00hsn1u.jpg" alt="image"></p>
<ol>
<li>Create a new environment</li>
</ol>
<p>Choose a Python version you want.</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">conda create -n labelme python</span>=3.6</div></pre></td></tr></table></figure>
<p>Then we get a new clean environment for labelme:</p>
<p><img src="https://wx2.sinaimg.cn/mw690/6d184cefgy1fzoxfcd0ixj20qu0em0u3.jpg" alt="a new clean environment"></p>
<ol>
<li>Install labelme</li>
</ol>
<p>Active the environment :</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">activate</span> labelme</div></pre></td></tr></table></figure>
<p>If not worked and show <code>zsh: command not found: activate</code>, add <code>source</code> like this:</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source <span class="built_in">activate</span> labelme</div></pre></td></tr></table></figure>
<p>We will in the labeme environment.</p>
<p><img src="https://ws4.sinaimg.cn/mw690/6d184cefgy1fzoxip1hzrj20ka03y74r.jpg" alt="environment"></p>
<p>Python will be the version we chosen:</p>
<p><img src="https://ws1.sinaimg.cn/mw690/6d184cefgy1fzoxon8x00j20ni050mxv.jpg" alt="Python"></p>
<p>The pip also is the labelme version :</p>
<p><img src="https://ws2.sinaimg.cn/mw690/6d184cefgy1fzoxowgvazj219k0500tv.jpg" alt="pip"></p>
<p>Install labelme:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> pip install labelme</span></div></pre></td></tr></table></figure>
<h2 id="Use-labelme"><a href="#Use-labelme" class="headerlink" title="Use labelme"></a>Use labelme</h2><p>Input:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> labelme</span></div></pre></td></tr></table></figure>
<p>or:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> labelme <span class="comment"># Open GUI</span></span></div></pre></td></tr></table></figure>
<p><img src="https://wx3.sinaimg.cn/mw690/6d184cefgy1fzoy0my8ghj21no136hdt.jpg" alt="labelme"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://wx4.sinaimg.cn/large/6d184cefgy1fzoyeywzqxj20p0046q3i.jpg&quot; alt=&quot;labelme&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="AI" scheme="http://laker.me/blog/categories/AI/"/>
    
    
      <category term="AI" scheme="http://laker.me/blog/tags/AI/"/>
    
      <category term="ML" scheme="http://laker.me/blog/tags/ML/"/>
    
  </entry>
  
  <entry>
    <title>Algorithm - Quick Sort by Python</title>
    <link href="http://laker.me/blog/2019/01/22/19_0121_quick_sort/"/>
    <id>http://laker.me/blog/2019/01/22/19_0121_quick_sort/</id>
    <published>2019-01-22T00:24:00.000Z</published>
    <updated>2019-01-30T13:00:17.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx2.sinaimg.cn/large/6d184cefly1fvwi0uvwsmj20p0046gm8.jpg" alt="Django Enviroment in Tencent Cloud Ubuntu"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">http://laker.me/blog</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<p>There are tow method to set pivot.The easy way is setting the first item as pivot, and the other way is setting the middle item as pivot.</p>
<p>The first way is more easy to understand and write code.<br>The second way is a little better than the first one when the list is mostly ordered, it can seperate the smaller and bigger items to two sides, but in first way , one side may has all items and the other side has no item.</p>
<h2 id="Method-one"><a href="#Method-one" class="headerlink" title="Method one"></a>Method one</h2><p>Set the first item as pivot.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">def quick_sort(list, <span class="keyword">start</span>, <span class="keyword">end</span>):</div><div class="line">    # <span class="keyword">If</span> <span class="keyword">start</span> smaller <span class="keyword">than</span> <span class="keyword">end</span>, continue sorting</div><div class="line">    <span class="keyword">if</span> <span class="keyword">start</span> &lt; <span class="keyword">end</span>:</div><div class="line">        <span class="keyword">left</span> = <span class="keyword">start</span></div><div class="line">        <span class="keyword">right</span> = <span class="keyword">end</span></div><div class="line"></div><div class="line">        # <span class="keyword">Set</span> the <span class="keyword">first</span> item <span class="keyword">as</span> <span class="keyword">pivot</span></div><div class="line">        <span class="keyword">pivot</span> = <span class="keyword">list</span>[<span class="keyword">left</span>]</div><div class="line"></div><div class="line">        # <span class="keyword">Do</span> compare <span class="keyword">while</span> pointer <span class="keyword">left</span> smaller <span class="keyword">than</span> <span class="keyword">right</span></div><div class="line">        # <span class="keyword">Move</span> the smaller one <span class="keyword">to</span> <span class="keyword">left</span> part <span class="keyword">and</span> bigger one <span class="keyword">to</span> <span class="keyword">right</span> part</div><div class="line">        <span class="keyword">while</span> <span class="keyword">left</span> &lt; <span class="keyword">right</span>:</div><div class="line">            #<span class="keyword">if</span> the item <span class="keyword">of</span>  pointer <span class="keyword">right</span> item bigger <span class="keyword">than</span> <span class="keyword">move</span> the pointer <span class="keyword">right</span> back</div><div class="line">            <span class="keyword">while</span> (<span class="keyword">left</span> &lt; <span class="keyword">right</span>) <span class="keyword">and</span> (<span class="keyword">list</span>[<span class="keyword">right</span>] &gt;= <span class="keyword">pivot</span>):</div><div class="line">                <span class="keyword">right</span> -= <span class="number">1</span></div><div class="line"></div><div class="line">            # <span class="keyword">Now</span>, we find the a item smaller <span class="keyword">than</span> <span class="keyword">pivot</span>,so <span class="keyword">set</span> <span class="keyword">list</span>[<span class="keyword">left</span>] = <span class="keyword">list</span>[<span class="keyword">right</span>]</div><div class="line">            <span class="keyword">if</span> <span class="keyword">left</span> &lt; <span class="keyword">right</span>:</div><div class="line">                <span class="keyword">list</span>[<span class="keyword">left</span>] = <span class="keyword">list</span>[<span class="keyword">right</span>]</div><div class="line">                <span class="keyword">left</span> += <span class="number">1</span></div><div class="line"></div><div class="line">            # <span class="keyword">Than</span> we <span class="keyword">scan</span> <span class="keyword">left</span> part <span class="keyword">in</span> <span class="keyword">than</span> same way</div><div class="line">            <span class="keyword">while</span> (<span class="keyword">left</span> &lt; <span class="keyword">right</span>) <span class="keyword">and</span> (<span class="keyword">list</span>[<span class="keyword">left</span>] &lt;= <span class="keyword">pivot</span>):</div><div class="line">                <span class="keyword">left</span> += <span class="number">1</span></div><div class="line"></div><div class="line">            # <span class="keyword">Now</span>, we find the a item bigger <span class="keyword">than</span> <span class="keyword">pivot</span>,so <span class="keyword">set</span> <span class="keyword">list</span>[<span class="keyword">right</span>] = <span class="keyword">list</span>[<span class="keyword">left</span>]</div><div class="line">            <span class="keyword">if</span> <span class="keyword">left</span> &lt; <span class="keyword">right</span>:</div><div class="line">                <span class="keyword">list</span>[<span class="keyword">right</span>] = <span class="keyword">list</span>[<span class="keyword">left</span>]</div><div class="line">                <span class="keyword">right</span> -= <span class="number">1</span></div><div class="line"></div><div class="line"></div><div class="line">        # <span class="keyword">After</span> comparison, the <span class="keyword">list</span> <span class="keyword">is</span> separated <span class="keyword">to</span> two parts,</div><div class="line">        # <span class="keyword">and</span> pointer <span class="keyword">left</span> <span class="keyword">and</span> <span class="keyword">right</span> <span class="keyword">are</span> <span class="keyword">in</span> the same place</div><div class="line">        # So we <span class="keyword">set</span> <span class="keyword">pivot</span> <span class="keyword">in</span> this place</div><div class="line">        <span class="keyword">list</span>[<span class="keyword">left</span>] = <span class="keyword">pivot</span></div><div class="line">        print(<span class="keyword">list</span>)</div><div class="line"></div><div class="line">        #递归前后半区</div><div class="line">        # <span class="keyword">Now</span> recurse the quick_sort(）</div><div class="line">        # <span class="keyword">Left</span> part <span class="keyword">is</span> [<span class="keyword">start</span>, <span class="keyword">left</span> - <span class="number">1</span>]</div><div class="line">        # <span class="keyword">Right</span> part <span class="keyword">is</span> [<span class="keyword">right</span> + <span class="number">1</span>, <span class="keyword">end</span>]</div><div class="line">        quick_sort(<span class="keyword">list</span>, <span class="keyword">start</span>, <span class="keyword">left</span> - <span class="number">1</span>)</div><div class="line">        quick_sort(<span class="keyword">list</span>, <span class="keyword">right</span> + <span class="number">1</span>, <span class="keyword">end</span>)</div><div class="line">    <span class="keyword">return</span> <span class="keyword">list</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line"></div><div class="line">    <span class="keyword">before</span> = [<span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">2</span>, <span class="number">8</span>]</div><div class="line"></div><div class="line">    print(<span class="string">"Result:"</span>)</div><div class="line">    <span class="keyword">after</span> = quick_sort(<span class="keyword">before</span>, <span class="number">0</span>, <span class="keyword">len</span>(<span class="keyword">before</span>)<span class="number">-1</span> )</div><div class="line">    print(<span class="keyword">after</span>)</div></pre></td></tr></table></figure>
<p>Take a example:</p>
<p><img src="https://ws3.sinaimg.cn/mw690/6d184cefly1fyfxtd5g6lj21jg25cnmx.jpg" alt="example"></p>
<h2 id="Method-two"><a href="#Method-two" class="headerlink" title="Method two"></a>Method two</h2><p>Set the middle item as pivot.</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">def quickSort(list, <span class="built_in">start</span>, <span class="keyword">end</span>):</div><div class="line"></div><div class="line">    <span class="keyword">if</span> <span class="built_in">start</span> &gt;= <span class="keyword">end</span>:</div><div class="line">        <span class="literal">return</span> False</div><div class="line"></div><div class="line">    <span class="comment"># Set new pointers</span></div><div class="line">    left, <span class="literal">right</span> = <span class="built_in">start</span>, <span class="function"><span class="keyword">end</span></span></div><div class="line"></div><div class="line">    <span class="title">mid</span> = (<span class="title">start</span> + <span class="title">end</span>) // <span class="title">2</span></div><div class="line"></div><div class="line">    <span class="comment"># Exchange pivot and the last item,</span></div><div class="line">    <span class="comment"># in order to make the last one not to be overwrite by next step</span></div><div class="line">    <span class="comment"># As the we have a new parameter 'pivot', so we don't be afaid of being overwrite</span></div><div class="line">    <span class="comment"># Actually, it can be any other value</span></div><div class="line">    pivot = list[<span class="keyword">mid</span>]</div><div class="line">    list[<span class="keyword">mid</span>] = list[<span class="keyword">end</span>]</div><div class="line">    list[<span class="keyword">end</span>] = pivot</div><div class="line"></div><div class="line">    <span class="comment"># The following code is the similar to method one</span></div><div class="line">    <span class="comment"># But pay attention, here we start from left part,</span></div><div class="line">    <span class="comment"># Because we set the useless value to the last item,</span></div><div class="line">    <span class="comment"># which will be overwrite by a lager number from left part</span></div><div class="line">    <span class="keyword">while</span> left != <span class="literal">right</span>:</div><div class="line">        <span class="keyword">while</span> left &lt; <span class="literal">right</span> <span class="keyword">and</span> list[left] &lt;= pivot:</div><div class="line">            left += <span class="number">1</span></div><div class="line"></div><div class="line">        <span class="keyword">if</span> left &lt; <span class="literal">right</span>:</div><div class="line">            list[<span class="literal">right</span>] = list[left]</div><div class="line">            <span class="literal">right</span> -= <span class="number">1</span></div><div class="line"></div><div class="line">        <span class="keyword">while</span> left &lt; <span class="literal">right</span> <span class="keyword">and</span> list[<span class="literal">right</span>] &gt;= pivot:</div><div class="line">            <span class="literal">right</span> -= <span class="number">1</span></div><div class="line"></div><div class="line">        <span class="keyword">if</span> left &lt; <span class="literal">right</span>:</div><div class="line">            list[left] = list[<span class="literal">right</span>]</div><div class="line">            left += <span class="number">1</span></div><div class="line"></div><div class="line">    list[<span class="literal">right</span>] = pivot</div><div class="line"></div><div class="line">    quickSort(list, <span class="built_in">start</span>, <span class="literal">right</span><span class="number">-1</span>)</div><div class="line">    quickSort(list, <span class="literal">right</span>+<span class="number">1</span>, <span class="keyword">end</span>)</div><div class="line">    <span class="literal">return</span> list</div><div class="line"></div><div class="line"><span class="keyword">a</span> = [<span class="number">5</span>, <span class="number">3</span>, <span class="number">10</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">2</span>, <span class="number">8</span>]</div><div class="line"><span class="keyword">a</span> = quickSort(<span class="keyword">a</span>, <span class="number">0</span>, <span class="built_in">len</span>(<span class="keyword">a</span>)<span class="number">-1</span>)</div><div class="line">print(<span class="keyword">a</span>)</div></pre></td></tr></table></figure>
<p>Take a example:</p>
<p><img src="https://wx3.sinaimg.cn/mw690/6d184cefly1fyfxj2g1pdj21lg27ye81.jpg" alt="example"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx2.sinaimg.cn/large/6d184cefly1fvwi0uvwsmj20p0046gm8.jpg&quot; alt=&quot;Django Enviroment in Tencent Cloud Ubuntu&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Algorithm" scheme="http://laker.me/blog/categories/Algorithm/"/>
    
    
      <category term="Algorithm" scheme="http://laker.me/blog/tags/Algorithm/"/>
    
      <category term="Python" scheme="http://laker.me/blog/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Django Enviroment in Tencent Cloud Ubuntu</title>
    <link href="http://laker.me/blog/2018/12/28/18_1228_django_deployment/"/>
    <id>http://laker.me/blog/2018/12/28/18_1228_django_deployment/</id>
    <published>2018-12-28T00:24:00.000Z</published>
    <updated>2018-12-28T09:30:17.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx4.sinaimg.cn/large/6d184cefly1fxvvjn56zij20p004675r.jpg" alt="Django Enviroment in Tencent Cloud Ubuntu"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">http://laker.me/blog</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="Enviroment"><a href="#Enviroment" class="headerlink" title="Enviroment:"></a>Enviroment:</h2><ul>
<li>MacOS</li>
<li>Tencent Cloud Ubuntu 18.04</li>
<li>Python 3.6</li>
<li>Django 2.0</li>
</ul>
<h2 id="Connect-to-server"><a href="#Connect-to-server" class="headerlink" title="Connect to server"></a>Connect to server</h2><p><img src="http://wx1.sinaimg.cn/mw690/6d184cefly1fxvvjsd9nsj20qp0pcgqz.jpg" alt="Connect via SSH"></p>
<p>In MacOs, it’s very easy to connect to the server. In terminal :</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh -<span class="selector-tag">q</span> -l ubuntu -<span class="selector-tag">p</span> [port] [ip]</div></pre></td></tr></table></figure>
<p>Like <code>ssh -q -l ubuntu -p 20 188.131.***.***</code>.</p>
<p>Login with password.</p>
<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><p>In Ubuntu18.04, there are two versions of Pyhton: 2.7 and 3.6. The default version is 2.7, If you don’t want to change, then skip following steps.</p>
<p>Alter to python3.6:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo <span class="keyword">update</span>-alternatives --install /usr/bin/<span class="keyword">python</span> <span class="keyword">python</span> /usr/bin/python2 <span class="number">100</span></div><div class="line">$ sudo <span class="keyword">update</span>-alternatives --install /usr/bin/<span class="keyword">python</span> <span class="keyword">python</span> /usr/bin/<span class="keyword">python3</span> <span class="number">150</span></div></pre></td></tr></table></figure>
<p>Check whether it successes:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ python --version</div><div class="line">Python <span class="number">3.6</span><span class="number">.7</span></div></pre></td></tr></table></figure>
<h2 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h2><p>Install pip:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> sudo apt install python3-pip</span></div></pre></td></tr></table></figure>
<p>Check whether it successes:</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ pip --version</div><div class="line">pip <span class="number">9.0</span>.<span class="number">1</span> from /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">python3</span>/<span class="title">dist</span>-<span class="title">packages</span> (<span class="title">python</span> 3.6)</span></div></pre></td></tr></table></figure>
<p>Install specific Django version :</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo pip install Django==<span class="number">2.1</span><span class="number">.2</span></div></pre></td></tr></table></figure>
<p>Create a project</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="title">cd</span> /<span class="class"><span class="keyword">data</span></span></div><div class="line"><span class="title">sudo</span> django-admin startproject helloworld</div></pre></td></tr></table></figure>
<p>Modify the write permission for everyone :</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chmod <span class="number">666</span> <span class="regexp">/data/</span>helloworld<span class="regexp">/helloworld/</span>settings.py</div></pre></td></tr></table></figure>
<p>Edit the settings:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> helloworld/helloworld/</span></div><div class="line"><span class="meta">$</span><span class="bash"> vim settings.py</span></div></pre></td></tr></table></figure>
<p>Add your IP in <code>ALLOWED_HOSTS = []</code> to  <code>ALLOWED_HOSTS = [&quot;188.131.***.***&quot;]</code></p>
<p>Save and quit vim:<br><figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">:wq</span></div></pre></td></tr></table></figure></p>
<p>Open port 8080 in Baota Panel:</p>
<p><img src="https://wx1.sinaimg.cn/mw690/6d184cefly1fyml7c32q7j20ym0aajt1.jpg" alt="Open port 808"></p>
<p>Or set in Tencent Cloud:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxvvdovl3oj21080ikade.jpg" alt="Open port 808"></p>
<p>Run the project :</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ../</span></div><div class="line"><span class="meta">$</span><span class="bash"> sudo python manage.py runserver 0.0.0.0:8080</span></div></pre></td></tr></table></figure>
<p>Visit the website:</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fxvvdvmaklj216o0qqdie.jpg" alt="website"></p>
<p>Reference:<br><a href="https://www.bt.cn/bbs/thread-8889-1-3.html" target="_blank" rel="external">ubuntu + nginx + uwsgi + django(python3)</a><br><a href="https://www.cnblogs.com/dalanjing/p/8636338.html" target="_blank" rel="external">python3+Django</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx4.sinaimg.cn/large/6d184cefly1fxvvjn56zij20p004675r.jpg&quot; alt=&quot;Django Enviroment in Tencent Cloud Ubuntu&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="http://laker.me/blog/categories/Python/"/>
    
    
      <category term="Server" scheme="http://laker.me/blog/tags/Server/"/>
    
      <category term="Tencent Cloud" scheme="http://laker.me/blog/tags/Tencent-Cloud/"/>
    
      <category term="MySql" scheme="http://laker.me/blog/tags/MySql/"/>
    
      <category term="Python" scheme="http://laker.me/blog/tags/Python/"/>
    
      <category term="Django" scheme="http://laker.me/blog/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>Use ThinkPHP Develope API</title>
    <link href="http://laker.me/blog/2018/12/19/18_1219_wechat/"/>
    <id>http://laker.me/blog/2018/12/19/18_1219_wechat/</id>
    <published>2018-12-19T00:24:00.000Z</published>
    <updated>2018-12-22T11:42:21.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx3.sinaimg.cn/large/6d184cefly1fxnkwr63qej20oz046aay.jpg" alt="Use ThinkPHP Develope WeChat Official Account API"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">http://laker.me/blog</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="Create-database-data"><a href="#Create-database-data" class="headerlink" title="Create database data"></a>Create database data</h2><p>Import this sql file into your database, you can commit execute sql or import by tools:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">-- Table structure for news</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`news`</span>;</div><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`news`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">10</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</div><div class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`content`</span> <span class="built_in">text</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</div><div class="line">) <span class="keyword">ENGINE</span>=MyISAM AUTO_INCREMENT=<span class="number">5</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COMMENT</span>=<span class="string">'新闻表'</span>;</div><div class="line"></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="comment">-- Records of news</span></div><div class="line"><span class="comment">-- ----------------------------</span></div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`news`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'新闻1'</span>, <span class="string">'新闻1内容'</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`news`</span> <span class="keyword">VALUES</span> (<span class="string">'2'</span>, <span class="string">'新闻2'</span>, <span class="string">'新闻2内容'</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`news`</span> <span class="keyword">VALUES</span> (<span class="string">'3'</span>, <span class="string">'新闻3'</span>, <span class="string">'新闻3内容'</span>);</div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`news`</span> <span class="keyword">VALUES</span> (<span class="string">'4'</span>, <span class="string">'房价又涨了'</span>, <span class="string">'据新华社消息：上海均价环比上涨5%'</span>);</div></pre></td></tr></table></figure>
<h2 id="Write-API"><a href="#Write-API" class="headerlink" title="Write API"></a>Write API</h2><p>Wechat Official Account documents:<br><a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421140840" target="_blank" rel="external">https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421140840</a></p>
<p><img src="https://ws4.sinaimg.cn/large/6d184cefly1fyfor5rxodj20io0bw0tk.jpg" alt="image"></p>
<p>New files: <code>application/api/controller/News.php</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">api</span>\<span class="title">controller</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Controller</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">News</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">read</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        $id = input(<span class="string">'id'</span>);</div><div class="line">        $model = model(<span class="string">'News'</span>);</div><div class="line">        $data = $model-&gt;getNews($id);</div><div class="line">        <span class="keyword">if</span> ($data) &#123;</div><div class="line">            $code = <span class="number">200</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            $code = <span class="number">404</span>;</div><div class="line">        &#125;</div><div class="line">        $data = [</div><div class="line">            <span class="string">'code'</span> =&gt; $code,</div><div class="line">            <span class="string">'data'</span> =&gt; $data</div><div class="line">        ];</div><div class="line">        <span class="keyword">return</span> json($data);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>New files: <code>application/api/model/News.php</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">api</span>\<span class="title">model</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Model</span>;</div><div class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Db</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">News</span> <span class="keyword">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getNews</span><span class="params">($id = <span class="number">1</span>)</span></span></div><div class="line">    &#123;</div><div class="line">        $res = Db::name(<span class="string">'news'</span>)-&gt;where(<span class="string">'id'</span>, $id)-&gt;select();</div><div class="line">        <span class="keyword">return</span> $res;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getNewsList</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        $res = Db::name(<span class="string">'news'</span>)-&gt;select();</div><div class="line">        <span class="keyword">return</span> $res;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Visit API:</p>
<p><img src="https://ws2.sinaimg.cn/large/6d184cefly1fyfqyhq1sij213q050gmr.jpg" alt="image"></p>
<h2 id="Shorten-API-address"><a href="#Shorten-API-address" class="headerlink" title="Shorten API address"></a>Shorten API address</h2><p>According to the ThinkPHP router rules, we can edit it in <code>application/route.php</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Route</span>;</div><div class="line"></div><div class="line">Route::rule(<span class="string">'news/:id'</span>,<span class="string">'api/news/read'</span>);</div></pre></td></tr></table></figure>
<p>Visit new route:</p>
<p><img src="https://ws4.sinaimg.cn/large/6d184cefly1fyfqyznk0vj2136044my6.jpg" alt="image"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx3.sinaimg.cn/large/6d184cefly1fxnkwr63qej20oz046aay.jpg&quot; alt=&quot;Use ThinkPHP Develope WeChat Official Account API&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Server" scheme="http://laker.me/blog/categories/Server/"/>
    
    
      <category term="Server" scheme="http://laker.me/blog/tags/Server/"/>
    
      <category term="PHP" scheme="http://laker.me/blog/tags/PHP/"/>
    
      <category term="Tencent Cloud" scheme="http://laker.me/blog/tags/Tencent-Cloud/"/>
    
      <category term="ThinkPHP" scheme="http://laker.me/blog/tags/ThinkPHP/"/>
    
      <category term="MySql" scheme="http://laker.me/blog/tags/MySql/"/>
    
  </entry>
  
  <entry>
    <title>WeChat Official Accounts with Access_token and Menu</title>
    <link href="http://laker.me/blog/2018/12/05/18_1205_wechat/"/>
    <id>http://laker.me/blog/2018/12/05/18_1205_wechat/</id>
    <published>2018-12-05T00:24:00.000Z</published>
    <updated>2018-12-05T07:16:31.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx2.sinaimg.cn/large/6d184cefly1fxnkwi98vuj20p0046dg6.jpg" alt="WeChat Official Accounts: Access_token and Menu"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">laker.me</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="Get-Access-token"><a href="#Get-Access-token" class="headerlink" title="Get Access_token"></a>Get Access_token</h2><p>Add your Official Accounts appID and appsecret to get access_token, and remember it.</p>
<p><a href="https://mp.weixin.qq.com/debug/cgi-bin/apiinfo?t=index&amp;type=%E5%9F%BA%E7%A1%80%E6%94%AF%E6%8C%81&amp;form=%E8%8E%B7%E5%8F%96access_token%E6%8E%A5%E5%8F%A3%20/token" target="_blank" rel="external">https://mp.weixin.qq.com/debug/cgi-bin/apiinfo?t=index&amp;type=%E5%9F%BA%E7%A1%80%E6%94%AF%E6%8C%81&amp;form=%E8%8E%B7%E5%8F%96access_token%E6%8E%A5%E5%8F%A3%20/token</a></p>
<p>In your database, new a table using this sql code,  and modify your Official Accounts appID, appsecret and access_token in <code>&#39;your_appid&#39;, &#39;your_appsecret&#39;, &#39;your_access_token&#39;</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">`wxtoken`</span> (</div><div class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`appid`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`appsecret`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`access_token`</span> <span class="built_in">varchar</span>(<span class="number">1024</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`AccessExpires`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</div><div class="line">  <span class="string">`TIMESTAMP`</span> <span class="keyword">timestamp</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span></div><div class="line">    ) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">1</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`wxtoken`</span> (<span class="string">`id`</span>, <span class="string">`appid`</span>, <span class="string">`appsecret`</span>, <span class="string">`access_token`</span>, <span class="string">`AccessExpires`</span>, <span class="string">`TIMESTAMP`</span>) <span class="keyword">VALUES</span></div><div class="line">(<span class="number">1</span>, <span class="string">'your_appid'</span>, <span class="string">'your_appsecret'</span>, <span class="string">'your_access_token'</span>, <span class="number">1543244037</span>, <span class="string">'2018-11-26 12:53:57'</span>);</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`wxtoken`</span></div><div class="line">  <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>);</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`wxtoken`</span></div><div class="line">  <span class="keyword">MODIFY</span> <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,AUTO_INCREMENT=<span class="number">2</span>;</div></pre></td></tr></table></figure>
<p>And a <code>wx</code> directory in ThinkPHP project: </p>
<p><img src="http://wx3.sinaimg.cn/mw690/6d184cefly1fxnhyj36c1j20j20hodh5.jpg" alt="wx directory"></p>
<p>New a <code>controller</code> directory and <code>index.php</code>:</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fxnhypexuij20je0d2jsg.jpg" alt="controller"></p>
<p>Add this code to <code>Index.php</code>, and modify your Official Accounts appID and appsecret in <code>&quot;你的公众号appid&quot;,&quot;你的公众号appsecret&quot;</code> :</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    $access_token = <span class="keyword">$this</span>-&gt;getToken();</div><div class="line">    <span class="keyword">echo</span> $access_token;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getToken</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;checkAccessToken(<span class="string">"你的公众号appid"</span>,<span class="string">"你的公众号appsecret"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkAccessToken</span><span class="params">($appid,$appsecret)</span></span>&#123;</div><div class="line">    $condition = <span class="keyword">array</span>(<span class="string">'appid'</span>=&gt;$appid,<span class="string">'appsecret'</span>=&gt;$appsecret);</div><div class="line">    $access_token_set=DB(<span class="string">'wxtoken'</span>)-&gt;where($condition)-&gt;find();<span class="comment">//获取数据</span></div><div class="line"></div><div class="line">    <span class="keyword">if</span>($access_token_set)&#123;</div><div class="line">        <span class="comment">//检查是否超时，超时了重新获取</span></div><div class="line">        <span class="keyword">if</span>($access_token_set[<span class="string">'AccessExpires'</span>]&gt;time())&#123;</div><div class="line">            <span class="comment">//未超时，直接返回access_token</span></div><div class="line">            <span class="keyword">return</span> $access_token_set[<span class="string">'access_token'</span>];</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="comment">//已超时，重新获取</span></div><div class="line">            $url_get=<span class="string">'https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid='</span>.$appid.<span class="string">'&amp;secret='</span>.$appsecret;</div><div class="line">            $json= <span class="keyword">$this</span>-&gt;https_request($url_get);</div><div class="line">            var_dump($json);</div><div class="line">            $access_token=$json[<span class="string">'access_token'</span>];</div><div class="line">            $AccessExpires=time()+intval($json[<span class="string">'expires_in'</span>]);</div><div class="line">            $data[<span class="string">'access_token'</span>]=$access_token;</div><div class="line">            $data[<span class="string">'AccessExpires'</span>]=$AccessExpires;</div><div class="line">            $result = DB(<span class="string">'wxtoken'</span>)-&gt;where($condition)-&gt;update($data);<span class="comment">//更新数据</span></div><div class="line">            <span class="keyword">if</span>($result)&#123;</div><div class="line">                <span class="keyword">return</span> $access_token;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                <span class="keyword">return</span> $access_token;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">echo</span> <span class="string">"appid或appsecret不正确"</span>;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">https_request</span> <span class="params">($url)</span></span>&#123;</div><div class="line">    $ch = curl_init();</div><div class="line">    curl_setopt($ch, CURLOPT_URL, $url);</div><div class="line">    curl_setopt($ch,CURLOPT_RETURNTRANSFER,<span class="number">1</span>);</div><div class="line">    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, <span class="keyword">false</span>);</div><div class="line">    $out = curl_exec($ch);</div><div class="line">    curl_close($ch);</div><div class="line">    <span class="keyword">return</span>  json_decode($out,<span class="keyword">true</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://wx3.sinaimg.cn/mw690/6d184cefly1fxnhz2j3s1j20j40cugn4.jpg" alt="Code"></p>
<p>Visit your api: </p>
<p><img src="http://wx3.sinaimg.cn/mw690/6d184cefly1fxnhyvioa8j217206sgov.jpg" alt="Visit"></p>
<h2 id="Create-a-menu-in-Official-Accounts"><a href="#Create-a-menu-in-Official-Accounts" class="headerlink" title="Create a menu in Official Accounts"></a>Create a menu in Official Accounts</h2><p>Modify <code>index()</code>:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    $menu = <span class="keyword">$this</span>-&gt;createmenu();</div><div class="line">    <span class="keyword">echo</span> $menu;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Add this code into <code>index.php</code></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">public function createmenu()&#123;</div><div class="line">  <span class="variable">$data</span>='&#123;</div><div class="line">   <span class="string">"button"</span>:[</div><div class="line">   &#123;</div><div class="line">        <span class="string">"type"</span>:<span class="string">"click"</span>,</div><div class="line">        <span class="string">"name"</span>:<span class="string">"今日歌曲1"</span>,</div><div class="line">        <span class="string">"key"</span>:<span class="string">"V1001_TODAY_MUSIC"</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">         <span class="string">"name"</span>:<span class="string">"菜单"</span>,</div><div class="line">         <span class="string">"sub_button"</span>:[</div><div class="line">         &#123;</div><div class="line">             <span class="string">"type"</span>:<span class="string">"view"</span>,</div><div class="line">             <span class="string">"name"</span>:<span class="string">"搜索"</span>,</div><div class="line">             <span class="string">"url"</span>:<span class="string">"http://www.soso.com/"</span></div><div class="line">          &#125;,</div><div class="line">          &#123;</div><div class="line">             <span class="string">"type"</span>:<span class="string">"click"</span>,</div><div class="line">             <span class="string">"name"</span>:<span class="string">"赞一下我们"</span>,</div><div class="line">             <span class="string">"key"</span>:<span class="string">"V1001_GOOD"</span></div><div class="line">          &#125;]</div><div class="line">     &#125;]</div><div class="line">  &#125;';</div><div class="line">  <span class="variable">$access_token</span>=<span class="variable">$this</span>-&gt;<span class="keyword">getToken</span>();</div><div class="line">  <span class="variable">$url</span>='https:<span class="comment">//api.weixin.qq.com/cgi-bin/menu/create?access_token='.$access_token;</span></div><div class="line">  var_dump(<span class="variable">$url</span>);</div><div class="line">  var_dump(<span class="variable">$data</span>);</div><div class="line">  <span class="variable">$result</span>= <span class="variable">$this</span>-&gt;postcurl(<span class="variable">$url</span>,<span class="variable">$data</span>);</div><div class="line">  var_dump(<span class="variable">$result</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">function postcurl(<span class="variable">$url</span>,<span class="variable">$data</span> = null)&#123;</div><div class="line">    <span class="variable">$ch</span> = curl_init();</div><div class="line">    curl_setopt(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</div><div class="line">    curl_setopt(<span class="variable">$ch</span>, CURLOPT_SSL_VERIFYPEER, FALSE);</div><div class="line">    curl_setopt(<span class="variable">$ch</span>, CURLOPT_SSL_VERIFYHOST, FALSE);</div><div class="line">    <span class="keyword">if</span> (!empty(<span class="variable">$data</span>))&#123;</div><div class="line">        curl_setopt(<span class="variable">$ch</span>, CURLOPT_POST, TRUE);</div><div class="line">        curl_setopt(<span class="variable">$ch</span>, CURLOPT_POSTFIELDS, <span class="variable">$data</span>);</div><div class="line">    &#125;</div><div class="line">    curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, 1);</div><div class="line">    <span class="variable">$output</span> = curl_exec(<span class="variable">$ch</span>);</div><div class="line">    curl_close(<span class="variable">$ch</span>);</div><div class="line">    <span class="keyword">return</span>  <span class="variable">$output</span>=json_decode(<span class="variable">$output</span>,true);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Visit the api <code>/index.php/wx/index/index</code>:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxnhzb9vddj210007ugoe.jpg" alt="Visit"></p>
<p>Visit the Official Account:</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fxni2kkiicj20u01femyj.jpg" alt="Visit"></p>
<h2 id="Get-user-data"><a href="#Get-user-data" class="headerlink" title="Get user data"></a>Get user data</h2><p>Modify <code>index()</code>:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    $data = <span class="keyword">$this</span>-&gt;getuser();</div><div class="line">    <span class="keyword">echo</span> $data;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Add this code into <code>index.php</code>:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getuser</span><span class="params">()</span></span>&#123;</div><div class="line">     $access_token=<span class="keyword">$this</span>-&gt;getToken();</div><div class="line">     $url_get=<span class="string">'https://api.weixin.qq.com/cgi-bin/user/get?access_token='</span>.$access_token;</div><div class="line">     $user_json= <span class="keyword">$this</span>-&gt;https_request($url_get);</div><div class="line">     <span class="comment">//var_dump($json);</span></div><div class="line">     $url_get=<span class="string">'https://api.weixin.qq.com/cgi-bin/user/info?access_token='</span>.$access_token.<span class="string">'&amp;openid='</span>.$user_json[<span class="string">'data'</span>][<span class="string">'openid'</span>][<span class="number">0</span>].<span class="string">'&amp;lang=zh_CN'</span>;</div><div class="line">     $user_info= <span class="keyword">$this</span>-&gt;https_request($url_get);</div><div class="line">     var_dump($user_info);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Visit the api <code>/index.php/wx/index/index</code>:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxnhzb9vddj210007ugoe.jpg" alt="Visit"></p>
<p>在此输入正文</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx2.sinaimg.cn/large/6d184cefly1fxnkwi98vuj20p0046dg6.jpg&quot; alt=&quot;WeChat Official Accounts: Access_token and Menu&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Server" scheme="http://laker.me/blog/categories/Server/"/>
    
    
      <category term="Server" scheme="http://laker.me/blog/tags/Server/"/>
    
      <category term="PHP" scheme="http://laker.me/blog/tags/PHP/"/>
    
      <category term="Tencent Cloud" scheme="http://laker.me/blog/tags/Tencent-Cloud/"/>
    
      <category term="ThinkPHP" scheme="http://laker.me/blog/tags/ThinkPHP/"/>
    
      <category term="MySql" scheme="http://laker.me/blog/tags/MySql/"/>
    
      <category term="Wechat" scheme="http://laker.me/blog/tags/Wechat/"/>
    
  </entry>
  
  <entry>
    <title>MySql and Navicat in MacOS</title>
    <link href="http://laker.me/blog/2018/11/28/18_1128_mysql_navicat/"/>
    <id>http://laker.me/blog/2018/11/28/18_1128_mysql_navicat/</id>
    <published>2018-11-28T00:24:00.000Z</published>
    <updated>2018-11-28T03:06:10.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx3.sinaimg.cn/large/6d184cefly1fxnkwna76bj20oz0460tc.jpg" alt="MySql and Navicat in MacOS"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">laker.me</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="Install-MySql"><a href="#Install-MySql" class="headerlink" title="Install MySql"></a>Install MySql</h2><h3 id="Method-one"><a href="#Method-one" class="headerlink" title="Method one"></a>Method one</h3><p>Download the installation file, choose the dmg file: </p>
<p><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="external">https://dev.mysql.com/downloads/mysql/</a></p>
<p>Then install the package step by step.</p>
<h3 id="Method-two"><a href="#Method-two" class="headerlink" title="Method two"></a>Method two</h3><p>Install by command line:</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">brew </span><span class="keyword">install </span>mysql</div></pre></td></tr></table></figure>
<h2 id="Start-MySql"><a href="#Start-MySql" class="headerlink" title="Start MySql"></a>Start MySql</h2><h3 id="Add-system-enviroment"><a href="#Add-system-enviroment" class="headerlink" title="Add system enviroment"></a>Add system enviroment</h3><p>Open terminal, I use zsh, so I edit zsh_profile, if you use bash, edit your bash_profile:</p>
<pre><code>$ vim ~/.zsh_profile
</code></pre><p>Add zsh_profile </p>
<pre><code>$ source ~/.zsh_profile
</code></pre><h3 id="Login-database"><a href="#Login-database" class="headerlink" title="Login database"></a>Login database</h3><p>Your can use GUI to start or stop sever in system preference :</p>
<p><img src="http://wx1.sinaimg.cn/mw690/6d184cefly1fxfofwpamfj20l40iyacu.jpg" alt="manage"></p>
<p>Or use command line.</p>
<h2 id="Connect-to-Navicat"><a href="#Connect-to-Navicat" class="headerlink" title="Connect to Navicat"></a>Connect to Navicat</h2><p>New MySQL connection:</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fxfohrr6lfj20ri06ujtq.jpg" alt="connection"></p>
<p>Set a name and add password:</p>
<p><img src="http://wx1.sinaimg.cn/mw690/6d184cefly1fxfohwj7nhj20qs0fy0uu.jpg" alt="config"></p>
<p>Done:</p>
<p><img src="http://wx3.sinaimg.cn/mw690/6d184cefly1fxfoi4e542j20bg07yjs8.jpg" alt="success"></p>
<h2 id="Import-sql-file"><a href="#Import-sql-file" class="headerlink" title="Import sql file:"></a>Import sql file:</h2><p>Import sql file:</p>
<p><img src="http://wx3.sinaimg.cn/mw690/6d184cefly1fxfog0c1x5j20fo0hegnq.jpg" alt="Import"></p>
<p>Done, I uesd about 30 minutes to import 2kw items, much faster than my classmates, most of them cost several hours :</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fxnkomn3fmj20go0bj3zq.jpg" alt="Done"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx3.sinaimg.cn/large/6d184cefly1fxnkwna76bj20oz0460tc.jpg&quot; alt=&quot;MySql and Navicat in MacOS&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="SQL" scheme="http://laker.me/blog/categories/SQL/"/>
    
    
      <category term="Server" scheme="http://laker.me/blog/tags/Server/"/>
    
      <category term="MySql" scheme="http://laker.me/blog/tags/MySql/"/>
    
      <category term="Navicat" scheme="http://laker.me/blog/tags/Navicat/"/>
    
  </entry>
  
  <entry>
    <title>Develope WeChat Official Account&#39;s Hello Message</title>
    <link href="http://laker.me/blog/2018/11/25/18_1125_wechat_hello/"/>
    <id>http://laker.me/blog/2018/11/25/18_1125_wechat_hello/</id>
    <published>2018-11-25T00:24:00.000Z</published>
    <updated>2018-11-28T02:58:34.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx2.sinaimg.cn/large/6d184cefly1fxnkwi98vuj20p0046dg6.jpg" alt="Develope WeChat Official Account&#39;s Hello Message"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">laker.me</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="Apply-test-account"><a href="#Apply-test-account" class="headerlink" title="Apply test account"></a>Apply test account</h2><p>Apply for Wechat testing account:</p>
<p><a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421137524" target="_blank" rel="external">https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421137524</a></p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fxetxsngt1j20x40hqdif.jpg" alt="Application"></p>
<h2 id="Connect-WeChat-server-with"><a href="#Connect-WeChat-server-with" class="headerlink" title="Connect WeChat server with"></a>Connect WeChat server with</h2><p>Enter your testing account, and set your server address and the director <code>wx</code> for WeChat server. Set a token name what ever you like: </p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fxev12r26ej20jq0boq3p.jpg" alt="token name"></p>
<p>Enter your Baota Panel, new a file <code>wx</code> in <code>application/public/</code></p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxeycapacwj20q00faabs.jpg" alt="Baota Panel"></p>
<p>Add a new file  <code>index.php</code> in <code>wx</code></p>
<p>Function:</p>
<ul>
<li>Connect to WeChat server</li>
<li>When someone subscribes, reply a hello message</li>
<li>When get user text messge, reply what he sent</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line">    <span class="comment">/*</span></div><div class="line">    * Connect to WeChat server</div><div class="line">    */</div><div class="line">    <span class="comment">// Get signature nonce token timestamp echostr</span></div><div class="line">    $nonce     = $_GET[<span class="string">'nonce'</span>];</div><div class="line">    $token     = <span class="string">'YOUR_TOKEN'</span>;</div><div class="line">    $timestamp = $_GET[<span class="string">'timestamp'</span>];</div><div class="line">    $echostr   = $_GET[<span class="string">'echostr'</span>];</div><div class="line">    $signature = $_GET[<span class="string">'signature'</span>];</div><div class="line">    <span class="comment">// Set it as array, and sort</span></div><div class="line">    $array = <span class="keyword">array</span>();</div><div class="line">    $array = <span class="keyword">array</span>($nonce, $timestamp, $token);</div><div class="line">    sort($array);</div><div class="line">    <span class="comment">// Join them as a string, use sha1 to encrypt, and check with signature</span></div><div class="line">    $str = sha1( implode( $array ) );</div><div class="line">    </div><div class="line">    <span class="comment">//The first time weixin api</span></div><div class="line">    <span class="keyword">if</span>( $str == $signature &amp;&amp; $echostr )&#123;</div><div class="line">        <span class="keyword">echo</span>  $echostr;</div><div class="line">        <span class="keyword">exit</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">/*</span></div><div class="line">        * When someone subscribes, reply a hello message</div><div class="line">        */</div><div class="line">        <span class="comment">// 1. Get the posted xml data from Weixin</span></div><div class="line">        $postArr = $GLOBALS[<span class="string">'HTTP_RAW_POST_DATA'</span>];</div><div class="line">        <span class="comment">// 2. Deal with message type and set reply type and content</span></div><div class="line">        $postObj = simplexml_load_string( $postArr );</div><div class="line">        <span class="comment">// Check if the data is subscription event</span></div><div class="line">        <span class="keyword">if</span>( strtolower( $postObj-&gt;MsgType) == <span class="string">'event'</span>)&#123;</div><div class="line">            <span class="comment">// If it'is subscribe event</span></div><div class="line">            <span class="keyword">if</span>( strtolower($postObj-&gt;Event == <span class="string">'subscribe'</span>) )&#123;</div><div class="line">                <span class="comment">// Reply text message </span></div><div class="line">                $toUser   = $postObj-&gt;FromUserName;</div><div class="line">                $fromUser = $postObj-&gt;ToUserName;</div><div class="line">                $time     = time();</div><div class="line">                $msgType  =  <span class="string">'text'</span>;</div><div class="line">                $content  = <span class="string">'Hello, welcome~ '</span>.$postObj-&gt;FromUserName.<span class="string">'-'</span>.$postObj-&gt;ToUserName;;</div><div class="line">                $template = <span class="string">"&lt;xml&gt;</span></div><div class="line">                                &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;</div><div class="line">                                &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;</div><div class="line">                                &lt;CreateTime&gt;%s&lt;/CreateTime&gt;</div><div class="line">                                &lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;</div><div class="line">                                &lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;</div><div class="line">                                &lt;/xml&gt;";</div><div class="line">                $info     = sprintf($template, $toUser, $fromUser, $time, $msgType, $content);</div><div class="line">                <span class="keyword">echo</span> $info;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">/*</span></div><div class="line">        * When get user text messge, reply what he sent</div><div class="line">        */</div><div class="line">        <span class="comment">// Check if the data is text</span></div><div class="line">        <span class="keyword">if</span>( strtolower( $postObj-&gt;MsgType) == <span class="string">'text'</span>)&#123;</div><div class="line">             <span class="comment">// Get text message</span></div><div class="line">        $content = $postObj-&gt;Content;</div><div class="line">                <span class="comment">// Reply text message </span></div><div class="line">                $toUser   = $postObj-&gt;FromUserName;</div><div class="line">                $fromUser = $postObj-&gt;ToUserName;</div><div class="line">                $time     = time();</div><div class="line">                $msgType  =  <span class="string">'text'</span>;</div><div class="line">                $content  = <span class="string">'The content you sent is '</span>.$content;</div><div class="line">                $template = <span class="string">"&lt;xml&gt;</span></div><div class="line">                                &lt;ToUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/ToUserName&gt;</div><div class="line">                                &lt;FromUserName&gt;&lt;![CDATA[%s]]&gt;&lt;/FromUserName&gt;</div><div class="line">                                &lt;CreateTime&gt;%s&lt;/CreateTime&gt;</div><div class="line">                                &lt;MsgType&gt;&lt;![CDATA[%s]]&gt;&lt;/MsgType&gt;</div><div class="line">                                &lt;Content&gt;&lt;![CDATA[%s]]&gt;&lt;/Content&gt;</div><div class="line">                                &lt;/xml&gt;";</div><div class="line">                $info     = sprintf($template, $toUser, $fromUser, $time, $msgType, $content);</div><div class="line">                <span class="keyword">echo</span> $info;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>In  Official Accounts，when you subscibe, it will say hello to you . When you send a text, it will send what you sent:</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fxnj4rdnwbj20u00w1jvy.jpg" alt="Done"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx2.sinaimg.cn/large/6d184cefly1fxnkwi98vuj20p0046dg6.jpg&quot; alt=&quot;Develope WeChat Official Account&amp;#39;s Hello Message&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Server" scheme="http://laker.me/blog/categories/Server/"/>
    
    
      <category term="Server" scheme="http://laker.me/blog/tags/Server/"/>
    
      <category term="PHP" scheme="http://laker.me/blog/tags/PHP/"/>
    
      <category term="Tencent Cloud" scheme="http://laker.me/blog/tags/Tencent-Cloud/"/>
    
      <category term="ThinkPHP" scheme="http://laker.me/blog/tags/ThinkPHP/"/>
    
      <category term="MySql" scheme="http://laker.me/blog/tags/MySql/"/>
    
      <category term="Wechat" scheme="http://laker.me/blog/tags/Wechat/"/>
    
  </entry>
  
  <entry>
    <title>Install ThinkPHP in Tencent Cloud</title>
    <link href="http://laker.me/blog/2018/11/20/18_1120_thinkphp_mysql/"/>
    <id>http://laker.me/blog/2018/11/20/18_1120_thinkphp_mysql/</id>
    <published>2018-11-20T00:24:00.000Z</published>
    <updated>2018-11-20T15:26:22.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx4.sinaimg.cn/large/6d184cefly1fx7m4l3l8sj20p0046wf0.jpg" alt="Tencent Cloud and Baota Panel"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">laker.me</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Install ThinkPHP 5 in Baota Panel:</p>
<p><img src="http://wx1.sinaimg.cn/mw690/6d184cefly1fxev3h4cgsj20vp0nu78l.jpg" alt="ThinkPHP"></p>
<p>Choose ThinkPHP</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxetszitejj21k40muag8.jpg" alt="ThinkPHP"></p>
<p>Add your server infomation:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxettd9s42j20tw0pc76n.jpg" alt="server infomation"></p>
<p>Finish installation</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fxettjiz72j20oo0bgmyu.jpg" alt="Finish"></p>
<p>You can visit your website now:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxettow4m5j20xk0m241h.jpg" alt="visit"></p>
<p>You can edit the welcome message:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxetubwd72j216o0hs40u.jpg" alt="edit"></p>
<h2 id="Create-a-database-table"><a href="#Create-a-database-table" class="headerlink" title="Create a database table"></a>Create a database table</h2><p>Manage your database:</p>
<p><img src="http://wx2.sinaimg.cn/large/6d184cefly1fxetup3k4pj21sa0daad4.jpg" alt="database"></p>
<p>Enter phpMyadmin:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxetuyfimpj21560gun16.jpg" alt="phpMyadmin"></p>
<p>Create a user table:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxetv7rxffj20pl0el41v.jpg" alt="user table"></p>
<p>Insert  a data for admin user:</p>
<ul>
<li>name: admin</li>
<li>pwd: 21232f297a57a5a743894a0e4a801c3 (admin)</li>
</ul>
<h2 id="Create-a-login-page"><a href="#Create-a-login-page" class="headerlink" title="Create a login page"></a>Create a login page</h2><p>Connect ThinkPHP to database:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxetvu2j4ej20te0lk78l.jpg" alt="Connect"></p>
<p>Edit config file for debug pattern:</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fxetwn4el5j20v40jkwhw.jpg" alt="config"></p>
<p>Add a view file:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fxetwdrbq2j20le0ewq4d.jpg" alt="view"></p>
<p><code>application/index/view/login/index.html</code></p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="meta">&lt;!DOCTYPE html&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login system<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/static/bootstrap/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"> </div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">"gray-bg"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-7"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ibox float-e-margins"</span>&gt;</span>            </div><div class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ibox-content"</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">                      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-6 b-r"</span>&gt;</span></div><div class="line">                          <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"m-t-none m-b"</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">                          <span class="tag">&lt;<span class="name">p</span>&gt;</span>Welcome (⊙o⊙)<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                          <span class="tag">&lt;<span class="name">form</span> <span class="attr">role</span>=<span class="string">"form"</span> <span class="attr">action</span>=<span class="string">"</span></span><span class="template-variable">&#123;:url('login/dologin')&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span></div><div class="line">                              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></div><div class="line">                                  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Useranme<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                                  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"Input your name"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"user_name"</span>&gt;</span></div><div class="line">                              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></div><div class="line">                                  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                                  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"Input your password"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"user_pwd"</span>&gt;</span></div><div class="line">                              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                              <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">                                  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-sm btn-primary pull-right m-t-n-xs"</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></div><div class="line">                                  <span class="tag">&lt;/<span class="name">button</span>&gt;</span>                                </div><div class="line">                              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                          <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">                      <span class="tag">&lt;/<span class="name">div</span>&gt;</span>                     </div><div class="line">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/static/js/jquery.min.js?v=2.1.4"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/static/bootstrap/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Add controller Login:<br><code>application/index/controller/Login.php</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"><span class="keyword">namespace</span> <span class="title">app</span>\<span class="title">index</span>\<span class="title">controller</span>;</div><div class="line"> </div><div class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Controller</span>;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Login</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">    <span class="comment">// Deal with login</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;fetch();</div><div class="line">      </div><div class="line">    &#125; </div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">doLogin</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      $param = input(<span class="string">'post.'</span>);</div><div class="line">      <span class="keyword">if</span>(<span class="keyword">empty</span>($param[<span class="string">'user_name'</span>]))&#123;</div><div class="line">        </div><div class="line">        <span class="keyword">$this</span>-&gt;error(<span class="string">'Username can'</span>t be <span class="keyword">null</span><span class="string">');</span></div><div class="line">      &#125;</div><div class="line">      </div><div class="line">      if(empty($param['user_pwd<span class="string">']))&#123;</span></div><div class="line">        </div><div class="line">        $this-&gt;error('Password can<span class="string">'t be null'</span>);</div><div class="line">      &#125;</div><div class="line">      </div><div class="line">      <span class="comment">// Check username</span></div><div class="line">      $has = db(<span class="string">'users'</span>)-&gt;where(<span class="string">'user_name'</span>, $param[<span class="string">'user_name'</span>])-&gt;find();</div><div class="line">      <span class="keyword">if</span>(<span class="keyword">empty</span>($has))&#123;</div><div class="line">        </div><div class="line">        <span class="keyword">$this</span>-&gt;error(<span class="string">'Usename or password is wrong'</span>);</div><div class="line">      &#125;</div><div class="line">      </div><div class="line">      <span class="comment">// Check password</span></div><div class="line">      <span class="keyword">if</span>($has[<span class="string">'user_pwd'</span>] != md5($param[<span class="string">'user_pwd'</span>]))&#123;</div><div class="line">        </div><div class="line">        <span class="keyword">$this</span>-&gt;error(<span class="string">'Usename or password is wrong'</span>);</div><div class="line">      &#125;</div><div class="line">      </div><div class="line">      <span class="comment">// Remember the user infomation</span></div><div class="line">      cookie(<span class="string">'user_id'</span>, $has[<span class="string">'id'</span>], <span class="number">3600</span>);  <span class="comment">// One month's validity period</span></div><div class="line">      cookie(<span class="string">'user_name'</span>, $has[<span class="string">'user_name'</span>], <span class="number">3600</span>);</div><div class="line">      </div><div class="line">      <span class="keyword">$this</span>-&gt;redirect(url(<span class="string">'index/index'</span>));</div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Visit：</p>
<p><img src="http://wx3.sinaimg.cn/mw690/6d184cefly1fxetxc6oiyj20w00ek40g.jpg" alt="Success"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx4.sinaimg.cn/large/6d184cefly1fx7m4l3l8sj20p0046wf0.jpg&quot; alt=&quot;Tencent Cloud and Baota Panel&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Server" scheme="http://laker.me/blog/categories/Server/"/>
    
    
      <category term="Server" scheme="http://laker.me/blog/tags/Server/"/>
    
      <category term="PHP" scheme="http://laker.me/blog/tags/PHP/"/>
    
      <category term="Tencent Cloud" scheme="http://laker.me/blog/tags/Tencent-Cloud/"/>
    
      <category term="ThinkPHP" scheme="http://laker.me/blog/tags/ThinkPHP/"/>
    
      <category term="MySql" scheme="http://laker.me/blog/tags/MySql/"/>
    
  </entry>
  
  <entry>
    <title>First step in Tencent Cloud and Baota Panel</title>
    <link href="http://laker.me/blog/2018/11/13/18_1113_tencent_cloud/"/>
    <id>http://laker.me/blog/2018/11/13/18_1113_tencent_cloud/</id>
    <published>2018-11-13T00:24:00.000Z</published>
    <updated>2018-11-13T08:27:44.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx4.sinaimg.cn/large/6d184cefly1fx7m4l3l8sj20p0046wf0.jpg" alt="Tencent Cloud and Baota Panel"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">laker.me</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="Install-Baota-Panel-in-Tencent-Cloud"><a href="#Install-Baota-Panel-in-Tencent-Cloud" class="headerlink" title="Install Baota Panel in Tencent Cloud"></a>Install Baota Panel in Tencent Cloud</h2><p>Visit <a href="https://www.bt.cn/" target="_blank" rel="external">https://www.bt.cn/</a>:</p>
<p><img src="http://wx3.sinaimg.cn/mw690/6d184cefly1fx6o8b5ehnj21ac0ngagg.jpg" alt="bt website"></p>
<p>Find the installation command, now we use V5.9 for CentOS. Also you can use other systems you want.</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fx6o8jm2wlj21ds0bqn0t.jpg" alt="installation command"><br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum <span class="keyword">install</span> -y wget &amp;&amp; wget -O <span class="keyword">install</span>.sh http://download.bt.cn/<span class="keyword">install</span>/<span class="keyword">install</span>.sh &amp;&amp; sh <span class="keyword">install</span>.sh</div></pre></td></tr></table></figure></p>
<p>Open your sever in Tencent Cloud:</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fx7k4mtsmvj21k40ncdp9.jpg" alt="Tencent Cloud"></p>
<p>Install Baota Panel:</p>
<p><img src="http://wx4.sinaimg.cn/large/6d184cefly1fx6o938vr1j21go086wgg.jpg" alt="Install Baota Panel"></p>
<p>Then we get your Baota Panel accout for the server, and login your panel. Here is my serve address, yours is different.</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fx6o9h3n7vj20n608sq46.jpg" alt="Baota Panel accout"></p>
<h2 id="New-a-website-in-Tencent-Cloud"><a href="#New-a-website-in-Tencent-Cloud" class="headerlink" title="New a website in Tencent Cloud"></a>New a website in Tencent Cloud</h2><p>After login your server panel, setup a new website in the server:</p>
<p><img src="http://wx1.sinaimg.cn/mw690/6d184cefly1fx6o9z91xpj212g0gmgok.jpg" alt="New a website"></p>
<p>Add your domain name:</p>
<p><img src="http://wx1.sinaimg.cn/mw690/6d184cefly1fx6oai0mvzj21100i2n01.jpg" alt="Add domain name"></p>
<p>All done, you can visit it now:</p>
<p><img src="http://wx1.sinaimg.cn/mw690/6d184cefly1fx6oape3hej215g0uq78v.jpg" alt="visit"></p>
<p>You can edit files in Tencent Cloud, use cd into the file:</p>
<p><img src="http://wx1.sinaimg.cn/mw690/6d184cefly1fx6oayqr3fj20ru01ugly.jpg" alt="edit files"></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">vi</span> <span class="built_in">index</span>.html</div></pre></td></tr></table></figure>
<p><img src="http://wx1.sinaimg.cn/mw690/6d184cefly1fx6ob3u08qj20z00l843a.jpg" alt="vi index.html"></p>
<p>Save and visit:</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fx6ocgwlzij20ue0ky419.jpg" alt="visit"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx4.sinaimg.cn/large/6d184cefly1fx7m4l3l8sj20p0046wf0.jpg&quot; alt=&quot;Tencent Cloud and Baota Panel&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Server" scheme="http://laker.me/blog/categories/Server/"/>
    
    
      <category term="Server" scheme="http://laker.me/blog/tags/Server/"/>
    
      <category term="PHP" scheme="http://laker.me/blog/tags/PHP/"/>
    
      <category term="Tencent Cloud" scheme="http://laker.me/blog/tags/Tencent-Cloud/"/>
    
  </entry>
  
  <entry>
    <title>AI learning 2：SVM Algorithm</title>
    <link href="http://laker.me/blog/2018/11/01/18_1101_ai_svm/"/>
    <id>http://laker.me/blog/2018/11/01/18_1101_ai_svm/</id>
    <published>2018-11-01T00:24:00.000Z</published>
    <updated>2018-11-07T00:55:08.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx4.sinaimg.cn/large/6d184cefly1fwylhut942j20p00463yw.jpg" alt="AI learning 2：SVM Algorithm"></p>
<a id="more"></a>
<blockquote>
<p>Exchange blogroll： <a href="http://laker.me/blog">laker.me</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a></p>
</blockquote>
<h2 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h2><p>Environment: </p>
<ul>
<li>Anacoda Navigator</li>
<li>python 3.6</li>
</ul>
<p>Python packages(all in Anacoda, don’t have to install extractly):</p>
<ul>
<li><a href="http://www.numpy.org/" target="_blank" rel="external">numpy</a>: for scientific computing</li>
<li><a href="https://pandas.pydata.org/" target="_blank" rel="external">pandas</a>: for data analysis</li>
<li><a href="http://scikit-learn.org/stable/" target="_blank" rel="external">sklearn</a>: Simple and efficient tools for data mining and data analysis</li>
</ul>
<p>Code and datas <a href="https://pan.baidu.com/s/1wX3rXqWvjlnCFRk6yyXznQ" target="_blank" rel="external">https://pan.baidu.com/s/1wX3rXqWvjlnCFRk6yyXznQ</a></p>
<h2 id="Coding"><a href="#Coding" class="headerlink" title="Coding"></a>Coding</h2><p>Import packages and set alias.</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"># <span class="keyword">import</span> SVC <span class="keyword">in</span> svm <span class="keyword">module</span></div><div class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC </div><div class="line">#<span class="keyword">import</span> train_test_split <span class="keyword">in</span> model_selection <span class="keyword">module</span></div><div class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</div></pre></td></tr></table></figure>
<p>Import training file <code>16.MNIST.train.csv</code>, it’s a matrix of a picture. The first column is type of then row.<br>The number means grayscale value of the picture pixel.<br>And we only use the last 5000 rows to train.</p>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># inputData <span class="keyword">is</span> <span class="keyword">object</span> <span class="keyword">of</span> pandas, <span class="keyword">and</span> use pandas <span class="function"><span class="keyword">function</span>  <span class="title">iloc</span> <span class="title">to</span> <span class="title">select</span> <span class="title">the</span> <span class="title">last</span> 5000 <span class="title">rows</span>.</span></div><div class="line"></div><div class="line"><span class="title">inputData</span> = <span class="title">pd</span>.<span class="title">read_csv</span><span class="params">(<span class="string">'./16.MNIST.train.csv'</span>)</span></div><div class="line"><span class="title">inputData</span> = <span class="title">inputData</span>.<span class="title">iloc</span>[-5000:, :]</div></pre></td></tr></table></figure>
<p>============== Usage of pandas function iloc ==============<br><a href="https://www.shanelynn.ie/select-pandas-dataframe-rows-and-columns-using-iloc-loc-and-ix/" target="_blank" rel="external">https://www.shanelynn.ie/select-pandas-dataframe-rows-and-columns-using-iloc-loc-and-ix/</a><br>There are two “arguments” to iloc – a row selector, and a column selector. </p>
<p><code>data.iloc[rows, columns]</code></p>
<p><code>data.iloc[a:b, c:d]</code> means from row a to row b, column c to column d.</p>
<p><code>data.iloc[a:, :d]</code> means from row a to column end, column one to column d.</p>
<p>Single selections using iloc and DataFrame</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Rows:</span></div><div class="line"><span class="class"><span class="keyword">data</span>.iloc[0] # first row of <span class="keyword">data</span> frame - <span class="type">Note</span> a <span class="type">Series</span> <span class="keyword">data</span> <span class="keyword">type</span> output.</span></div><div class="line"><span class="class"><span class="keyword">data</span>.iloc[1] # second row of <span class="keyword">data</span> frame </span></div><div class="line"><span class="class"><span class="keyword">data</span>.iloc[-1] # last row of <span class="keyword">data</span> frame </span></div><div class="line"></div><div class="line"><span class="meta"># Columns:</span></div><div class="line"><span class="class"><span class="keyword">data</span>.iloc[:,0] # first column of <span class="keyword">data</span> frame </span></div><div class="line"><span class="class"><span class="keyword">data</span>.iloc[:,1] # second column of <span class="keyword">data</span> frame </span></div><div class="line"><span class="class"><span class="keyword">data</span>.iloc[:,-1] # last column of <span class="keyword">data</span> frame</span></div></pre></td></tr></table></figure>
<p>Multiple columns and rows can be selected together using the .iloc indexer.</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">data.iloc[<span class="number">0</span>:<span class="number">5</span>] # <span class="keyword">first</span> five rows of dataframe</div><div class="line">data.iloc[:, <span class="number">0</span>:<span class="number">2</span>] # <span class="keyword">first</span> two columns of data frame with <span class="keyword">all</span> rows</div><div class="line">data.iloc[[<span class="number">0</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">24</span>], [<span class="number">0</span>,<span class="number">5</span>,<span class="number">6</span>]] # <span class="number">1</span><span class="keyword">st</span>, <span class="number">4</span><span class="keyword">th</span>, <span class="number">7</span><span class="keyword">th</span>, <span class="number">25</span><span class="keyword">th</span> row + <span class="number">1</span><span class="keyword">st</span> <span class="number">6</span><span class="keyword">th</span> <span class="number">7</span><span class="keyword">th</span> columns.</div><div class="line">data.iloc[<span class="number">0</span>:<span class="number">5</span>, <span class="number">5</span>:<span class="number">8</span>] # <span class="keyword">first</span> <span class="number">5</span> rows <span class="built_in">and</span> <span class="number">5</span><span class="keyword">th</span>, <span class="number">6</span><span class="keyword">th</span>, <span class="number">7</span><span class="keyword">th</span> columns of data frame</div></pre></td></tr></table></figure>
<blockquote>
<p>Python list <a href="https://www.w3schools.com/python/python_lists.asp" target="_blank" rel="external">https://www.w3schools.com/python/python_lists.asp</a></p>
</blockquote>
<p>============== / End Usage of pandas function iloc ==============</p>
<p>In the taining data, the first colums is lable, so we drop label column using <code>drop([&#39;label&#39;], 1)</code>, extract it to parameter ‘label’ using <code>inputData[&#39;label&#39;]</code>, and convert it to array using <code>np.array()</code>.<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">data = <span class="built_in">np</span>.<span class="built_in">array</span>(inputData.drop(['<span class="built_in">label</span>'], <span class="number">1</span>))</div><div class="line"><span class="built_in">label</span> = <span class="built_in">np</span>.<span class="built_in">array</span>(inputData['<span class="built_in">label</span>'])</div></pre></td></tr></table></figure></p>
<p>============== Usage of pandas function drop ==============<br><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.drop.html" target="_blank" rel="external">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.drop.html</a><br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; df = pd.DataFrame(np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>),</div><div class="line">...                   columns=['A', 'B', 'C', 'D'])</div><div class="line">&gt;&gt;&gt; df</div><div class="line">   A  B   C   D</div><div class="line"><span class="number">0</span>  <span class="number">0</span>  <span class="number">1</span>   <span class="number">2</span>   <span class="number">3</span></div><div class="line"><span class="number">1</span>  <span class="number">4</span>  <span class="number">5</span>   <span class="number">6</span>   <span class="number">7</span></div><div class="line"><span class="number">2</span>  <span class="number">8</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span></div></pre></td></tr></table></figure></p>
<p>Drop columns</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> axis : &#123;0 or ‘index’, 1 or ‘columns’&#125;, default 0</span></div><div class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; df.drop([<span class="string">'B'</span>, <span class="string">'C'</span>], axis=1)</span></div><div class="line">   A   D</div><div class="line">0  0   3</div><div class="line">1  4   7</div><div class="line">2  8  11</div></pre></td></tr></table></figure>
<p>or:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; df.drop(columns=['B', 'C'])</div><div class="line">   A   D</div><div class="line"><span class="number">0</span>  <span class="number">0</span>   <span class="number">3</span></div><div class="line"><span class="number">1</span>  <span class="number">4</span>   <span class="number">7</span></div><div class="line"><span class="number">2</span>  <span class="number">8</span>  <span class="number">11</span></div></pre></td></tr></table></figure>
<p>Drop a row by index<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; df.drop([<span class="number">0</span>, <span class="number">1</span>])</div><div class="line">   A  B   C   D</div><div class="line"><span class="number">2</span>  <span class="number">8</span>  <span class="number">9</span>  <span class="number">10</span>  <span class="number">11</span></div></pre></td></tr></table></figure></p>
<p>============== / End Usage of pandas function drop ==============</p>
<p>============== Usage of numpy function array ==============<br><a href="https://docs.scipy.org/doc/numpy-1.15.1/reference/generated/numpy.array.html" target="_blank" rel="external">https://docs.scipy.org/doc/numpy-1.15.1/reference/generated/numpy.array.html</a></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; np.array(<span class="string">[[1, 2], [3, 4]]</span>)</div><div class="line">array(<span class="string">[[1, 2],</span></div><div class="line">       [3, 4]])</div></pre></td></tr></table></figure>
<p>============== / End Usage of numpy function array ==============</p>
<p>Then deal with the data, it’s a little tricky. Set data which is smaller than 100 to 0, and which is bigger than 100 to 1.</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># Improve accuracy from 0.1 to 0.9</span></div><div class="line"><span class="class"><span class="keyword">data</span>[<span class="keyword">data</span>&lt;=100] = 0</span></div><div class="line"><span class="class"><span class="keyword">data</span>[<span class="keyword">data</span>&gt;100] = 1</span></div></pre></td></tr></table></figure>
<p>Extract the first 5 rows.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">inputData</span><span class="selector-class">.head</span>()</div></pre></td></tr></table></figure>
<p>============== Usage of pandas function iloc ==============<br><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.head.html" target="_blank" rel="external">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.head.html</a></p>
<blockquote>
<p>DataFrame.head(n)</p>
</blockquote>
<p>Return the first n rows, default n=5.</p>
<p>This function returns the first n rows for the object based on position. It is useful for quickly testing if your object has the right type of data in it.</p>
<p>See also</p>
<blockquote>
<p>DataFrame.tail(n)</p>
</blockquote>
<p>Returns the last n rows.</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; df = pd.DataFrame(&#123;<span class="string">'animal'</span><span class="symbol">:</span>[<span class="string">'alligator'</span>, <span class="string">'bee'</span>, <span class="string">'falcon'</span>, <span class="string">'lion'</span>,</div><div class="line">...                    <span class="string">'monkey'</span>, <span class="string">'parrot'</span>, <span class="string">'shark'</span>, <span class="string">'whale'</span>, <span class="string">'zebra'</span>]&#125;)</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; df</div><div class="line">      animal</div><div class="line"><span class="number">0</span>  alligator</div><div class="line"><span class="number">1</span>        bee</div><div class="line"><span class="number">2</span>     falcon</div><div class="line"><span class="number">3</span>       lion</div><div class="line"><span class="number">4</span>     monkey</div><div class="line"><span class="number">5</span>     parrot</div><div class="line"><span class="number">6</span>      shark</div><div class="line"><span class="number">7</span>      whale</div><div class="line"><span class="number">8</span>      zebra</div></pre></td></tr></table></figure>
<p>Viewing the first n lines (three in this case)<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; df.head(<span class="number">3</span>)</div><div class="line">      animal</div><div class="line"><span class="number">0</span>  alligator</div><div class="line"><span class="number">1</span>        bee</div><div class="line"><span class="number">2</span>     falcon</div></pre></td></tr></table></figure></p>
<p>============== /End Usage of pandas function iloc ==============</p>
<p>Use 70% data to train and 30% to test the taining result using <code>test_size=0.3</code>. Here we don’t specify the train_size, and it will automatically set to the complement of the test size, which is 1-0.3=0.7.</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data_train, data_test, label_train, <span class="attr">label_test</span> = train_test_split(data, label, <span class="attr">test_size=0.3,</span> <span class="attr">random_state=87)</span></div></pre></td></tr></table></figure>
<p>======= Usage of sklearn.model_selection.train_test_split =======<br><a href="http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html" target="_blank" rel="external">http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html</a></p>
<p><code>train_test_split(*arrays, **options)</code> </p>
<p>Split arrays or matrices into random train and test subsets</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</div></pre></td></tr></table></figure>
<p><strong>Parameters:</strong></p>
<ul>
<li><p>*arrays : sequence of indexables with same length / shape[0]<br>Allowed inputs are lists, numpy arrays, scipy-sparse matrices or pandas dataframes.</p>
</li>
<li><p>test_size : float, int or None, optional (default=0.25)<br>If float, should be between 0.0 and 1.0 and represent the proportion of the dataset to include in the test split. If int, represents the absolute number of test samples. If None, the value is set to the complement of the train size. By default, the value is set to 0.25. </p>
</li>
<li><p>train_size : float, int, or None, (default=None)<br>If float, should be between 0.0 and 1.0 and represent the proportion of the dataset to include in the train split. If int, represents the absolute number of train samples. If None, the value is automatically set to the complement of the test size.</p>
</li>
<li><p>random_state : int, RandomState instance or None, optional (default=None)<br>If int, random_state is the seed used by the random number generator; If RandomState instance, random_state is the random number generator; If None, the random number generator is the RandomState instance used by np.random.</p>
</li>
<li><p>shuffle : boolean, optional (default=True)<br>Whether or not to shuffle the data before splitting. If shuffle=False then stratify must be None.</p>
</li>
<li><p>stratify : array-like or None (default=None)<br>If not None, data is split in a stratified fashion, using this as the class labels.</p>
</li>
</ul>
<p><strong>Returns:</strong>  </p>
<ul>
<li>splitting : list, length=2 * len(arrays)<br>List containing train-test split of inputs.</li>
</ul>
<p>======= /End Usage of sklearn.model_selection.train_test_split =======</p>
<p>Use SVC model and <code>fit()</code> to train, set more parameters in SVC() improve accuracy:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SVM_model = SVC()</div><div class="line">SVM_model.fit(data_train, label_train)</div></pre></td></tr></table></figure>
<p>======= Usage of sklearn.model_selection.train_test_split =======</p>
<p><a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html" target="_blank" rel="external">http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html</a></p>
<blockquote>
<p>SVC(C=1.0, kernel=’rbf’, degree=3, gamma=’auto_deprecated’, coef0=0.0, shrinking=True, probability=False, tol=0.001, cache_size=200, class_weight=None, verbose=False, max_iter=-1, decision_function_shape=’ovr’, random_state=None)</p>
</blockquote>
<p><a href="http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC.fit" target="_blank" rel="external">http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC.fit</a></p>
<blockquote>
<p>fit(X, y, sample_weight=None)</p>
</blockquote>
<p>Fit the SVM model according to the given training data.</p>
<p>======= /End Usage of sklearn.model_selection.train_test_split =======</p>
<p>Use the first 10 rows to test and get the predict result. Then compare the predict result and label to score a point.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">SVM_model</span><span class="selector-class">.predict</span>(<span class="selector-tag">data_test</span><span class="selector-attr">[:10]</span>)</div><div class="line"></div><div class="line"><span class="selector-tag">label_test</span><span class="selector-attr">[:10]</span></div><div class="line"></div><div class="line"><span class="selector-tag">SVM_model</span><span class="selector-class">.score</span>(<span class="selector-tag">data_test</span>, <span class="selector-tag">label_test</span>)</div></pre></td></tr></table></figure>
<p>We can write a <code>score()</code> fuction like this instead of using <code>score()</code>.</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">correct = 0</div><div class="line">prediction = SVM_model.<span class="keyword">predict</span>(data_test)</div><div class="line"><span class="keyword">for</span> i, <span class="keyword">lab</span> <span class="keyword">in</span> enumerate(label_test):</div><div class="line">    # <span class="keyword">if</span> prediction == <span class="keyword">label</span>, correct+1</div><div class="line">    <span class="keyword">if</span> prediction[i] == <span class="keyword">lab</span>:  </div><div class="line">        correct += 1</div><div class="line"></div><div class="line"># accuracy = correct numbers / all <span class="keyword">test</span> numbers</div><div class="line">accuracy = correct / len(label_test)</div><div class="line"><span class="keyword">print</span>(<span class="string">"Accuracy is:"</span>, accuracy)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx4.sinaimg.cn/large/6d184cefly1fwylhut942j20p00463yw.jpg&quot; alt=&quot;AI learning 2：SVM Algorithm&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="AI" scheme="http://laker.me/blog/categories/AI/"/>
    
    
      <category term="Algorithm" scheme="http://laker.me/blog/tags/Algorithm/"/>
    
      <category term="人工智能" scheme="http://laker.me/blog/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="AI" scheme="http://laker.me/blog/tags/AI/"/>
    
      <category term="ML" scheme="http://laker.me/blog/tags/ML/"/>
    
      <category term="DL" scheme="http://laker.me/blog/tags/DL/"/>
    
  </entry>
  
  <entry>
    <title>AI 学习1	：Anaconda 配置</title>
    <link href="http://laker.me/blog/2018/10/04/18_1004_anaconda/"/>
    <id>http://laker.me/blog/2018/10/04/18_1004_anaconda/</id>
    <published>2018-10-04T00:24:00.000Z</published>
    <updated>2018-10-31T11:52:32.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx4.sinaimg.cn/large/6d184cefly1fvzxnkjnwij20p0046t97.jpg" alt="AI 学习：Anaconda 配置"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">laker.me–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>本文环境是 Mac OS。</p>
<p>目前Anaconda 出了 Python3.7 版本，但 TensorFlow 只支持3.5、3.6、2.7。有两种解决方案。</p>
<ul>
<li>方案一：</li>
</ul>
<p>安装3.7版，再根据官方推荐的方法安装3.5、3.6。</p>
<p><a href="http://docs.anaconda.com/anaconda/faq/#how-do-i-get-anaconda-with-python-3-5-or-3-6" target="_blank" rel="external">http://docs.anaconda.com/anaconda/faq/#how-do-i-get-anaconda-with-python-3-5-or-3-6</a></p>
<blockquote>
<p>We recommend that you download the latest version of Anaconda and then <a href="https://conda.io/docs/py2or3.html" target="_blank" rel="external">make a Python 3.5 (or 3.6) environment</a>.<br>Or download the latest version of Anaconda and run the following command to install Python 3.5 (or 3.6) in the root environment: conda install python=3.5<br>or</p>
<p><code>conda install python=3.6</code></p>
<p>Or download the most recent Anaconda installer that included Python 3.5 (Anaconda 4.2.0) or Python 3.6 (Anaconda 5.2.0). You can download either of these from our <a href="https://repo.anaconda.com/archive/" target="_blank" rel="external">archive</a>. Scroll down the page until you find the version you need for your platform.</p>
</blockquote>
<p>命令行执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> conda install python=3.6</span></div></pre></td></tr></table></figure>
<p>命令：</p>
<blockquote>
<p>开启环境<br>$ source activate py36</p>
<p>关闭环境<br>$ source deactivate</p>
</blockquote>
<p>开启环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> activate py36</span></div><div class="line">(py36)</div><div class="line"><span class="meta"></span></div><div class="line">$<span class="bash"> conda info --envs</span></div><div class="line"><span class="meta">#</span><span class="bash"> conda environments:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line">base                     /Users/laker/anaconda3</div><div class="line">Laker                    /Users/laker/anaconda3/envs/Laker</div><div class="line">py36                  *  /Users/laker/anaconda3/envs/py36</div><div class="line"></div><div class="line">(py36)</div></pre></td></tr></table></figure>
<p>我尝试了这个方法，最后3.6是安装成功了，但是客户端打不开了，尝试了网上解决闪退的办法未果，貌似这是个通病。折腾了一上午也没搞好，折腾到崩溃，之后卸载采取第二种方案</p>
<ul>
<li>方案二：</li>
</ul>
<p>到清华镜像下载以往版本，官网也有，但是慢。</p>
<p><a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/" target="_blank" rel="external">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</a></p>
<p>安装好后，Anaconda 自带 Python 环境，与 Mac 自身的不相干。</p>
<h2 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h2><p>安装后尝试如下命令</p>
<pre><code>conda --version
</code></pre><p>如果出现</p>
<pre><code>$ conda --version
conda 4.3.30
</code></pre><p>表示安装成功，如果没有，则需配置环境变量<br>修改<code>.bash_profile</code> 或 <code>zsh_profile</code>，我用的 zsh</p>
<pre><code>vi ~/.zsh_profile
</code></pre><p>添加以下命令</p>
<pre><code>export PATH=&quot;/Users/nick(你自己的安装路径)/anaconda3/bin:$PATH&quot;
</code></pre><p>vim使用<code>:wq</code>命令保存退出<br>保存文件后如要立即生效，输入以下命令，</p>
<pre><code>source $HOME/.zsh_profile
</code></pre><blockquote>
<p>注意：重启机子后也可能要执行这个</p>
</blockquote>
<p>再次测试<code>conda --version</code>命令是否安装成功.</p>
<p>如果成功，我们继续用以下命令修改conda的镜像源，这里用清华的源。输入以下两条命令来添加源：</p>
<pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --set show_channel_urls yes
</code></pre><p>此时~/下会生成.condarc文件。</p>
<p>用<code>vi ~/.condarc</code>命令进入vim编辑器，删除其中的第三、第四行，即删除了默认的源，然后<code>:wq</code>保存：</p>
<pre><code>channels:
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
  - defaults #删除
ssl_verify: true #删除
show_channel_urls: true
</code></pre><p><code>conda info</code> 查看当前配置信息，channel URLs只剩下清华的源</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">channel URLs : https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs<span class="regexp">/free/</span>osx-<span class="number">64</span></div><div class="line">    https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs<span class="regexp">/free/</span>noarch</div></pre></td></tr></table></figure>
<h2 id="安装-TensorFlow"><a href="#安装-TensorFlow" class="headerlink" title="安装 TensorFlow"></a>安装 TensorFlow</h2><p>注意，这里是用 Anaconda 的 pip，不是本机的 pip，所以 pip 前加上路径</p>
<p>更新 pip<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>~<span class="regexp">/anaconda3/bin</span><span class="regexp">/pip install --upgrade pip</span></div></pre></td></tr></table></figure></p>
<p>更新 TensorFlow</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ~<span class="string">/anaconda3/bin/pip</span> install <span class="params">--upgrade</span> <span class="params">--ignore-installed</span> tensorflow</div></pre></td></tr></table></figure>
<p>可能会有一段黄色警告，再多等会，或者开代理</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># laker @ Laker in ~ [13:11:43]</span></div><div class="line">$ ~/anaconda3/bin/pip install <span class="comment">--upgrade --ignore-installed tensorflow</span></div><div class="line">Collecting tensorflow</div><div class="line">  Retrying (Retry(total=<span class="number">4</span>, connect=None, <span class="built_in">read</span>=None, redirect=None, status=None)) <span class="keyword">after</span> connection broken <span class="keyword">by</span> <span class="string">'NewConnectionError('</span>&lt;pip.<span class="title">_vendor</span>.urllib3.connection.VerifiedHTTPSConnection object <span class="keyword">at</span> <span class="number">0x11021c828</span>&gt;: Failed <span class="built_in">to</span> establish <span class="keyword">a</span> <span class="built_in">new</span> connection: [Errno <span class="number">8</span>] nodename nor servname provided, <span class="keyword">or</span> <span class="keyword">not</span> known<span class="string">',)'</span>: /simple/tensorflow/</div><div class="line">  Retrying (Retry(total=<span class="number">3</span>, connect=None, <span class="built_in">read</span>=None, redirect=None, status=None)) <span class="keyword">after</span> connection broken <span class="keyword">by</span> <span class="string">'NewConnectionError('</span>&lt;pip.<span class="title">_vendor</span>.urllib3.connection.VerifiedHTTPSConnection object <span class="keyword">at</span> <span class="number">0x110067a58</span>&gt;: Failed <span class="built_in">to</span> establish <span class="keyword">a</span> <span class="built_in">new</span> connection: [Errno <span class="number">8</span>] nodename nor servname provided, <span class="keyword">or</span> <span class="keyword">not</span> known<span class="string">',)'</span>: /simple/tensorflow/</div><div class="line">  Retrying (Retry(total=<span class="number">2</span>, connect=None, <span class="built_in">read</span>=None, redirect=None, status=None)) <span class="keyword">after</span> connection broken <span class="keyword">by</span> <span class="string">'NewConnectionError('</span>&lt;pip.<span class="title">_vendor</span>.urllib3.connection.VerifiedHTTPSConnection object <span class="keyword">at</span> <span class="number">0x110067ac8</span>&gt;: Failed <span class="built_in">to</span> establish <span class="keyword">a</span> <span class="built_in">new</span> connection: [Errno <span class="number">65</span>] No route <span class="built_in">to</span> host<span class="string">',)'</span>: /simple/tensorflow/</div><div class="line">  Downloading <span class="keyword">https</span>://<span class="built_in">files</span>.pythonhosted.org/packages/<span class="number">70</span>/<span class="number">78</span>/cd74769027b6249e45807637c1aa3ef212b9492349cca4b87e5de1a10548/tensorflow<span class="number">-1.11</span><span class="number">.0</span>-cp36-cp36m-macosx_10_11_x86_64.whl (<span class="number">59.3</span>MB)</div><div class="line">    <span class="number">9</span>% |███                             | <span class="number">5.4</span>MB <span class="number">96</span>kB/s eta <span class="number">0</span>:<span class="number">09</span>:<span class="number">20</span></div></pre></td></tr></table></figure>
<h2 id="安装Jupyter-Spyder"><a href="#安装Jupyter-Spyder" class="headerlink" title="安装Jupyter, Spyder"></a>安装Jupyter, Spyder</h2><p><img src="http://wx1.sinaimg.cn/mw690/6d184cefly1fvzuazc915j21jc0okgq7.jpg" alt="Jupyter,spyder"></p>
<h2 id="测试环境"><a href="#测试环境" class="headerlink" title="测试环境"></a>测试环境</h2><p>下载测试文件<br>链接:<a href="https://pan.baidu.com/s/1U_P1VsJyJ3Zn8SAprz9Sxw" target="_blank" rel="external">https://pan.baidu.com/s/1U_P1VsJyJ3Zn8SAprz9Sxw</a> 提取码: vtaf</p>
<p>安装测试文件的依赖库 pygame</p>
<pre><code>$ ~/anaconda3/bin/pip install pygame
</code></pre><p>运行Jupyter，点击面板的 Launch，</p>
<p><img src="http://wx2.sinaimg.cn/mw690/6d184cefly1fvzub9u6vrj20ck0ew754.jpg" alt="Jupyter"></p>
<p>或者输入命令</p>
<pre><code>ipython notebook
</code></pre><p>找到文件所在位置</p>
<p><img src="http://wx3.sinaimg.cn/mw690/6d184cefly1fvzublo0fuj20hy0fgdgu.jpg" alt="Jupyter界面"></p>
<p>进入<code>homework0.ipynb</code>，运行</p>
<p><img src="http://wx3.sinaimg.cn/mw690/6d184cefly1fvzuc8mo3lj214a0q8q6t.jpg" alt="homework0.ipynb"></p>
<p>效果是两个特效的窗口</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fvzudre5z8j21bs0fmhdt.jpg" alt="效果"></p>
<p>参考：<br><a href="https://www.jianshu.com/p/b9eac8419c8d" target="_blank" rel="external">Anaconda之Python环境配置</a><br><a href="http://docs.anaconda.com/anaconda/faq/#should-i-add-anaconda-to-the-macos-or-linux-path" target="_blank" rel="external">Add PATH</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx4.sinaimg.cn/large/6d184cefly1fvzxnkjnwij20p0046t97.jpg&quot; alt=&quot;AI 学习：Anaconda 配置&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="AI" scheme="http://laker.me/blog/categories/AI/"/>
    
    
      <category term="Algorithm" scheme="http://laker.me/blog/tags/Algorithm/"/>
    
      <category term="人工智能" scheme="http://laker.me/blog/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
      <category term="AI" scheme="http://laker.me/blog/tags/AI/"/>
    
      <category term="ML" scheme="http://laker.me/blog/tags/ML/"/>
    
      <category term="DL" scheme="http://laker.me/blog/tags/DL/"/>
    
  </entry>
  
  <entry>
    <title>算法学习1：重新排序链表</title>
    <link href="http://laker.me/blog/2018/09/29/18_0929_%20algorithm/"/>
    <id>http://laker.me/blog/2018/09/29/18_0929_ algorithm/</id>
    <published>2018-09-29T00:24:00.000Z</published>
    <updated>2018-10-07T14:56:39.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx2.sinaimg.cn/large/6d184cefly1fvwi0uvwsmj20p0046gm8.jpg" alt="算法学习：重新排序链表"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">laker.me–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>给定一个单链表，将链表按头节点、尾节点、第二个节点、 倒数第二个节点…的规律重建。要求：原地操作，不改变节点的值。</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>暴力法：先找头节点，再找尾节点，然后顺次第二个节点，倒数第二个节点，由于是单链表，不停的从表头遍历到表尾，时间复杂度O(n^2)</p>
<p>看下有没有其他便捷方法。</p>
<p>假设给一组数字<code>1,2,3,4,5,6</code>，重新排序后是<code>1,6,2,5,3,4</code>，会发现一个规律，<code>1, 2, 3</code>是顺序的，<code>6, 5, 4</code>是倒序插入的。</p>
<p>所以可这样考虑：<br>先把链表一分为二，把后半部分数据倒序插入前半部分。<br>头插法制作倒序链表，时间复杂度 O(n)，将左右两链表合并，时间复杂度 O(n)。总时间复杂度为O(n)。</p>
<h2 id="伪代码"><a href="#伪代码" class="headerlink" title="伪代码"></a>伪代码</h2><figure class="highlight xl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">void Revert (Link L1) &#123;</div><div class="line">	new Link L2; <span class="comment">//用于存放倒序的后半部链表</span></div><div class="line">	int half_len = L1.lenght() / <span class="number">2</span>; <span class="comment">//记录链表的一半</span></div><div class="line">	<span class="function"><span class="title">int</span> *p = L1-&gt;</span>head; <span class="comment">//p 指向 L1 头节点</span></div><div class="line">	<span class="function"><span class="title">int</span> *q = L2-&gt;</span>head; <span class="comment">//q 指向 L2 头指针</span></div><div class="line">	int *s, *t;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (int i = <span class="number">0</span>; i &lt; half_len; i++) &#123;</div><div class="line">		<span class="function"><span class="title">s</span> = s-&gt;</span>next; <span class="comment">// 找到链表中部</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="title">q</span> = s-&gt;</span>next; <span class="comment">//把后半段链表赋值给 L2</span></div><div class="line">	<span class="function"><span class="title">s</span>-&gt;</span>next = null; <span class="comment">// 此时 s 为 L1尾指针</span></div><div class="line"></div><div class="line">	<span class="function"><span class="title">t</span> = q-&gt;</span>next;</div><div class="line">	<span class="comment">// 这里我直接在表内操作，看起来有点乱，新建个 L3来存放会看得舒服点</span></div><div class="line">	<span class="function"><span class="title">while</span> ( t-&gt;</span>next != null ) &#123; <span class="comment">//倒置 L2</span></div><div class="line">		<span class="function"><span class="title">q</span>-&gt;</span><span class="function"><span class="title">next</span> = t-&gt;</span>next;</div><div class="line">		<span class="function"><span class="title">t</span>-&gt;</span>next = q;</div><div class="line">		L2-&gt;<span class="function"><span class="title">head</span>-&gt;</span>next = t;</div><div class="line">		<span class="function"><span class="title">t</span> = q-&gt;</span>next;</div><div class="line">		<span class="function"><span class="title">q</span> = L2-&gt;</span><span class="function"><span class="title">head</span>-&gt;</span>next;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">while</span> ( p != s ) &#123; <span class="comment">// p 没有走到表尾时插入L2节点</span></div><div class="line">		<span class="function"><span class="title">t</span> = L2-&gt;</span><span class="function"><span class="title">head</span>-&gt;</span>next; <span class="comment">//一开始，t 指向 L2第一个节点</span></div><div class="line">		L2-&gt;<span class="function"><span class="title">head</span>-&gt;</span><span class="function"><span class="title">next</span> = L2-&gt;</span><span class="function"><span class="title">head</span>-&gt;</span><span class="function"><span class="title">next</span>-&gt;</span>next; <span class="comment">//取出第一个节点，第二个节点变成第一个节点</span></div><div class="line">		<span class="function"><span class="title">t</span>-&gt;</span><span class="function"><span class="title">next</span> = p-&gt;</span>next; <span class="comment">//t 插入 p</span></div><div class="line">		<span class="function"><span class="title">p</span>-&gt;</span><span class="function"><span class="title">next</span> = t-&gt;</span>next;</div><div class="line">		<span class="function"><span class="title">p</span> = p-&gt;</span><span class="function"><span class="title">next</span>-&gt;</span>next; <span class="comment">//移动 p 到下一个待插入的节点</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>简单的图示：</p>
<p><img src="http://wx4.sinaimg.cn/mw690/6d184cefly1fvwju0nqrvj20u0141ta3.jpg" alt="图示"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx2.sinaimg.cn/large/6d184cefly1fvwi0uvwsmj20p0046gm8.jpg&quot; alt=&quot;算法学习：重新排序链表&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="算法" scheme="http://laker.me/blog/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="算法" scheme="http://laker.me/blog/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>关于博客图片失效的公告</title>
    <link href="http://laker.me/blog/2018/09/20/18_0920_notice/"/>
    <id>http://laker.me/blog/2018/09/20/18_0920_notice/</id>
    <published>2018-09-20T00:24:00.000Z</published>
    <updated>2018-12-23T06:44:55.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://wx4.sinaimg.cn/large/6d184cefly1fvzxnqr4qpj20p00463z2.jpg" alt="关于博客图片失效的公告"></p>
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">laker.me–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<p>本站图片原本存于七牛云存储。近期七牛收回了免费的域名，导致所有图片链接失效。</p>
<p>自定义域名需要备案，本站域名是在狗爹买的，查了一下我手头有的域名都不支持备案，感觉会很麻烦。图片迁移的话工作量很大。我再想办法。</p>
<p>虽然博文质量一般，但对我而言是很好的学习记录，还是希望能重新弄好。</p>
<p>感谢这些年，通过博客认识的朋友们，大家一起努力鸭~~</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://wx4.sinaimg.cn/large/6d184cefly1fvzxnqr4qpj20p00463z2.jpg&quot; alt=&quot;关于博客图片失效的公告&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>记一次移动硬盘无法读取的处理过程</title>
    <link href="http://laker.me/blog/2018/06/02/18_0602_disk/"/>
    <id>http://laker.me/blog/2018/06/02/18_0602_disk/</id>
    <published>2018-06-02T00:24:00.000Z</published>
    <updated>2019-03-09T03:28:45.000Z</updated>
    
    <content type="html"><![CDATA[ <!-- ![移动硬盘无法读取][1] -->
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">laker.me–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<h2 id="状况"><a href="#状况" class="headerlink" title="状况"></a>状况</h2><p>新电脑硬盘插到硬盘盒上，Windows笔记本电脑不识别，没有任何反应，也不报错，换了接口也不行。</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>考虑到硬盘盒硬盘盒都比较新，坏的可能性不大，就尝试换设备试下。</p>
<h3 id="1-查看磁盘管理是否有读取而无盘符"><a href="#1-查看磁盘管理是否有读取而无盘符" class="headerlink" title="1.查看磁盘管理是否有读取而无盘符"></a>1.查看磁盘管理是否有读取而无盘符</h3><p>右键<code>计算机</code> —— <code>磁盘管理</code>，如果有读取出新磁盘，加个盘符即可。但此时无新磁盘。</p>
<h3 id="2-换了一台-Windows电脑尝试"><a href="#2-换了一台-Windows电脑尝试" class="headerlink" title="2.换了一台 Windows电脑尝试"></a>2.换了一台 Windows电脑尝试</h3><p>换了台式电脑，仍无反应。</p>
<h3 id="3-换-Mac-电脑尝试"><a href="#3-换-Mac-电脑尝试" class="headerlink" title="3.换 Mac 电脑尝试"></a>3.换 Mac 电脑尝试</h3><p>有弹框反应，表明不是硬盘和硬盘盒的问题。<br>报错显示无法读写硬盘。此时考虑可以格式化。</p>
<p><code>Launchpad</code> —— <code>Other 其他</code> —— <code>Disk Utility 磁盘管理</code> —— <code>选中硬盘，Erase 抹除</code></p>
<p>考虑到 Mac 和 Windows 都能用的格式，选择exFAT，其他默认。<br>格式化好，Mac 可以正常读写，再插到Windows笔记本，也能正常读写了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;!-- ![移动硬盘无法读取][1] --&gt;
    
    </summary>
    
      <category term="Others" scheme="http://laker.me/blog/categories/Others/"/>
    
    
  </entry>
  
  <entry>
    <title>自开发的EasyCanvas绘图库实践、Pixeler项目开发小结</title>
    <link href="http://laker.me/blog/2018/05/04/18_0504_easycanvas_pixeler/"/>
    <id>http://laker.me/blog/2018/05/04/18_0504_easycanvas_pixeler/</id>
    <published>2018-05-04T00:24:00.000Z</published>
    <updated>2019-03-09T03:28:48.000Z</updated>
    
    <content type="html"><![CDATA[ <!-- ![EasyCanvas绘图库实践][1] -->
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">laker.me–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<h2 id="涉及的两个项目"><a href="#涉及的两个项目" class="headerlink" title="涉及的两个项目"></a>涉及的两个项目</h2><p><a href="https://github.com/younglaker/pixeler" target="_blank" rel="external">Pixler</a>：一个用于设计像素图片（拼豆）的应用。</p>
<p><a href="https://github.com/younglaker/EasyCanvas" target="_blank" rel="external">Easycanvas.js</a>： Canvas 绘图库</p>
<p><img src="https://camo.githubusercontent.com/1d13f30b16d7e66731cab36a3433bf27d4f10e9e/687474703a2f2f3737673534662e636f6d312e7a302e676c622e636c6f7564646e2e636f6d2f626c6f6732303135313232393131333032322e706e67" alt="Pixler"></p>
<h2 id="开发背景"><a href="#开发背景" class="headerlink" title="开发背景"></a>开发背景</h2><p>我对拼豆感兴趣，在做拼豆前要设计图纸，类似画像素图。我试用了网上能搜到的几个拼豆图纸设计的应用，但是没有适合我的，我就想着自己开发一个。</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/QQ2018050301.jpg" alt="拼豆"></p>
<h2 id="算法原理"><a href="#算法原理" class="headerlink" title="算法原理"></a>算法原理</h2><p>拼豆图纸就类似于像素图，我刚开始构思如何开发的时候，想着它有点像下棋。所以我参考了五子棋的下棋原理。我在五子棋的算法上优化了鼠标点击时落脚的位置的计算方法，即鼠标点击时，获取点击位置，计算出它处于哪个方格中，在那个方格中画上一个像素点，用一个二维数组记录方格中已绘制的位置。这就完成了初步的拼豆像素图的算法设计。</p>
<p>在以往的开发中，我都要求每一步都精益求精，导致整体进度缓慢，常常停留在初步阶段，就把自己绕晕。所以在此次开发中，尝试了小步快跑、快速迭代的方法。</p>
<h2 id="第一版：快速开发"><a href="#第一版：快速开发" class="headerlink" title="第一版：快速开发"></a>第一版：快速开发</h2><p>第一版本开发的时候，我尽量减少对性能、代码优化的思考，在最快的速度完成基本功能，也就是如何绘制像素点和删除像素图。</p>
<p>这样没有束缚的情况下，只需要集中精力完成功能的算法，很快就实现基本功能。</p>
<p>当然，代码也是很简单粗暴的，就需要第二版的完善。</p>
<h2 id="第二版：性能和代码优化"><a href="#第二版：性能和代码优化" class="headerlink" title="第二版：性能和代码优化"></a>第二版：性能和代码优化</h2><p>首先，把画布分为两层，一层是参考线画布，一层是绘图画布。参考线画布在初始化后就不需要修改，所有操作只需要在绘图画布上进行，减少了绘图时候的工作量。</p>
<p>然后，把通用功能的代码封装成公共函数，减少冗余。</p>
<h2 id="第三版：封装绘图库，并在应用中不断完善"><a href="#第三版：封装绘图库，并在应用中不断完善" class="headerlink" title="第三版：封装绘图库，并在应用中不断完善"></a>第三版：封装绘图库，并在应用中不断完善</h2><p>Pixler 主要代码是 Canvas 绘图，所以可以把 Canvas 主要绘图功能封装一下，单独成一个绘图库，减少主代码冗余，也方便在其他项目中引用。</p>
<p>在大学期间，我研究 jQuery 的时候就仿着写了一个链式结构的 JavaScript 框架 <a href="https://github.com/younglaker/octjs" target="_blank" rel="external">Oct.js</a>，加上第一、第二版本对 Canvas 接口的熟悉，所以开发起来并不困难。但在接口设计上重复弄了几次，这部分的经验我也写了一篇文章 <a href="http://laker.me/blog/2017/06/15/17_0615_easy_canvas/">《EasyCanvas：连续画图的一些总结》</a> 记录了一下。</p>
<p>开发 Easycanvas.js，不仅是在 JavaScript 开发、Canvas 运用上的提升，还是一个开源项目的完整实践。期间有一个小伙伴加入参与了合作，可惜没参与太多功能就退出了，但还是一次很好的开源项目的体验。</p>
<p>在开发代码的过程中，还编写了相关的文档。接口不断优化修改，文档也不断的调整，就连文档格式也做了多次调整，工作量是不小，但也不厌其烦。</p>
<p>由于时间原因，在开发完 Easycanvas.js 基础版本后就去做别的项目。间隔一段时间回来再看，基本没有有最初开发时候的熟悉感，这就得靠我之前写的文档了。所以，好的文档是项目的开门钥匙。</p>
<p>就这样，我像一个刚接触这个绘图库的用户一样，参照文档，把 Easycanvas.js 重构了 Pixler 的绘图代码。同时，在应用的过程中发现了 Easycanvas.js 的不足，又反过来进行完善。两个项目相辅相成。</p>
<p><img src="http://77g54f.com1.z0.glb.clouddn.com/blog20151229112337.png" alt="Easycanvas"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>相比之前开发的 <a href="https://github.com/younglaker/octjs" target="_blank" rel="external">Oct.js</a>，只有开发和单元测试，并没有大规模地应用到实际项目中（我也尝试过，但一旦项目做大，就涉及到 jQuery 插件 ，就不得不引入 jQuery，就和 Oct.js 重复了，就只好把 Oct.js 删掉）。</p>
<p>所以，这次 Pixler 和 Easycanvas.js 的开发，从0到1再到100，是一个很好的经历。不仅是编程技能上的提升，还是项目管理上积累了经验。</p>
<p>至此 Pixler 和 Easycanvas.js 完成了一个较为稳定的版本，但还有很大的提升空间，我都一一记录在 Todolist 上了，等我一一突破。</p>
]]></content>
    
    <summary type="html">
    
      &lt;!-- ![EasyCanvas绘图库实践][1] --&gt;
    
    </summary>
    
      <category term="HTML5" scheme="http://laker.me/blog/categories/HTML5/"/>
    
    
      <category term="HTML5" scheme="http://laker.me/blog/tags/HTML5/"/>
    
      <category term="JavaScript" scheme="http://laker.me/blog/tags/JavaScript/"/>
    
      <category term="Canvas" scheme="http://laker.me/blog/tags/Canvas/"/>
    
  </entry>
  
  <entry>
    <title>HTML5 Canvas 清除圆形、不规则区域</title>
    <link href="http://laker.me/blog/2018/04/18/18_0418_canvas_cleararc/"/>
    <id>http://laker.me/blog/2018/04/18/18_0418_canvas_cleararc/</id>
    <published>2018-04-18T00:24:00.000Z</published>
    <updated>2019-03-09T03:29:03.000Z</updated>
    
    <content type="html"><![CDATA[<!-- ![Canvas 清除不规则区域][1] -->
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">laker.me–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<p> 默认 Canvas Api 只提供了清除矩形区域的接口 <code>clearRect()</code>，但有时候需要清除圆形或其他特殊形状的区域。比如我在开发 <a href="https://github.com/younglaker/pixeler" target="_blank" rel="external">pixeler</a> 擦除绘制的圆形，刚开始是用 <code>clearRect()</code>， 设置大于圆形直径的正方形来擦除，后来想，能不能直接擦除圆形区域。</p>
<p> 根据 <a href="https://stackoverflow.com/questions/3564717/how-can-i-clear-an-arc-or-circle-in-html5-canvas" target="_blank" rel="external">Stack Overflow</a> 的回答和 <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation" target="_blank" rel="external">Mozilla 的文档</a>，<code>ctx.globalCompositeOperation</code> 提供了多种色彩合成模式，其中 <code>destination-out</code> 能够完成清除效果：</p>
<p> <img src="http://77g54f.com1.z0.glb.clouddn.com/QQ20180522-180816@2x.png?imageView2/1/q/100|watermark/1/image/aHR0cDovLzc3ZzU0Zi5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9sYWtlcjEucG5n/dissolve/100/gravity/South/dy/10" alt="destination-out"></p>
<p> 可以拓展 Canvas 接口：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">CanvasRenderingContext2D.prototype.clearArc = function(x, y, radius, startAngle, endAngle, anticlockwise) &#123;</div><div class="line">    <span class="keyword">this</span>.beginPath();</div><div class="line">    <span class="keyword">this</span>.globalCompositeOperation = <span class="string">'destination-out'</span>;</div><div class="line">    <span class="keyword">this</span>.fillStyle = <span class="string">'black'</span>;</div><div class="line">    <span class="keyword">this</span>.arc(x, y, radius, startAngle, endAngle, anticlockwise);</div><div class="line">    <span class="comment">// 参数分别是：圆心横坐标、纵坐标、半径、开始的角度、结束的角度、是否逆时针</span></div><div class="line">    <span class="keyword">this</span>.fill();</div><div class="line">    <span class="keyword">this</span>.closePath();</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p> 进一步，可以自定义各种路径：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">CanvasRenderingContext2D.prototype.clear = function() &#123;</div><div class="line">    <span class="keyword">this</span>.save();</div><div class="line">    <span class="keyword">this</span>.globalCompositeOperation = <span class="string">'destination-out'</span>;</div><div class="line">    <span class="keyword">this</span>.fillStyle = <span class="string">'black'</span>;</div><div class="line">    <span class="keyword">this</span>.fill();</div><div class="line">    <span class="keyword">this</span>.restore();</div><div class="line">&#125;;</div><div class="line"></div><div class="line">CanvasRenderingContext2D.prototype.clearArc = function(x, y, radius, startAngle, endAngle, anticlockwise) &#123;</div><div class="line">    <span class="keyword">this</span>.beginPath();</div><div class="line">    <span class="keyword">this</span>.arc(x, y, radius, startAngle, endAngle, anticlockwise);</div><div class="line">    <span class="keyword">this</span>.clear();</div><div class="line">&#125;;</div><div class="line"></div><div class="line">CanvasRenderingContext2D.prototype.clearShape = function(x, y, radius, startAngle, endAngle, anticlockwise) &#123;</div><div class="line">    <span class="keyword">this</span>.beginPath();</div><div class="line">    <span class="comment">// 定义各种不规则图形，如三角形、五角星...</span></div><div class="line">    <span class="keyword">this</span>.clear();</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>调用：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var canvas = document.getElementById('canvas');</div><div class="line">var context = canvas.getContext('<span class="number">2</span>d');</div><div class="line"></div><div class="line">context.clearArc(<span class="number">50</span>, <span class="number">100</span>, <span class="number">10</span>, <span class="number">0</span>, Math.<span class="literal">PI</span> * <span class="number">2</span>, false);</div><div class="line">context.clearArc(<span class="number">80</span>, <span class="number">100</span>, <span class="number">20</span>, <span class="number">0</span>, Math.<span class="literal">PI</span>, false);</div></pre></td></tr></table></figure></p>
<p><a href="http://jsdo.it/akm2/e8CK" target="_blank" rel="external">效果参考</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;!-- ![Canvas 清除不规则区域][1] --&gt;
    
    </summary>
    
      <category term="HTML5" scheme="http://laker.me/blog/categories/HTML5/"/>
    
    
      <category term="HTML5" scheme="http://laker.me/blog/tags/HTML5/"/>
    
      <category term="JavaScript" scheme="http://laker.me/blog/tags/JavaScript/"/>
    
      <category term="Canvas" scheme="http://laker.me/blog/tags/Canvas/"/>
    
  </entry>
  
  <entry>
    <title>利用 Github 分支管理一写无关痛痒的项目</title>
    <link href="http://laker.me/blog/2018/02/11/18_0211_use_github/"/>
    <id>http://laker.me/blog/2018/02/11/18_0211_use_github/</id>
    <published>2018-02-11T00:24:00.000Z</published>
    <updated>2019-03-09T03:29:05.000Z</updated>
    
    <content type="html"><![CDATA[<!-- ![利用 Github 分支管理小项目][1] -->
<a id="more"></a>
<blockquote>
<p>欢迎交换友链： <a href="http://laker.me/blog">laker.me–进击的程序媛</a><br>Github：<a href="https://github.com/younglaker" target="_blank" rel="external">https://github.com/younglaker</a><br>V信: lakerHQ （请注明‘来自博客’）</p>
</blockquote>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>因为经常会写一些小程序，需要备份到 Github 方便管理和分享。随项目增多，Repo 的数目越来越多，但是很多是无关痛痒的，不必要这么多仓库存放。处女座情结表示这样特别乱，而且一眼看上去都是很辣鸡的代码，得想办法整理一下。</p>
<h2 id="整理方法"><a href="#整理方法" class="headerlink" title="整理方法"></a>整理方法</h2><p>1.建立一个仓库 （例如我的 <a href="https://github.com/younglaker/CometLab" target="_blank" rel="external">CometLab</a>），master分支用来做展示入口，只存放一个 README.md 来作为介绍。起名 Lab，就是意味着这里就是一个实验室。里面都是些实验性的项目。<br>2.每个小项目用其他分支存放，各分支之间没什么关系。例如现在有的<code>vue-todo</code> <code>vue-eleme</code> <code>ng-ionic</code>。</p>
<p>问题来了，在分支上的提交不计入 contribution，但是我会在这个仓库的分支进行很多开发，导致calendar是空的，不是所有的发布信息都展示出来，管理代码不太方便。</p>
<h2 id="Contributions未被Github计入的几个常见原因"><a href="#Contributions未被Github计入的几个常见原因" class="headerlink" title="Contributions未被Github计入的几个常见原因"></a>Contributions未被Github计入的几个常见原因</h2><ul>
<li>进行Commits的用户没有关联到Github帐号</li>
<li>未合并到默认分支或gh-pages的Commit</li>
<li>Fork的仓库</li>
</ul>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>既然要求合并到 master 才能计入 contribution，那么就 merge 一下就可以解决。</p>
<p>分支的小项目在日常进行正常的开发、提交，待基本完成后一次性merge 到 master，以前的 commit 会一次性计入 contribution，展示在 calendar上。</p>
<h2 id="merge-操作"><a href="#merge-操作" class="headerlink" title="merge 操作"></a>merge 操作</h2><p>先切换到默认分支</p>
<pre><code>git checkout master
</code></pre><p>合并到 master</p>
<pre><code>git merge origin/分支名
</code></pre><p>删除除了mater readme.md 以外的所以文件，并修改readme的冲突，保持 master 为空。提交更改到本地：</p>
<pre><code>git add -A
git commit -m&apos;merge&apos;
</code></pre><p>再提交到 master</p>
<pre><code>git push origin master
</code></pre><p>在分支里曾经提交过的 commit 就会一次性计入 contribution，展示在 calendar上。</p>
<h2 id="升级用法"><a href="#升级用法" class="headerlink" title="升级用法"></a>升级用法</h2><p>为了方便开发，每个分支在本地用一个文件夹。</p>
<p>下载指定分支的代码：</p>
<pre><code>git clone -b 分支 git@github.com:younglaker/CometLab.git
</code></pre><p>修改本地文件夹名字成分支名字，方便管理。</p>
<p>再 clone 一个完整的仓库，需要 merge 的时候再 pull、merge、push。</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>提交代码找不到远端分支。很可能是本地所在分支不是AAA，很可能目前是在master，误以为在AAA分支。</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git push origin AAA</div><div class="line"><span class="keyword">error: </span>src refspec AAA does not match any.</div><div class="line"><span class="keyword">error: </span>failed to push some refs to 'git@github.com:younglaker/BBB.git'</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;!-- ![利用 Github 分支管理小项目][1] --&gt;
    
    </summary>
    
      <category term="GitHub" scheme="http://laker.me/blog/categories/GitHub/"/>
    
    
      <category term="GitHub" scheme="http://laker.me/blog/tags/GitHub/"/>
    
  </entry>
  
</feed>
